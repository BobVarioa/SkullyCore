{
  "version": 3,
  "sources": ["../node_modules/cppkies/src/achievement.ts", "../node_modules/cppkies/src/upgrade.ts", "../node_modules/cppkies/src/spritesheets.ts", "../node_modules/cppkies/src/helpers.ts", "../node_modules/cppkies/src/saves.ts", "../node_modules/cppkies/src/buildings.ts", "../node_modules/cppkies/src/injects/postInject.ts", "../node_modules/cppkies/src/index.ts", "../node_modules/cppkies/src/lib/eventemitter.ts", "../node_modules/cppkies/src/injects/generic.ts", "../node_modules/cppkies/src/tiers.ts", "../node_modules/cppkies/src/dragon.ts", "../node_modules/cppkies/src/milk.ts", "../node_modules/cppkies/src/vars.ts", "../node_modules/cppkies/src/injects/basegame.ts", "../jscc_temp/src/index.ts", "../jscc_temp/src/tags.ts", "../jscc_temp/src/upgrade/AdvancedHeavelyUpgrade.ts", "../jscc_temp/src/upgrade/AdvancedUpgrade.ts", "../jscc_temp/src/rifts.ts", "../jscc_temp/src/bars/BaseWidget.ts", "../jscc_temp/src/helpers/common.ts", "../jscc_temp/src/helpers/tooltip.ts", "../jscc_temp/src/bars/BuildingBarMenuWidget.ts", "../jscc_temp/src/bars/TopBarMenuWidget.ts", "../jscc_temp/src/buff/AdvancedBuff.ts", "../jscc_temp/src/quests.ts", "../jscc_temp/src/achievement/AdvancedAchievement.ts", "../jscc_temp/src/achievement/AuthorAchievement.ts"],
  "sourcesContent": ["import { resolveIcon } from \"./spritesheets\"\nimport master from \"./vars\"\nimport { loadAchievement } from \"./saves\"\nimport { applyAllProps } from \"./helpers\"\nimport { Building } from \"./buildings\"\n\nexport const customAchievements: Achievement[] = []\n\nexport class Achievement extends Game.Achievement {\n\t/**\n\t * Creates an achievement\n\t * @param name The name of the achievement\n\t * @param desc The description of it\n\t * @param icon  The icon for it\n\t */\n\tconstructor(name: string, desc: string, icon: Game.Icon) {\n\t\tsuper(name, desc, resolveIcon(icon))\n\t\tapplyAllProps(this, loadAchievement(this))\n\t\tcustomAchievements.push(this)\n\t\tif (this.won && Game.CountsAsAchievementOwned(this.pool))\n\t\t\tGame.AchievementsOwned++\n\t}\n}\n\nexport class BankAchievement extends Achievement\n\timplements Game.BankAchievementClass {\n\ttreshold: number\n\t/**\n\t * Creates an achievement which is automatically unlocked on CBTA amount\n\t * @param name Name of the achievement\n\t * @param icon The icon of it\n\t * @param q The optional quote of it\n\t * @param treshold The amount of cookies required, if not set, automatically calculated\n\t */\n\tconstructor(\n\t\tname: string,\n\t\ticon: Game.Icon,\n\t\tq?: string | null,\n\t\ttreshold = 10 ** Math.floor(Game.BankAchievements.length * 1.5 + 2)\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Bake <b>${toFixed(treshold)}</b> cookie${\n\t\t\t\tMath.abs(treshold) === 1 ? \"\" : \"s\"\n\t\t\t} in one ascension.${q ? `<q>${q}</q>` : \"\"}`,\n\t\t\ticon\n\t\t)\n\t\tthis.treshold = treshold\n\t\tthis.order = 100 + Game.BankAchievements.length * 0.01\n\t\tGame.BankAchievements.push(this)\n\t}\n}\n\nexport class CpsAchievement extends Achievement\n\timplements Game.CpsAchievementClass {\n\ttreshold: number\n\t/**\n\t * Creates an achievement which is automatically unlocked on CpS amount\n\t * @param name Name of the achievement\n\t * @param icon The icon of it\n\t * @param q The optional quote of it\n\t * @param treshold The amount of cookies per second required, if not set, automatically calculated\n\t */\n\tconstructor(\n\t\tname: string,\n\t\ticon: Game.Icon,\n\t\tq?: string | null,\n\t\ttreshold = 10 ** Math.floor(Game.BankAchievements.length * 1.2)\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Bake <b>${toFixed(treshold)}</b> cookie${\n\t\t\t\tMath.abs(treshold) === 1 ? \"\" : \"s\"\n\t\t\t} per second.${q ? `<q>${q}</q>` : \"\"}`,\n\t\t\ticon\n\t\t)\n\t\tthis.treshold = treshold\n\t\tthis.order = 200 + Game.CpsAchievements.length * 0.01\n\t\tGame.CpsAchievements.push(this)\n\t}\n}\n\nexport class TieredAchievement<Tier extends string | number> extends Achievement\n\timplements Game.TieredAchievementClass<Tier> {\n\tbuildingTie: Game.Object\n\tpool: \"normal\"\n\ttier: Tier\n\t/**\n\t * Creates an achievement which is won by having an amount of buildings\n\t * @param name The name of it\n\t * @param quote The optional quote of it\n\t * @param tier The upgrade's tier, is the id of the tier, ex. `2`(Berrylium), `7`(Jetmint), etc. (Can be \"cursor2\" or \"cursor50\" for special cursor amounts)\n\t * @param building The buildings linked to this achievement\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tquote: string | null,\n\t\tbuilding: Game.Object | string,\n\t\ttier: Tier | \"cursor2\" | \"cursor50\"\n\t) {\n\t\tconst buildingObject =\n\t\t\ttypeof building === \"object\" ? building : Game.Objects[building]\n\t\tlet icon: Game.Icon | null = null\n\t\tlet req = -1\n\t\tif (buildingObject.id === 0) {\n\t\t\tswitch (tier) {\n\t\t\t\tcase \"cursor2\":\n\t\t\t\t\ticon = [0, 6]\n\t\t\t\t\treq = 2\n\t\t\t\t\tbreak\n\t\t\t\tcase \"cursor50\":\n\t\t\t\t\ticon = [1, 6]\n\t\t\t\t\treq = 50\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tif (Game.Tiers[tier].achievUnlock <= 0) {\n\t\t\t\t\t\tconsole.warn(\"Tier has invalid unlock amount\")\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\treq = tier === 1 ? 1 : Game.Tiers[tier].achievUnlock * 2\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\tmaster.buildingHooks.Cursor.on(\"buy\", () => {\n\t\t\t\tif (Game.Objects.Cursor.amount >= req) Game.Win(this.name)\n\t\t\t})\n\t\t} else req = Game.Tiers[tier].achievUnlock\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Have <b>${req}</b> ${\n\t\t\t\tMath.abs(req) === 1 ? buildingObject.single : buildingObject.plural\n\t\t\t}.${quote ? `<q>${quote}</q>` : \"\"}`,\n\t\t\ticon ?? Game.GetIcon(buildingObject.name, tier)\n\t\t)\n\t\tGame.SetTier(\n\t\t\tbuildingObject.name,\n\t\t\ttier === \"cursor2\" || tier === \"cursor50\" ? 1 : tier\n\t\t)\n\n\t\tbuildingObject.tieredAchievs[tier] = this\n\t\tthis.buildingTie = buildingObject\n\n\t\tthis.order = 1000 + buildingObject.id * 100 + this.id / 1000\n\t\t// Manually patch order since Orteil doesn't like consistency\n\t\tthis.order -= Math.max(0, Math.min(buildingObject.id - 4, 3)) * 75\n\t\tif (buildingObject.id >= 8) this.order -= 75\n\t\tif (buildingObject.id === 0) this.order += 50\n\t}\n}\n\nexport class ProductionAchievement extends Achievement {\n\t/**\n\t * Creates a production achievement (Make \\_ from only \\_ achievements)\n\t * @param name Name of the achievement\n\t * @param building The building of the achivement\n\t * @param tier The tier of productivity, not the normal tier, fully works with only `1`, `2`, `3`, otherwise icon will be messed up.\n\t * @param quote The (optional) quote of it\n\t * @param mult The additional multiplier, should be used if the achievement is too easy to obtain\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tbuilding: string | Game.Object,\n\t\ttier: number,\n\t\tquote?: string | null,\n\t\tmult?: number | null\n\t) {\n\t\tif (typeof building === \"string\") building = Game.Objects[building]\n\t\tconst icon: Game.Icon = [\n\t\t\tbuilding.iconColumn,\n\t\t\t21 + tier,\n\t\t\tbuilding instanceof Building ? building.iconLink : undefined,\n\t\t]\n\t\tconst pow = 10 ** (12 + building.id + (mult ?? 0) + (tier - 1) * 7)\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Make <b>${toFixed(pow)}</b> cookies just from ${building.plural}.${\n\t\t\t\tquote ? `<q>${quote}</q>` : \"\"\n\t\t\t}`,\n\t\t\ticon\n\t\t)\n\t\tthis.order = 1020 + building.id * 100 + this.id / 1000\n\t\t// Manually patch order since Orteil doesn't like consistency\n\t\tthis.order -= Math.max(0, Math.min(building.id - 4, 3)) * 75\n\t\tif (building.id >= 8) this.order -= 75\n\t\tif (building.id === 0) this.order += 50\n\t\tbuilding.productionAchievs.push({ pow, achiev: this })\n\t}\n}\n\nexport class Level10Achievement extends Achievement {\n\t/**\n\t * Creates an achievement which is given for getting level 10 of the building\n\t * @param name Name of the achievement\n\t * @param building The building to track the level of\n\t * @param quote The (optional) quote of it\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tbuilding: string | Game.Object,\n\t\tquote?: string | null\n\t) {\n\t\tif (typeof building === \"string\") building = Game.Objects[building]\n\t\tconst icon: Game.Icon = [\n\t\t\tbuilding.iconColumn,\n\t\t\t26,\n\t\t\tbuilding instanceof Building ? building.iconLink : undefined,\n\t\t]\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Reach level <b>10</b> ${building.plural}.${\n\t\t\t\tquote ? `<q>${quote}</q>` : \"\"\n\t\t\t}`,\n\t\t\ticon\n\t\t)\n\t\tthis.order = 1020 + building.id * 100 + this.id / 1000\n\t\t// Manually patch order since Orteil doesn't like consistency\n\t\tthis.order -= Math.max(0, Math.min(building.id - 4, 3)) * 75\n\t\tif (building.id >= 8) this.order -= 75\n\t\tif (building.id === 0) this.order += 50\n\t\tbuilding.levelAchiev10 = this\n\t}\n}\n\nexport class MouseAchievement<\n\tTier extends string | number\n> extends Achievement {\n\tpool: \"normal\"\n\ttier: Tier\n\t/**\n\t * Creates an achievement which is unlocked when a specific amount of cookies is made\n\t * @param name Name of the achievement\n\t * @param quote Quote (flavour text) of it\n\t * @param tier The achievement's tier, is the id of the tier, ex. `2`(Berrylium), `7`(Jetmint), `synergy2`(Synergy II), etc.\n\t */\n\tconstructor(name: string, tier: Tier, quote: string) {\n\t\tconst tierPow = parseInt(tier.toString())\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Make <b>${toFixed(10 ** (1 + tierPow * 2))}</b> cookies from clicking.${\n\t\t\t\tquote ? `<q>${quote}</q>` : \"\"\n\t\t\t}`,\n\t\t\tGame.GetIcon(\"Mouse\", tier) // Injected in `basegame.ts`\n\t\t)\n\t\tthis.pool = \"normal\"\n\t\tthis.tier = tier\n\t\tthis.order = 1000 + this.id / 1000\n\t\tif (!Game.Tiers[tier].special && !isNaN(tierPow))\n\t\t\tmaster.on(\"check\", () => {\n\t\t\t\tif (Game.handmadeCookies >= 10 ** (1 + tierPow * 2)) Game.Win(this.name)\n\t\t\t})\n\t}\n}\n", "import master from \"./vars\"\nimport { loadUpgrade } from \"./saves\"\nimport { CommonValue, toSentenseCase } from \"./helpers\"\nimport { resolveIcon } from \"./spritesheets\"\n\nexport const customUpgrades: Upgrade[] = []\n\n/**\n * The class for upgrades\n */\nexport class Upgrade extends Game.Upgrade {\n\t/**\n\t * Creates an upgrade\n\t * @param name The name of the upgrade\n\t * @param desc The description of it\n\t * @param price The price of it\n\t * @param icon  The icon for it\n\t * @param buyFunc The function that gets called when you buy the upgrade\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tdesc: CommonValue<string>,\n\t\tprice: CommonValue<number>,\n\t\ticon: CommonValue<Game.Icon>,\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tbuyFunc: () => void = (): void => {}\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\ttypeof desc === \"function\" ? \"\" : desc,\n\t\t\ttypeof price === \"function\" ? 0 : price,\n\t\t\ttypeof icon === \"function\" ? [0, 0] : resolveIcon(icon),\n\t\t\tbuyFunc\n\t\t)\n\n\t\tif (typeof desc === \"function\") this.descFunc = desc\n\t\tif (typeof price === \"function\") this.priceFunc = price\n\t\tif (typeof icon === \"function\")\n\t\t\tthis.iconFunction = () => resolveIcon(icon())\n\t\tcustomUpgrades.push(this)\n\t\tconst loadProps = loadUpgrade(this)\n\t\tfor (const i in loadProps) this[i] = loadProps[i]\n\t\tGame.upgradesToRebuild = 1\n\t\tif (this.bought && Game.CountsAsUpgradeOwned(this.pool))\n\t\t\tGame.UpgradesOwned++\n\t}\n}\n\n/**\n * The class for heavenly upgrades\n */\nexport class HeavenlyUpgrade extends Upgrade implements Game.HeavenlyUpgrade {\n\tposX: number\n\tposY: number\n\n\tpool = \"prestige\" as const\n\t/**\n\t * Creates a heavenly upgrade\n\t * @param name The name for it\n\t * @param desc The description of it\n\t * @param price The price of in (in Heavenly Chips)\n\t * @param icon The icon for it\n\t * @param position The position of it on the heavenly map screen\n\t * @param parents It's parents, can be mixed ID's with names\n\t * @param buyFunc The function which gets called on being bought\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tdesc: CommonValue<string>,\n\t\tprice: CommonValue<number>,\n\t\ticon: CommonValue<Game.Icon>,\n\t\tposition: [number, number],\n\t\tparents: (string | number)[] = [\"Legacy\"],\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tbuyFunc: () => void = (): void => {}\n\t) {\n\t\tsuper(name, desc, price, icon, buyFunc)\n\n\t\tthis.posX = position[0]\n\t\tthis.posY = position[1]\n\n\t\tthis.parents = parents.map(id => Game.Upgrades[id] || Game.UpgradesById[id])\n\n\t\tGame.PrestigeUpgrades.push(this)\n\t\tGame.UpgradePositions[this.id] = position\n\t}\n}\n\nfunction isFortune<Tier extends string | number>(\n\tupgrade: TieredUpgrade<Tier | \"fortune\">\n): upgrade is TieredUpgrade<\"fortune\"> {\n\treturn upgrade.tier === \"fortune\"\n}\n\nexport class TieredUpgrade<Tier extends string | number = string | number>\n\textends Upgrade\n\timplements Game.TieredUpgradeClass<Tier> {\n\tbuildingTie: Game.Object\n\tbuildingTie1: Game.Object\n\ttier: Tier\n\tpool: \"\"\n\n\t/**\n\t * Creates a tiered upgrade\n\t * @param name The name of the tiered upgrade\n\t * @param quote The description of the upgrade\n\t * @param building The building it boosts\n\t * @param tier The upgrade's tier, is the id of the tier, ex. `2`(Berrylium), `7`(Jetmint), `synergy2`(Synergy II), etc.\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tquote: string,\n\t\tbuilding: Game.Object | string,\n\t\ttier: Tier\n\t) {\n\t\tif (typeof building === \"string\") building = Game.Objects[building]\n\t\tsuper(\n\t\t\tname,\n\t\t\t`${toSentenseCase(\n\t\t\t\tbuilding.plural\n\t\t\t)} are <b>twice</b> as efficient.<q>${quote}</q>`,\n\t\t\tbuilding.basePrice * Game.Tiers[tier].price,\n\t\t\tGame.GetIcon(building.name, tier)\n\t\t)\n\n\t\tGame.SetTier(building.name, tier)\n\n\t\tthis.buildingTie1 = building\n\t\tif (isFortune(this)) {\n\t\t\tthis.order = 19000\n\t\t\tbuilding.fortune = this\n\t\t}\n\t\tif (!isNaN(parseInt(tier.toString()))) {\n\t\t\ttier = parseInt(tier.toString()) as Tier\n\t\t}\n\t\tif (typeof tier === \"number\") {\n\t\t\tthis.order = (building.id + 1) * 100 + this.id / 1000\n\t\t\t// Manually patch order since Orteil doesn't like consistency\n\t\t\tthis.order -= Math.max(0, Math.min(building.id - 4, 3)) * 75\n\t\t\tif (building.id >= 8) this.order -= 75\n\t\t}\n\t\tif (tier === \"fortune\") Game.Tiers[tier].upgrades.push(this)\n\t\tbuilding.buyFunction.apply(building)\n\t}\n}\n\nexport class GrandmaSynergy extends Upgrade\n\timplements Game.GrandmaSynergyClass {\n\tbuildingTie: Game.Object\n\tpool: \"\"\n\t/**\n\t * Creates a grandma synergy upgrade\n\t * @param name The name for the upgrade(Usually something like \"_ Grandmas\")\n\t * @param quote The flavor text of the upgrade\n\t * @param buildingName The building to be tied with\n\t * @param grandmaPicture Optional, the picture of the grandma to use in grandma art\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tquote: string,\n\t\tbuilding: Game.Object | string,\n\t\tgrandmaPicture?: string\n\t) {\n\t\tif (grandmaPicture) {\n\t\t\tif (!grandmaPicture.endsWith(\".png\"))\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Can't use the grandma picture URL \"${grandmaPicture}\", URL must end with .png`\n\t\t\t\t)\n\t\t\tgrandmaPicture = grandmaPicture.substring(0, grandmaPicture.length - 4)\n\t\t}\n\t\tif (typeof building === \"string\") building = Game.Objects[building]\n\t\tlet grandmaNumber: string | number = building.id - 1\n\t\tif (grandmaNumber === 1) grandmaNumber = \"grandma\"\n\t\telse grandmaNumber = `${grandmaNumber} grandmas`\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Grandmas are <b>twice</b> as efficient. ${toSentenseCase(\n\t\t\t\tbuilding.plural\n\t\t\t)} gain <b>+1% CpS</b> per ${grandmaNumber}.<q>${quote}</q>`,\n\t\t\tbuilding.basePrice * Game.Tiers[2].price,\n\t\t\t[10, 9, \"\"],\n\t\t\tGame.Objects.Grandma.redraw\n\t\t)\n\t\tbuilding.grandma = this\n\t\tthis.buildingTie = building\n\t\tthis.order = 250 + this.id / 1000\n\t\tif (building.id >= 12) this.order += 5\n\t\tGame.GrandmaSynergies.push(this.name)\n\t\tif (grandmaPicture) {\n\t\t\tmaster.hooks.on(\"grandmaPic\", src => {\n\t\t\t\tif (this.bought) return [...src, grandmaPicture] as string[]\n\t\t\t\telse return src\n\t\t\t})\n\t\t}\n\t\tGame.Objects.Grandma.redraw()\n\t\tbuilding.buyFunction.apply(building)\n\t}\n}\n\nexport class SynergyUpgrade<Tier extends string> extends Upgrade\n\timplements Game.SynergyUpgradeClass<Tier> {\n\tbuildingTie1: Game.Object\n\tbuildingTie2: Game.Object\n\ttier: Tier\n\tpool: \"\"\n\t/**\n\t * Creates a synergy upgrade\n\t * @param name The name for the upgrade\n\t * @param quote The flavor text for it\n\t * @param building1 The first building, note that the icon will be inherited from this\n\t * @param building2 The second building\n\t * @param tier The upgrade's tier, is the id of the tier, ex. `synergy1`(Synergy I), `synergy2`(Synergy II), etc. **Warning: The tier must have a req field**\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tquote: string,\n\t\tbuilding1: Game.Object | string,\n\t\tbuilding2: Game.Object | string,\n\t\ttier: Tier\n\t) {\n\t\tif (typeof building1 === \"string\") building1 = Game.Objects[building1]\n\t\tif (typeof building2 === \"string\") building2 = Game.Objects[building2]\n\t\tconst icon = Game.GetIcon(building1.name, tier)\n\t\t//Swap\n\t\tif (building1.basePrice > building2.basePrice) {\n\t\t\tconst temp = building1\n\t\t\tbuilding1 = building2\n\t\t\tbuilding2 = temp\n\t\t}\n\t\tsuper(\n\t\t\tname,\n\t\t\t`${toSentenseCase(\n\t\t\t\tbuilding1.plural\n\t\t\t)} gain <b>+5% CpS</b> per ${building2.name.toLowerCase()}.<br>${toSentenseCase(\n\t\t\t\tbuilding2.plural\n\t\t\t)} gain <b>+0.1% CpS</b> per \n\t\t\t${building1.name.toLowerCase()}.<q>${quote}</q>`,\n\t\t\t(building1.basePrice * 10 + building2.basePrice * 1) *\n\t\t\t\tGame.Tiers[tier].price,\n\t\t\ticon\n\t\t)\n\t\tthis.tier = tier\n\t\tthis.buildingTie1 = building1\n\t\tthis.buildingTie2 = building2\n\t\tthis.order = 5000 + this.id / 1000\n\t\tbuilding1.synergies.push(this)\n\t\tbuilding2.synergies.push(this)\n\n\t\tGame.Tiers[tier].upgrades.push(this)\n\t\tGame.RebuildUpgrades()\n\t\tbuilding1.buyFunction.apply(building1)\n\t}\n}\n\n/**\n * Early cursor logs which don't follow any pattern\n */\nconst cursorEarlyLogs = [5, 7, 8, 9, 10]\n\nexport class CursorUpgrade<Tier extends string | number> extends Upgrade\n\timplements Game.GenericTieredUpgrade<Tier> {\n\tpool: \"\"\n\ttier: Tier\n\t/**\n\t * Creates an upgrade which powers up the Thousand Fingers upgrade\n\t * @param name Name of the upgrade\n\t * @param quote Quote (flavour text) of it\n\t * @param tier The upgrade's tier, is the id of the tier, ex. `2`(Berrylium), `7`(Jetmint), `synergy2`(Synergy II), etc.\n\t * @param power The multiplier of of thousand fingers, if omitted, 20 by default, which is the multiplier of later cursor upgrades\n\t */\n\tconstructor(name: string, quote: string, tier: Tier, power = 20) {\n\t\tconst building = Game.Objects.Cursor\n\t\tconst tierPow = parseInt(tier.toString())\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Multiplies the gain from Thousand fingers by <b>${power}</b>.<q>${quote}</q>`,\n\t\t\tGame.Tiers[tier].special || isNaN(tierPow)\n\t\t\t\t? building.basePrice * Game.Tiers[tier].price\n\t\t\t\t: // Calculate the cursor price\n\t\t\t\t  10 **\n\t\t\t\t\t\t// Early logs kinda don't really follow anything\n\t\t\t\t\t\t(cursorEarlyLogs[\n\t\t\t\t\t\t\t// Get the latest one\n\t\t\t\t\t\t\tMath.min(tierPow - 4, cursorEarlyLogs.length - 1)\n\t\t\t\t\t\t] +\n\t\t\t\t\t\t\t// The normal *10^3 for all other stuffs\n\t\t\t\t\t\t\tMath.max(tierPow - 8, 0) * 3),\n\t\t\tGame.GetIcon(building.name, tier)\n\t\t)\n\t\tthis.tier = tier\n\t\tthis.pool = \"\"\n\t\tthis.order = 100 + this.id / 1000\n\t\tmaster.on(\"cursorFingerMult\", mult => (this.bought ? mult * power : mult))\n\t\tif (!Game.Tiers[tier].special && !isNaN(tierPow))\n\t\t\tmaster.buildingHooks.Cursor.on(\"buy\", () => {\n\t\t\t\tif (building.amount >= (tierPow === 4 ? 25 : (tierPow - 4) * 50))\n\t\t\t\t\tGame.Unlock(this.name)\n\t\t\t})\n\t\tif (tier === \"fortune\") Game.Tiers[tier].upgrades.push(this)\n\t\tGame.Objects.Cursor.buyFunction.apply(Game.Objects.Cursor)\n\t}\n}\n\n/**\n * Exceptions when the change kitten cost is not 3 (in log10)\n */\nexport const kittenPriceRules = { 1: 5, 2: 4, 4: 4, default: 3 }\n\n/**\n * Calculates the cost of a kitten, based on price rules and tier.\n * @param tier The tier, must be a number\n */\nexport function computeKittenCost(tier: number): number {\n\tlet cost = 1\n\tfor (let i = 1; i <= tier; i++)\n\t\tcost += kittenPriceRules[i] ?? kittenPriceRules.default\n\treturn 9 * 10 ** cost\n}\n\n/**\n * The pattern of kitten powers, might be inaccurate on further versions.\n * (Loops if tier is beyond length)\n */\nconst kittenPowerPattern = [\n\t0.1,\n\t0.125,\n\t0.15,\n\t0.175,\n\t0.2,\n\t0.2,\n\t0.2,\n\t0.2,\n\t0.2,\n\t0.175,\n\t0.15,\n\t0.125,\n\t0.115,\n]\n\nexport class KittenUpgrade<Tier extends string | number> extends Upgrade\n\timplements Game.KittenUpgrade<Tier> {\n\tkitten = true as const\n\tpool = \"\" as const\n\t/**\n\t * Creates a new kitten upgrade, which boosts CpS based on achievement amount\n\t * @param name Name of the upgrade\n\t * @param quote The quote (flavour text) of it\n\t * @param tier The upgrade's tier, is the id of the tier, ex. `2`(Berrylium), `7`(Jetmint), `synergy2`(Synergy II), etc.\n\t * @param power The multiplier of CpS per 25 achievement, if not set, automatically calculated\n\t * @param cost The cost of the upgrade, if not set, automatically calculated\n\t * @param milkUnlockAmount The milk progess (achievements / 25) required to unlock the upgrade, if not set, automatically calculated\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tquote: string,\n\t\tpublic tier: Tier,\n\t\tpower = Game.Tiers[tier].special || isNaN(parseInt(tier.toString()))\n\t\t\t? null\n\t\t\t: kittenPowerPattern[\n\t\t\t\t\t(parseInt(tier.toString()) - 1) % (kittenPowerPattern.length - 1)\n\t\t\t  ],\n\t\tcost?: number,\n\t\tmilkUnlockAmount = Game.Tiers[tier].special ||\n\t\tisNaN(parseInt(tier.toString()))\n\t\t\t? null\n\t\t\t: tier === 1\n\t\t\t? 0.5\n\t\t\t: // Trust me\n\t\t\t  (tier as number) - 1\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\t`You gain <b>more CpS</b> the more milk you have.<q>${quote}</q>`,\n\t\t\tGame.Tiers[tier].special || isNaN(parseInt(tier.toString()))\n\t\t\t\t? cost ?? 0\n\t\t\t\t: computeKittenCost(tier as number), //Just trust me.\n\t\t\tGame.GetIcon(\"Kitten\", tier)\n\t\t)\n\t\tif (power === null)\n\t\t\tconsole.warn(\n\t\t\t\t\"Please make sure to specify the power if the kitten tier is special\"\n\t\t\t)\n\t\tif (\n\t\t\t(Game.Tiers[tier].special || isNaN(parseInt(tier.toString()))) &&\n\t\t\tcost === undefined\n\t\t)\n\t\t\tconsole.warn(\n\t\t\t\t\"Please make sure to specify the cost if the kitten tier is special\"\n\t\t\t)\n\t\tif (milkUnlockAmount !== null)\n\t\t\tmaster.on(\"logic\", () => {\n\t\t\t\tif (Game.milkProgress >= milkUnlockAmount) Game.Unlock(this.name)\n\t\t\t})\n\t\tthis.order = 20000 + this.id / 1000\n\t\tif (power !== null)\n\t\t\tmaster.on(\"rawCpsMult\", mult => {\n\t\t\t\tconst addMult = this.bought\n\t\t\t\t\t? 1 + Game.milkProgress * power * master.hiddenMilkMult\n\t\t\t\t\t: 1\n\t\t\t\tGame.cookiesMultByType[\"kittens\"] *= addMult\n\n\t\t\t\treturn mult * addMult\n\t\t\t})\n\t\tGame.UpgradesByPool[\"kitten\"].push(this)\n\t\tif (tier === \"fortune\") Game.Tiers[tier].upgrades.push(this)\n\t}\n}\n\nexport class MouseUpgrade<Tier extends string | number> extends Upgrade\n\timplements Game.GenericTieredUpgrade<Tier> {\n\tpool = \"\" as const\n\t/**\n\t * Creates an upgrade which powers up the cookies per click\n\t * @param name Name of the upgrade\n\t * @param quote Quote (flavour text) of it\n\t * @param tier The upgrade's tier, is the id of the tier, ex. `2`(Berrylium), `7`(Jetmint), `synergy2`(Synergy II), etc.\n\t * @param power The multiplier of CpS per click, `0.01` by default, which is what all other cursor upgrades give\n\t */\n\tconstructor(name: string, quote: string, public tier: Tier, power = 1) {\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Clicking gains <b>+${power}% of your CpS</b>.<q>${quote}</q>`,\n\t\t\t10 ** (3 + parseInt(tier.toString()) * 2),\n\t\t\tGame.GetIcon(\"Mouse\", tier) // Injected in `basegame.ts`\n\t\t)\n\t\tconst tierPow = parseInt(tier.toString())\n\t\tthis.order = 150 + this.id / 1000\n\t\tmaster.on(\"cpcAdd\", add =>\n\t\t\tthis.bought ? add + (Game.cookiesPs * power) / 100 : add\n\t\t)\n\t\tif (!Game.Tiers[tier].special && !isNaN(tierPow))\n\t\t\tmaster.on(\"check\", () => {\n\t\t\t\tif (Game.handmadeCookies >= 10 ** (1 + tierPow * 2))\n\t\t\t\t\tGame.Unlock(this.name)\n\t\t\t})\n\t\tif (tier === \"fortune\") Game.Tiers[tier].upgrades.push(this)\n\t}\n}\n\nexport class CookieUpgrade extends Upgrade implements Game.CookieUpgrade {\n\tpool = \"cookie\" as const\n\t/**\n\t * Create an upgrade which multiplier cookie production\n\t * @param name Name of the cookie\n\t * @param quote Quote (flavour text) of it\n\t * @param price The price of the cookie\n\t * @param icon The icon of it\n\t * @param power The multiplier of CpS, in %, so `5` means +5% CpS, etc.\n\t * @param req Some optional conditions, etc. the season, the upgrade required, or if the upgrade can be unlocked naturally at all to unlock this\n\t * (Note: All cookies which aren't locked *require* you to have 1/20 of it's cost to be unlocked)\n\t * @param order Position of the cookie in the list, Most cookies have 10020 by default, cookies from boxes and special cookies have different orders.\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tquote: string,\n\t\tprice: CommonValue<number>,\n\t\ticon: Game.Icon,\n\t\tpublic power: CommonValue<number>,\n\t\treq?: { require?: string; season?: string; locked?: boolean },\n\t\torder?: number\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\t`Cookie production multiplier <b>+${Beautify(\n\t\t\t\ttypeof power === \"function\" ? power() : power,\n\t\t\t\t1\n\t\t\t)}%</b>.<q>${quote}</q>`,\n\t\t\tprice,\n\t\t\ticon\n\t\t)\n\t\tthis.order = (order ?? master.cookieOrder ?? 10020) + this.id / 1000\n\t\tthis.unlockAt = {\n\t\t\tname,\n\t\t\tcookies: (typeof price === \"function\" ? price() : price) / 20,\n\t\t\trequire: req?.require,\n\t\t\tseason: req?.season,\n\t\t}\n\t\tGame.UnlockAt.push(this.unlockAt)\n\t\tGame.UpgradesByPool.cookie.push(this)\n\t\tGame.cookieUpgrades.push(this)\n\t}\n}\n", "import master from \"./vars\"\n// Resolve aliases\n/**\n * Currently defined alias\n */\nexport const aliases: Record<string, string> = {}\nlet steppedAliases: string[] = []\n/**\n * Creates an alias from an old name to a new one\n * @param oldName The current name\n * @param aliasName The new, alias name\n */\nexport function alias(oldName: string, aliasName: string): void {\n\taliases[oldName] = aliasName\n}\n\n/**\n * Deletes an alias from the name\n * @param name The name to remove an alias from\n */\nexport function unalias(name: string): void {\n\tdelete alias[name]\n}\n\n/**\n * Resolves an aliased name\n * @param name The name to be resolved\n */\nexport function resolveAlias(name: string): string {\n\tif (steppedAliases.includes(name)) throw new Error(\"Recursive alias\")\n\tsteppedAliases.push(name)\n\tif (name in aliases) return resolveAlias(aliases[name])\n\tsteppedAliases = []\n\treturn name\n}\n\n/**\n * A local helper to fetch an image from an image link\n * @param link The image URI\n */\nfunction generateImageFromLink(link: string): Promise<HTMLImageElement> {\n\treturn new Promise(resolve => {\n\t\tconst img = new Image()\n\t\timg.addEventListener(\"load\", (): void => {\n\t\t\tresolve(img)\n\t\t})\n\t\timg.crossOrigin = \"Anonymous\"\n\t\timg.src = link\n\t})\n}\n\n/**\n * A local helper to create a blob URI from a canvas buffer\n */\nfunction toBlobURI(buf: CanvasRenderingContext2D): Promise<string> {\n\treturn new Promise(resolve => {\n\t\tbuf.canvas.toBlob((blob: Blob) => {\n\t\t\tresolve(URL.createObjectURL(blob))\n\t\t})\n\t})\n}\n\n/**\n * A universal version of Icon which is not restricted to CC\n */\nexport type UniversalIcon = [number, number]\n/**\n * Relocates the icons on an iconsheets\n * @param link The link to the original file\n * @param icons The definition of iconName: iconPosition\n * @param matrix The matrix of icon names\n * @param iconSize The size of a single icon\n * @param size The size of the new spritesheet\n * @param postProcess Optional operations after the relink\n */\nfunction relink(\n\tlink: string,\n\ticons: Record<string, UniversalIcon>,\n\tmatrix: string[][] | string[],\n\ticonSize: [number, number],\n\tsize: [number, number],\n\tpostProcess?: (ctx: CanvasRenderingContext2D) => void | Promise<void>\n): Promise<string> {\n\treturn new Promise(resolve => {\n\t\tif (!(matrix[0] instanceof Array)) matrix = [matrix as string[]]\n\t\tmatrix = matrix as string[][]\n\t\t//Collect references\n\t\tconst references: Record<string, Game.Icon> = {}\n\t\tfor (const y in matrix)\n\t\t\tfor (const x in matrix[y]) {\n\t\t\t\t// Ignore if falsy\n\t\t\t\tif (!matrix[y][x]) continue\n\t\t\t\tmatrix[y][x] = matrix[y][x].toString().toLowerCase()\n\t\t\t\tif (!(matrix[y][x] in icons)) throw new Error(\"Invalid icon name\")\n\t\t\t\treferences[matrix[y][x]] = [parseInt(x), parseInt(y)]\n\t\t\t}\n\t\t//Draw new column\n\t\tconst buffer = document\n\t\t\t.createElement(\"canvas\")\n\t\t\t.getContext(\"2d\") as CanvasRenderingContext2D\n\t\tconst img = new Image()\n\t\timg.addEventListener(\"load\", (): void => {\n\t\t\tbuffer.canvas.width = size[0]\n\t\t\tbuffer.canvas.height = size[1]\n\t\t\tfor (const i in references)\n\t\t\t\tbuffer.drawImage(\n\t\t\t\t\timg,\n\t\t\t\t\treferences[i][0] * iconSize[0],\n\t\t\t\t\treferences[i][1] * iconSize[1],\n\t\t\t\t\ticonSize[0],\n\t\t\t\t\ticonSize[1],\n\t\t\t\t\ticons[i][0] * iconSize[0],\n\t\t\t\t\ticons[i][1] * iconSize[1],\n\t\t\t\t\ticonSize[0],\n\t\t\t\t\ticonSize[1]\n\t\t\t\t)\n\t\t\tconst postPostProcess = (): void => {\n\t\t\t\ttoBlobURI(buffer).then(resolve)\n\t\t\t}\n\t\t\tlet ret: void | Promise<void>\n\t\t\tif (postProcess) ret = postProcess(buffer)\n\t\t\tif (ret instanceof Promise) ret.then(postPostProcess)\n\t\t\telse postPostProcess()\n\t\t})\n\t\timg.crossOrigin = \"Anonymous\"\n\t\timg.src = link\n\t})\n}\n\n/**\n * The amount of column relinks a URI has been to\n */\nconst columnRelinkAmount: Record<string, number> = {}\n\n/**\n * Additional icons which aren't defined with tiers\n */\nexport const extraColumnIcons: Record<string, UniversalIcon> = {\n\t\"3d\": [0, 21],\n\tmilestone1: [0, 22],\n\tmilestone2: [0, 23],\n\tmilestone3: [0, 24],\n\tkrumblor: [0, 25],\n\tlevel1: [0, 26],\n\tlevel2: [0, 27],\n}\n/**\n * Relocates the icons for a column and automatically aliases it\n * @param link The link to the original, unordered iconsheet\n * @param matrix The matrix of the names of the icon tiers\n * Valid tier names are:\n * * Tier ids: `1`, `5`, `7`, etc.\n * * Tier names: `\"jetmint\"`, `\"plain\"`, etc.\n * * Non-standard tier icon tiers: `\"3d\"`, `\"milestone1\"`, `\"milestone2\"`, `\"milestone3\"`, `\"krumblor\"`, `\"level1\"`, `\"level2\"`\n * @param offset The icon X to offset the column\n * @param followAlias If true, the original image URI will be de-aliased (`relinkColumn`, `relinkRow` and `patchIconsheet` create an alias!)\n */\nexport async function relinkColumn(\n\tlink: string,\n\tmatrix: string[] | string[][],\n\toffset?: number,\n\tfollowAlias = false\n): Promise<void> {\n\t// Automatically offset the X by 1 for each relink\n\tif (offset === undefined) {\n\t\tif (!columnRelinkAmount[link]) columnRelinkAmount[link] = 0\n\t\toffset = columnRelinkAmount[link]++\n\t}\n\tconst columnIcons: Record<string, UniversalIcon> = {}\n\tfor (const i in extraColumnIcons) {\n\t\tcolumnIcons[i] = [offset, extraColumnIcons[i][1]]\n\t}\n\t// Automatically generate normal tiers\n\tfor (const i in Game.Tiers)\n\t\tcolumnIcons[Game.Tiers[i].name.toLowerCase()] = columnIcons[\n\t\t\ti.toString()\n\t\t] = [offset, Game.Tiers[i].iconRow]\n\talias(\n\t\tlink,\n\t\tawait relink(\n\t\t\tfollowAlias ? resolveAlias(link) : link,\n\t\t\tcolumnIcons,\n\t\t\tmatrix,\n\t\t\t[48, 48],\n\t\t\t[\n\t\t\t\t(offset + 1) * 48,\n\t\t\t\t(Object.values(columnIcons).reduce(\n\t\t\t\t\t(acc, value) => Math.max(acc, value[1]),\n\t\t\t\t\t-Infinity\n\t\t\t\t) +\n\t\t\t\t\t1) *\n\t\t\t\t\t48,\n\t\t\t],\n\t\t\tctx => {\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\t// If not first relink, append to original image\n\t\t\t\t\tif (resolveAlias(link) !== link) {\n\t\t\t\t\t\tconst img = new Image()\n\t\t\t\t\t\timg.addEventListener(\"load\", (): void => {\n\t\t\t\t\t\t\tctx.drawImage(img, 0, 0)\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t})\n\t\t\t\t\t\timg.src = resolveAlias(link)\n\t\t\t\t\t\timg.crossOrigin = \"Anonymous\"\n\t\t\t\t\t} else resolve()\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t)\n}\n\n/**\n * The amount of row relinks a URI has been to\n */\nconst rowRelinkAmount: Record<string, number> = {}\n\n/**\n * Additional icons which aren't defined with buildings\n */\nexport const extraRowIcons: Record<string, UniversalIcon> = {\n\tresearch: [9, 0],\n\tcookie: [10, 0],\n\tmouse: [11, 0],\n\tmulticursor: [12, 0],\n\tkitten: [18, 0],\n}\n/**\n * Relocates the icons for a row and automatically aliases it\n * @param link The link to the original, unordered iconsheet\n * @param matrix The matrix of the names of the icon types\n * Valid tier types are:\n * * Building ids: `1, `5`, `7`, etc.\n * * Building names: `\"cursor\"`, `\"farm\"`, etc.\n * * Non-standard tier icon tiers: `\"research\"`, `\"cookie\"`, `\"mouse\"`, `\"multicursor\"`, `\"kitten\"`\n * @param offset The icon X to offset the column\n * @param followAlias If true, the original image URI will be de-aliased (`relinkColumn`, `relinkRow` and `patchIconsheet` create an alias!)\n */\nexport async function relinkRow(\n\tlink: string,\n\tmatrix: string[] | string[][],\n\toffset?: number,\n\tfollowAlias = false\n): Promise<void> {\n\tif (offset === undefined) {\n\t\tif (!rowRelinkAmount[link]) rowRelinkAmount[link] = 0\n\t\toffset = rowRelinkAmount[link]++\n\t}\n\tconst rowIcons: Record<string, UniversalIcon> = {}\n\tfor (const i in extraRowIcons) {\n\t\trowIcons[i] = [extraRowIcons[i][0], offset]\n\t}\n\t// Automatically generate normal buildings\n\tfor (const i in Game.ObjectsById)\n\t\trowIcons[Game.ObjectsById[i].single.toLowerCase()] = rowIcons[i] = [\n\t\t\tGame.ObjectsById[i].iconColumn,\n\t\t\toffset,\n\t\t]\n\talias(\n\t\tlink,\n\t\tawait relink(\n\t\t\tfollowAlias ? resolveAlias(link) : link,\n\t\t\trowIcons,\n\t\t\tmatrix,\n\t\t\t[48, 48],\n\t\t\t[\n\t\t\t\t(Object.values(rowIcons).reduce(\n\t\t\t\t\t(acc, value) => Math.max(acc, value[0]),\n\t\t\t\t\t-Infinity\n\t\t\t\t) +\n\t\t\t\t\t1) *\n\t\t\t\t\t48,\n\t\t\t\t(offset + 1) * 48,\n\t\t\t],\n\t\t\tctx => {\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\t// If not first relink, append to original image\n\t\t\t\t\tif (resolveAlias(link) !== link) {\n\t\t\t\t\t\tconst img = new Image()\n\t\t\t\t\t\timg.addEventListener(\"load\", (): void => {\n\t\t\t\t\t\t\tctx.drawImage(img, 0, 0)\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t})\n\t\t\t\t\t\timg.src = resolveAlias(link)\n\t\t\t\t\t\timg.crossOrigin = \"Anonymous\"\n\t\t\t\t\t} else resolve()\n\t\t\t\t})\n\t\t\t}\n\t\t)\n\t)\n}\n\n/**\n * Patches an iconsheet with replacements\n * @param link The link to the original, unpatched iconsheet\n * @param replacements The replacements to make, first element in tuple is the original position,\n * second is the icon to replace with\n * @param followAlias If true, the original image URI will be de-aliased (`relinkColumn`, `relinkRow` and `patchIconsheet` create an alias!)\n */\nexport async function patchIconsheet(\n\tlink: string,\n\treplacements: [UniversalIcon, Game.Icon][],\n\tfollowAlias = true\n): Promise<void> {\n\t// First, create a canvas with the original image\n\tconst buffer = document\n\t\t.createElement(\"canvas\")\n\t\t.getContext(\"2d\") as CanvasRenderingContext2D\n\tconst ogImg = await generateImageFromLink(\n\t\tfollowAlias ? resolveAlias(link) : link\n\t)\n\tconst maxSize = [ogImg.width, ogImg.height]\n\t// Get the size of the output canvas\n\tfor (const place of replacements) {\n\t\tif (place[0][0] * 48 > maxSize[0]) maxSize[0] = place[0][0] * 48\n\t\tif (place[0][1] * 48 > maxSize[1]) maxSize[1] = place[0][1] * 48\n\t}\n\tbuffer.canvas.width = maxSize[0]\n\tbuffer.canvas.height = maxSize[1]\n\tbuffer.drawImage(ogImg, 0, 0)\n\t// Generate a cache\n\tconst replacementCache: Record<string, HTMLImageElement> = {}\n\tfor (const replacement of replacements) {\n\t\t// Little trick, here, if icon [2] is \"\", go to \"img/icons.png\" instead of `master.iconLink`\n\t\tconst iconLink = resolveAlias(\n\t\t\t(replacement[1][2] ?? master.iconLink) || \"img/icons.png\"\n\t\t)\n\t\tif (!replacementCache[iconLink])\n\t\t\treplacementCache[iconLink] = await generateImageFromLink(iconLink)\n\t\t// Clear the icon beforehand\n\t\tbuffer.clearRect(replacement[0][0] * 48, replacement[0][1] * 48, 48, 48)\n\n\t\tbuffer.drawImage(\n\t\t\treplacementCache[iconLink],\n\t\t\treplacement[1][0] * 48,\n\t\t\treplacement[1][1] * 48,\n\t\t\t48,\n\t\t\t48,\n\t\t\treplacement[0][0] * 48,\n\t\t\treplacement[0][1] * 48,\n\t\t\t48,\n\t\t\t48\n\t\t)\n\t}\n\talias(link, await toBlobURI(buffer))\n}\n\nexport function resolveIcon(icon: Game.Icon): Game.Icon {\n\ticon = [...icon]\n\tif (icon[2] === undefined || icon[2] === null) icon[2] = master.iconLink\n\ticon[2] = resolveAlias(icon[2])\n\treturn icon\n}\n", "/**\n * The common type for a value, can be either the value or a function that returns a value with the type.\n */\nexport type CommonValue<T> = T | (() => T)\n/**\n * A helper function which converts a common value to a value\n * @param value The common value to convert\n * @helper\n */\nexport function getValue<T>(value: CommonValue<T>): T {\n\tif (value instanceof Function) return value()\n\treturn value\n}\n/**\n * A helper function which escapes special regex characters.\n * @param str The string to escape\n * @helper\n */\nexport function escapeRegExp(str: string): string {\n\t// eslint-disable-next-line no-useless-escape\n\treturn str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\")\n}\n/**\n * The parameters of an injection, in order: `source`, `target`, `where`\n */\nexport type InjectParams = [\n\tstring | RegExp | null,\n\tstring,\n\t\"before\" | \"replace\" | \"after\"\n]\n/**\n * A helper helper function, which does a single inject to code\n * @param source The code to perform the inject on\n * @param config The configuration of the inject\n * @helper\n * @helperhelper\n */\nfunction doSingleInject(source: string, config: InjectParams): string {\n\tconst sliceMode = config[0] === null\n\t// Do this to mute typescript silly wrong errors\n\tlet regex = new RegExp(\"\")\n\tif (config[0] !== null) {\n\t\tif (typeof config[0] === \"string\")\n\t\t\tregex = new RegExp(escapeRegExp(config[0]), \"g\")\n\t\telse regex = config[0]\n\t\tif (!regex.test(source)) console.warn(\"Nothing to inject.\")\n\t}\n\n\tconst findStart = /(\\)[^{]*{)/\n\tconst findEnd = /(}?)$/\n\n\tswitch (config[2]) {\n\t\tcase \"before\":\n\t\t\tif (sliceMode) source = source.replace(findStart, `$1${config[1]}`)\n\t\t\telse source = source.replace(regex, `${config[1]}${config[0]}`)\n\t\t\tbreak\n\t\tcase \"replace\":\n\t\t\tif (sliceMode) source = config[1]\n\t\t\telse source = source.replace(regex, config[1])\n\t\t\tbreak\n\t\tcase \"after\":\n\t\t\tif (sliceMode) source = source.replace(findEnd, `${config[1]}$1`)\n\t\t\telse source = source.replace(regex, `${config[0]}${config[1]}`)\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthrow new Error('where Parameter must be \"before\", \"replace\" or \"after\"')\n\t}\n\treturn source\n}\n/**\n * A helper function which replaces(or appends) code in a function, returning the new function, and it's eval free!\n * @param func The source function\n * @param source What to replace, can be null for slicing\n * @param target What to put instead of (or before/after) the source\n * @param where Where to insert or replace your injection\n * @param context The optional context to use\n * @helper\n */\nexport function injectCode<\n\tT extends\n\t\t| ((...args: unknown[]) => unknown)\n\t\t| (new (...args: unknown[]) => unknown)\n>(\n\tfunc: T,\n\tsource: string | RegExp | null,\n\ttarget: string,\n\twhere: \"before\" | \"replace\" | \"after\",\n\tcontext: object = {}\n): T {\n\tconst newFunc = Function(\n\t\t...Object.keys(context),\n\t\t`return (${doSingleInject(func.toString(), [source, target, where])})`\n\t)(...Object.values(context))\n\tnewFunc.prototype = func.prototype\n\treturn newFunc\n}\n\n/**\n * A helper function which replaces(or appends) code in a function, returning the new function, and it's eval free!\n * @param func The source function\n * @param injections The injections to apply, the parameters of an injection, in order: `source`, `target`, `where`\n * @param context The optional context to use\n * @helper\n */\nexport function injectCodes<\n\tT extends\n\t\t| ((...args: unknown[]) => unknown)\n\t\t| (new (...args: unknown[]) => unknown)\n>(func: T, injections: InjectParams[], context: object = {}): T {\n\tlet newStr = func.toString()\n\tfor (const injection of injections) newStr = doSingleInject(newStr, injection)\n\tconst newFunc = Function(\n\t\t...Object.keys(context),\n\t\t`return (${newStr})`\n\t)(...Object.values(context))\n\tnewFunc.prototype = func.prototype\n\treturn newFunc\n}\n/**\n * Applies all props to an object via mutating\n * @param targObj The object which will be mutated\n * @param srcObj The object which properties will be applied to the target object\n */\n\nexport function applyAllProps(targObj: object, srcObj: object): void {\n\tfor (const i in srcObj) targObj[i] = srcObj[i]\n}\n\n/**\n * Converts a string to sentense case, AKA first letter upper, all next lower\n * @param string\n */\nexport function toSentenseCase(string: string): string {\n\treturn string.charAt(0).toUpperCase() + string.slice(1).toLowerCase()\n}\n\n/**\n * A strongly typed `hasOwnProperty`\n * @helper\n */\nexport function hasOwnProperty<X extends object, Y extends PropertyKey>(\n\tobj: X,\n\tprop: Y\n): obj is X & Record<Y, unknown> {\n\t// eslint-disable-next-line no-prototype-builtins\n\treturn obj.hasOwnProperty(prop)\n}\n/**\n * Creates a roman numeral from a number\n * @param num The number to convert\n * @helper\n */\nexport function toRomanNumeral(num: number): string {\n\tconst lookup = [\n\t\t[1000, \"M\"],\n\t\t[900, \"CM\"],\n\t\t[500, \"D\"],\n\t\t[400, \"CD\"],\n\t\t[100, \"C\"],\n\t\t[90, \"XC\"],\n\t\t[50, \"L\"],\n\t\t[40, \"XL\"],\n\t\t[10, \"X\"],\n\t\t[9, \"IX\"],\n\t\t[5, \"V\"],\n\t\t[4, \"IV\"],\n\t\t[1, \"I\"],\n\t] as const\n\tlet roman = \"\"\n\n\tfor (const charType of lookup) {\n\t\twhile (num >= charType[0]) {\n\t\t\troman += charType[1]\n\t\t\tnum -= charType[0]\n\t\t}\n\t}\n\treturn roman\n}\n", "import master from \"./vars\"\nimport { Building } from \"./buildings\"\nimport { Upgrade } from \"./upgrade\"\nimport { applyAllProps, hasOwnProperty } from \"./helpers\"\nimport { Achievement } from \"./achievement\"\n\nexport const VANILLA_DRAGON_LEVEL_AMOUNT = Game.dragonLevels.length + 0\n\nexport const SAVE_VER = 1 as const\n/**\n * The save type for Cppkies\n */\nexport interface SaveType {\n\tsaveVer: typeof SAVE_VER\n\tmods: Record<string, ModSave>\n\tforeign: ModSave\n\tdragon: DragonSave\n}\n/**\n * Legacy save types of Cppkies\n */\n\nexport type LegacySave = {\n\tsaveVer: 0\n\tmods: Record<string, never>\n\tforeign: {\n\t\tbuildings: Record<string, BuildingSave>\n\t}\n\texists: true\n}\n\n/**\n * The save type for a mod\n */\nexport interface ModSave {\n\tbuildings: Record<string, BuildingSave>\n\tupgrades: Record<string, UpgradeSave>\n\tachievements: Record<string, AchievementSave>\n}\n/**\n * The save type for a building\n */\nexport interface BuildingSave {\n\tamount: number\n\tbought: number\n\tfree: number\n\ttotalCookies: number\n\tlevel: number\n\tmuted: number\n\tminigameSave: string\n}\n/**\n * The save type for an upgrade\n */\nexport interface UpgradeSave {\n\tunlocked: boolean\n\tbought: boolean\n}\n/**\n * The save type for an achievement\n */\nexport interface AchievementSave {\n\twon: boolean\n}\n/**\n * The save type for Krumblor\n */\ninterface DragonSave {\n\tlevel: number | \"sync\"\n\tauras: [number | \"sync\", number | \"sync\"]\n}\n\nfunction createDefaultSaveFragment(name: \"building\"): BuildingSave\nfunction createDefaultSaveFragment(name: \"upgrade\"): UpgradeSave\nfunction createDefaultSaveFragment(name: \"achievement\"): AchievementSave\nfunction createDefaultSaveFragment(name: \"dragon\"): DragonSave\nfunction createDefaultSaveFragment(name: \"mod\"): ModSave\nfunction createDefaultSaveFragment(name: string): unknown {\n\tswitch (name) {\n\t\tcase \"mod\":\n\t\t\treturn { achievements: {}, buildings: {}, upgrades: {} }\n\t\tcase \"dragon\":\n\t\t\treturn {\n\t\t\t\tlevel: \"sync\",\n\t\t\t\tauras: [\"sync\", \"sync\"],\n\t\t\t}\n\t\tcase \"achievement\":\n\t\t\treturn { won: false }\n\t\tcase \"upgrade\":\n\t\t\treturn {\n\t\t\t\tbought: false,\n\t\t\t\tunlocked: false,\n\t\t\t}\n\t\tcase \"building\":\n\t\t\treturn {\n\t\t\t\tamount: 0,\n\t\t\t\tbought: 0,\n\t\t\t\tfree: 0,\n\t\t\t\ttotalCookies: 0,\n\t\t\t\tlevel: 0,\n\t\t\t\tmuted: 0,\n\t\t\t\tminigameSave: \"\",\n\t\t\t}\n\t\tdefault:\n\t\t\tthrow new Error(\"Invalid fragment name!\")\n\t}\n}\n\nfunction createDefaultSave(): SaveType {\n\treturn {\n\t\tmods: {},\n\t\tforeign: createDefaultSaveFragment(\"mod\"),\n\t\tsaveVer: SAVE_VER,\n\t\tdragon: createDefaultSaveFragment(\"dragon\"),\n\t}\n}\n\nexport let save: SaveType = createDefaultSave()\n\n/**\n * Creates a save for Cppkies\n */\nexport function initSave(): void {\n\tmaster.save = save = createDefaultSave()\n}\n/**\n * Loads the building save data\n * @param building The building to load savedata for\n */\nexport function loadBuilding(building: Building): BuildingSave {\n\t//Use names because ID conflicts\n\treturn (\n\t\tsave.foreign.buildings[building.name] ||\n\t\tcreateDefaultSaveFragment(\"building\")\n\t)\n}\n/**\n * Saves a building\n * @param building The building to save\n */\nexport function saveBuilding({\n\tamount,\n\tbought,\n\tfree,\n\ttotalCookies,\n\tlevel,\n\tmuted,\n\tminigameSave,\n\tname,\n}: Building): void {\n\tsave.foreign.buildings[name] = {\n\t\tamount,\n\t\tbought,\n\t\tfree,\n\t\ttotalCookies,\n\t\tlevel,\n\t\tmuted,\n\t\tminigameSave,\n\t}\n}\n/**\n * Loads an upgrade\n * @param upgrade The upgrade to load\n */\nexport function loadUpgrade(upgrade: Upgrade): UpgradeSave {\n\treturn (\n\t\tsave.foreign.upgrades[upgrade.name] || createDefaultSaveFragment(\"upgrade\")\n\t)\n}\n/**\n * Saves an upgrade\n * @param upgrade The upgrade to save\n */\nexport function saveUpgrade(upgrade: Upgrade): void {\n\tsave.foreign.upgrades[upgrade.name] = {\n\t\tunlocked: !!upgrade.unlocked,\n\t\tbought: !!upgrade.bought,\n\t}\n}\n\n/**\n * Loads an achievement\n * @param upgrade The achievement to load\n */\nexport function loadAchievement(upgrade: Achievement): AchievementSave {\n\treturn (\n\t\tsave.foreign.achievements[upgrade.name] ||\n\t\tcreateDefaultSaveFragment(\"achievement\")\n\t)\n}\n/**\n * Saves an achievement\n * @param upgrade The achievement to save\n */\nexport function saveAchievement(upgrade: Achievement): void {\n\tsave.foreign.achievements[upgrade.name] = {\n\t\twon: !!upgrade.won,\n\t}\n}\nexport function loadDragon(): void {\n\tif (\n\t\tsave.dragon.level !== \"sync\" &&\n\t\tsave.dragon.level <= Game.dragonLevels.length - 1\n\t)\n\t\tGame.dragonLevel = save.dragon.level\n\tif (\n\t\tsave.dragon.auras[0] !== \"sync\" &&\n\t\tsave.dragon.auras[0] <= Object.keys(Game.dragonAuras).length - 1\n\t)\n\t\tGame.dragonAura = save.dragon.auras[0]\n\tif (\n\t\tsave.dragon.auras[1] !== \"sync\" &&\n\t\tsave.dragon.auras[1] <= Object.keys(Game.dragonAuras).length - 1\n\t)\n\t\tGame.dragonAura2 = save.dragon.auras[1]\n}\n\n/**\n * Loads everything\n */\nexport function loadAll(): void {\n\tfor (const building of master.customBuildings)\n\t\tapplyAllProps(building, loadBuilding(building))\n\n\tfor (const upgrade of master.customUpgrades) {\n\t\tapplyAllProps(upgrade, loadUpgrade(upgrade))\n\t\tif (upgrade.bought && Game.CountsAsUpgradeOwned(upgrade.pool))\n\t\t\tGame.UpgradesOwned++\n\t}\n\n\tfor (const achievement of master.customAchievements) {\n\t\tapplyAllProps(achievement, loadAchievement(achievement))\n\t\tif (achievement.won && Game.CountsAsAchievementOwned(achievement.pool))\n\t\t\tGame.AchievementsOwned++\n\t}\n\n\tloadDragon()\n}\n/**\n * Saves everything\n */\nexport function saveAll(): void {\n\tfor (const building of master.customBuildings) saveBuilding(building)\n\tfor (const upgrade of master.customUpgrades) saveUpgrade(upgrade)\n\tfor (const achievement of master.customAchievements)\n\t\tsaveAchievement(achievement)\n\t// Saving the dragon is in `injects/postInject.ts` due to no mod support\n}\n\nexport function applySave(newSave: unknown): SaveType {\n\tconst virtualSave = createDefaultSave()\n\t// Assert type\n\tif (typeof newSave !== \"object\" || newSave === null) return virtualSave\n\t// Assert save version\n\tif (\n\t\t!hasOwnProperty(newSave, \"saveVer\") ||\n\t\ttypeof newSave.saveVer !== \"number\" ||\n\t\tnewSave.saveVer > SAVE_VER\n\t)\n\t\treturn virtualSave\n\n\t// Assert mods\n\tfunction applyModSave(modSave: unknown): ModSave {\n\t\tconst virtualModSave = createDefaultSaveFragment(\"mod\")\n\t\t// Assert type\n\t\tif (typeof modSave !== \"object\" || modSave === null) return virtualModSave\n\t\t// Assert buildings\n\t\tif (\n\t\t\thasOwnProperty(modSave, \"buildings\") &&\n\t\t\ttypeof modSave.buildings === \"object\" &&\n\t\t\tmodSave.buildings !== null\n\t\t)\n\t\t\tfor (const buildingName in modSave.buildings) {\n\t\t\t\tconst building = modSave.buildings[buildingName]\n\t\t\t\tif (typeof building !== \"object\" || building === null) continue\n\t\t\t\tvirtualModSave.buildings[buildingName] = createDefaultSaveFragment(\n\t\t\t\t\t\"building\"\n\t\t\t\t)\n\t\t\t\tfor (const prop in building)\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof virtualModSave.buildings[buildingName][prop] ===\n\t\t\t\t\t\ttypeof building[prop]\n\t\t\t\t\t)\n\t\t\t\t\t\tvirtualModSave.buildings[buildingName][prop] = building[prop]\n\t\t\t}\n\n\t\t// Assert upgrades and achievements\n\t\tif (\n\t\t\thasOwnProperty(modSave, \"upgrades\") &&\n\t\t\ttypeof modSave.upgrades === \"object\" &&\n\t\t\tmodSave.upgrades !== null\n\t\t)\n\t\t\tfor (const upgradeName in modSave.upgrades) {\n\t\t\t\tconst upgrade = modSave.upgrades[upgradeName]\n\t\t\t\tif (typeof upgrade !== \"object\" || upgrade === null) continue\n\t\t\t\tvirtualModSave.upgrades[upgradeName] = createDefaultSaveFragment(\n\t\t\t\t\t\"upgrade\"\n\t\t\t\t)\n\t\t\t\tfor (const prop in virtualModSave.upgrades[upgradeName])\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof virtualModSave.upgrades[upgradeName][prop] ===\n\t\t\t\t\t\ttypeof upgrade[prop]\n\t\t\t\t\t)\n\t\t\t\t\t\tvirtualModSave.upgrades[upgradeName][prop] = upgrade[prop]\n\t\t\t}\n\n\t\tif (\n\t\t\thasOwnProperty(modSave, \"achievements\") &&\n\t\t\ttypeof modSave.achievements === \"object\" &&\n\t\t\tmodSave.achievements !== null\n\t\t)\n\t\t\tfor (const achievementName in modSave.achievements) {\n\t\t\t\tconst achievement = modSave.achievements[achievementName]\n\t\t\t\tif (typeof achievement !== \"object\" || achievement === null) continue\n\t\t\t\tvirtualModSave.achievements[\n\t\t\t\t\tachievementName\n\t\t\t\t] = createDefaultSaveFragment(\"achievement\")\n\t\t\t\tfor (const prop in virtualModSave.achievements[achievementName])\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof virtualModSave.achievements[achievementName][prop] ===\n\t\t\t\t\t\ttypeof achievement[prop]\n\t\t\t\t\t)\n\t\t\t\t\t\tvirtualModSave.achievements[achievementName][prop] =\n\t\t\t\t\t\t\tachievement[prop]\n\t\t\t}\n\n\t\treturn virtualModSave\n\t}\n\n\t// `foreign` check\n\tif (!hasOwnProperty(newSave, \"foreign\"))\n\t\tvirtualSave.foreign = createDefaultSaveFragment(\"mod\")\n\telse virtualSave.foreign = applyModSave(newSave.foreign)\n\t// Dragon\n\tif (\n\t\thasOwnProperty(newSave, \"dragon\") &&\n\t\ttypeof newSave.dragon === \"object\" &&\n\t\tnewSave.dragon !== null\n\t) {\n\t\tif (\n\t\t\thasOwnProperty(newSave.dragon, \"level\") &&\n\t\t\t(typeof newSave.dragon.level === \"number\" ||\n\t\t\t\tnewSave.dragon.level === \"sync\")\n\t\t)\n\t\t\tvirtualSave.dragon.level = newSave.dragon.level\n\t\tif (\n\t\t\thasOwnProperty(newSave.dragon, \"auras\") &&\n\t\t\tnewSave.dragon.auras instanceof Array\n\t\t) {\n\t\t\tfor (const i in newSave.dragon.auras) {\n\t\t\t\tconst aura = newSave.dragon.auras[i]\n\t\t\t\tif (typeof aura === \"number\" || aura === \"sync\")\n\t\t\t\t\tvirtualSave.dragon.auras[i] = aura\n\t\t\t}\n\t\t}\n\t}\n\treturn virtualSave\n}\n\nexport function importSave(data: string): void {\n\tlet newSave: unknown\n\ttry {\n\t\tnewSave = JSON.parse(data)\n\t} catch {\n\t\tif (data !== \"\")\n\t\t\tconsole.warn(\"CPPKIES: Found invalid save, creating new one...\")\n\t\tinitSave()\n\t}\n\tsave = master.save = applySave(newSave)\n\tloadAll()\n}\n\nexport function exportSave(): string {\n\tsaveAll()\n\treturn JSON.stringify(save)\n}\n", "import master from \"./vars\"\nimport { injectCode } from \"./helpers\"\nimport { Injection } from \"./injects/generic\"\nimport { loadBuilding } from \"./saves\"\nimport { resolveAlias } from \"./spritesheets\"\nimport { ReturnableEventEmitter } from \"./lib/eventemitter\"\n\nexport const buildingHooks: Record<string, BuildingHooks> = {}\nexport const customBuildings: Building[] = []\n/**\n * Creates the hooks for a building\n * @param building The building to create hooks for\n */\n\nexport type BuildingHooks = ReturnableEventEmitter<{\n\ttooltip: [string, string]\n\tcps: [number, number]\n\tbuy: [void, void]\n\tlevelUp: [void, void]\n}>\n\nexport function createHooks(building: Building | Game.Object): void {\n\tconst emitter: BuildingHooks = new ReturnableEventEmitter()\n\tconst injections = [\n\t\tnew Injection(\"tooltip\", () => {\n\t\t\tbuilding.tooltip = injectCode(\n\t\t\t\tinjectCode(building.tooltip, \"return\", \"let tempRet = \", \"replace\"),\n\t\t\t\tnull,\n\t\t\t\t`\\n//Cppkies injection\n\t\t\t\treturn Cppkies.buildingHooks[this.name].emit(\"tooltip\", tempRet)`,\n\t\t\t\t\"after\"\n\t\t\t)\n\t\t}),\n\t\tnew Injection(\"buy\", () => {\n\t\t\tbuilding.buy = injectCode(\n\t\t\t\tbuilding.buy,\n\t\t\t\tnull,\n\t\t\t\t`\\n//Cppkies injection\n\t\t\t\tif(success) {\n\t\t\t\t\tCppkies.buildingHooks[this.name].emit(\"buy\")\n\t\t\t\t}`,\n\t\t\t\t\"after\"\n\t\t\t)\n\t\t}),\n\t\tnew Injection(\"levelUp\", () => {\n\t\t\tbuilding.levelUp = injectCode(\n\t\t\t\tbuilding.levelUp,\n\t\t\t\t\"me.level+=1;\",\n\t\t\t\t`\\n// Cppkies injection\nCppkies.buildingHooks[me.name].emit(\"levelUp\")`,\n\t\t\t\t\"after\",\n\t\t\t\t{ me: building }\n\t\t\t)\n\t\t}),\n\t]\n\tinjections.forEach(inject => {\n\t\tinject.func?.()\n\t})\n\tmaster.hooks.on(\"buildingCps\", val => ({\n\t\tbuilding: val.building,\n\t\tcps:\n\t\t\tGame.Objects[val.building] === building\n\t\t\t\t? emitter.emit(\"cps\", val.cps)\n\t\t\t\t: val.cps,\n\t}))\n\tbuildingHooks[building.name] = emitter\n}\n\n/**\n * Automatically finds buildings without hooks and creates them\n */\nexport function hookAllBuildings(): void {\n\tfor (const building of Game.ObjectsById)\n\t\tif (!buildingHooks[building.name]) createHooks(building)\n}\n\n/**\n * The building class for creating new buildings\n */\nexport class Building extends Game.Object {\n\ticonLink: string\n\tbuildingLink: string\n\t/**\n\t * Creates a new building and creates the hooks for it\n\t * @param name The name of the building\n\t * @param commonName Various additional string for the building, split by |:  The name of the building, then in plural, how the building produced the cookies, the effect from sugar lumps, then in plural\n\t * @param desc The description of the building\n\t * @param icon The icon for the building (Only the column matters) (See http://cppkies.js.org/#/./CommonProblems?id=relink-column for instructions about the icons)\n\t * @param bigIcon The icon that shows up in store (Only the row matters) (See http://cppkies.js.org/#/./CommonProblems?id=big-icons for instructions about the big icons)\n\t * @param art The art for the building\n\t * @param cpsFunc The function to calculate CPS\n\t * @param buyFunction The function which gets called when it's bought\n\t * @param foolObject The fool building to display during business day\n\t * @param buildingSpecial The building special and building debuff\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tcommonName: string,\n\t\tdesc: string,\n\t\ticon: Game.Icon,\n\t\tbigIcon: Game.Icon,\n\t\tart: Game.Art,\n\t\tcpsFunc: (me: Building) => number,\n\t\tbuyFunction: () => void,\n\t\tfoolObject: Game.FoolBuilding,\n\t\tbuildingSpecial: [string, string]\n\t) {\n\t\tif (Game.Objects[name])\n\t\t\tthrow new Error(\n\t\t\t\t`Can't create building, \"${name}\" is already used as a building name`\n\t\t\t)\n\t\t//Warn about enforced orders\n\t\tif (icon[1] !== 0) {\n\t\t\tconsole.warn(\n\t\t\t\t\"All icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=relink-column\"\n\t\t\t)\n\t\t}\n\t\tif (bigIcon[0] !== 0) {\n\t\t\tconsole.warn(\n\t\t\t\t\"All big icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=big-icons\"\n\t\t\t)\n\t\t}\n\t\tsuper(\n\t\t\tname,\n\t\t\tcommonName,\n\t\t\tdesc,\n\t\t\tbigIcon[1],\n\t\t\ticon[0],\n\t\t\tart,\n\t\t\t0, // The game automatically calculates Price and BaseCps\n\t\t\tcpsFunc,\n\t\t\tbuyFunction\n\t\t)\n\t\tcustomBuildings.push(this)\n\t\t// Create hooks if they don't exist yet\n\t\tif (!buildingHooks[name]) createHooks(this)\n\t\t//Manually relink canvases and contexts because Orteil made it so new buildings break the old canvas and context links\n\t\tfor (const i in Game.ObjectsById) {\n\t\t\tif (parseInt(i) <= 0) continue\n\t\t\tconst me = Game.ObjectsById[i]\n\t\t\tme.canvas = l(`rowCanvas${i}`) as HTMLCanvasElement\n\t\t\tif (!me.canvas) continue\n\t\t\t// Why does getContext return null possibly???\n\t\t\tme.ctx = me.canvas.getContext(\"2d\") as CanvasRenderingContext2D\n\t\t\t//Relink their events too\n\t\t\tme.canvas.addEventListener(\"mouseover\", () => {\n\t\t\t\tme.mouseOn = true\n\t\t\t})\n\t\t\tme.canvas.addEventListener(\"mouseout\", () => {\n\t\t\t\tme.mouseOn = false\n\t\t\t})\n\t\t\tme.canvas.addEventListener(\"mousemove\", e => {\n\t\t\t\tconst box = me.canvas.getBoundingClientRect()\n\t\t\t\tme.mousePos[0] = e.pageX - box.left\n\t\t\t\tme.mousePos[1] = e.pageY - box.top\n\t\t\t})\n\t\t\t//Restore minigames\n\t\t\tif (me.minigame && me.minigameLoaded) {\n\t\t\t\tconst save = me.minigame.save()\n\t\t\t\tme.minigame.launch()\n\t\t\t\tme.minigame.load(save)\n\t\t\t}\n\t\t}\n\t\tthis.buildingLink = bigIcon[2] ?? master.buildingLink\n\t\tthis.iconLink = resolveAlias(icon[2] ?? master.iconLink)\n\t\t// This is the name, description, and icon used during Business Season\n\t\tif (foolObject) Game.foolObjects[name] = foolObject\n\t\t// The name of this building's golden cookie buff and debuff\n\t\tif (buildingSpecial) Game.goldenCookieBuildingBuffs[name] = buildingSpecial\n\n\t\tif (this.iconLink) {\n\t\t\tbuildingHooks[this.name].on(\"tooltip\", ret =>\n\t\t\t\tthis.locked\n\t\t\t\t\t? ret\n\t\t\t\t\t: ret.replace(\n\t\t\t\t\t\t\t\"background-position\",\n\t\t\t\t\t\t\t`background-image:url(${this.iconLink});background-position`\n\t\t\t\t\t  )\n\t\t\t)\n\t\t}\n\n\t\tGame.BuildStore()\n\t\tif (this.buildingLink) {\n\t\t\tmaster.hooks.on(\"buildStore\", () => {\n\t\t\t\tl(\n\t\t\t\t\t`productIcon${this.id}`\n\t\t\t\t).style.backgroundImage = `url(${this.buildingLink})`\n\t\t\t\tl(\n\t\t\t\t\t`productIconOff${this.id}`\n\t\t\t\t).style.backgroundImage = `url(${this.buildingLink})`\n\t\t\t})\n\t\t}\n\t\tGame.BuildStore()\n\t\tthis.canvas = l(`rowCanvas${this.id}`) as HTMLCanvasElement\n\t\t// Why does getContext return null possibly???\n\t\tthis.ctx = this.canvas.getContext(\"2d\") as CanvasRenderingContext2D\n\t\t//this.context = this.ctx\n\t\tthis.pics = []\n\t\tconst muteDiv = document.createElement(\"div\")\n\t\tmuteDiv.className = \"tinyProductIcon\"\n\t\tmuteDiv.id = `mutedProduct${this.id}`\n\t\tmuteDiv.style.display = \"none\"\n\t\tif (this.buildingLink)\n\t\t\tmuteDiv.style.backgroundImage = `url(${this.buildingLink})`\n\t\tmuteDiv.style.backgroundPositionX = `-${icon[0]}px`\n\t\tmuteDiv.style.backgroundPositionY = `-${icon[1]}px`\n\t\tmuteDiv.addEventListener(\"click\", () => {\n\t\t\tthis.mute(0)\n\t\t\twindow.PlaySound(this.muted ? \"snd/clickOff.mp3\" : \"snd/clickOn.mp3\")\n\t\t})\n\n\t\twindow.AddEvent(this.canvas, \"mouseover\", () => {\n\t\t\tthis.mouseOn = true\n\t\t})\n\t\twindow.AddEvent(this.canvas, \"mouseout\", () => {\n\t\t\tthis.mouseOn = false\n\t\t})\n\t\tthis.canvas.addEventListener(\"mousemove\", e => {\n\t\t\tconst box = this.canvas.getBoundingClientRect()\n\t\t\tthis.mousePos[0] = e.pageX - box.left\n\t\t\tthis.mousePos[1] = e.pageY - box.top\n\t\t})\n\t\tl(\"buildingsMute\").appendChild(muteDiv)\n\t\t// Load the save stuff\n\t\tconst loadProps = loadBuilding(this)\n\t\tfor (const i in loadProps) this[i] = loadProps[i]\n\t\tGame.recalculateGains = 1\n\t}\n}\n/**\n * The recommended function to pass in building CpsFunc\n * @param me Itself\n */\nexport const defaultCps = (me: Building): number =>\n\tGame.GetTieredCpsMult(me) * Game.magicCpS(me.name) * me.baseCps\n/**\n * The reccomended function to pass in building BuyFunc\n */\nexport const defaultOnBuy = function(): void {\n\tGame.UnlockTiered(this)\n\tif (\n\t\tthis.amount >= Game.SpecialGrandmaUnlock &&\n\t\tGame.Objects[\"Grandma\"].amount > 0 &&\n\t\tthis.grandma\n\t)\n\t\tGame.Unlock(this.grandma.name)\n}\n", "import { DragonAura, DragonLevel } from \"../dragon\"\nimport { hasOwnProperty } from \"../helpers\"\nimport { save, VANILLA_DRAGON_LEVEL_AMOUNT } from \"../saves\"\nimport master from \"../vars\"\n\nexport default function postInject(): void {\n\tmaster.on(\"getIcon\", ({ icon, type, tier }) => {\n\t\tmaster.customTiers.forEach(val => {\n\t\t\tif (val.keyName === tier.toString() && val.iconLink)\n\t\t\t\ticon[2] = val.iconLink\n\t\t})\n\t\treturn { icon, type, tier }\n\t})\n\tmaster.on(\"getIcon\", ({ icon, type, tier }) => {\n\t\tmaster.customBuildings.forEach(val => {\n\t\t\tif (val.name === type && val.iconLink) icon[2] = val.iconLink\n\t\t})\n\t\treturn { icon, tier, type }\n\t})\n\tmaster.on(\"getIcon\", ({ icon, type, tier }) => {\n\t\tif (\n\t\t\t(icon[2] === undefined || icon[2] === null) &&\n\t\t\t!hasOwnProperty(Game.Tiers[tier.toString()], \"iconLink\")\n\t\t)\n\t\t\ticon[2] = \"\"\n\t\treturn { icon, tier, type }\n\t})\n\t/**\n\t * **Auras**\n\t * Three levels of being loaded:\n\t * 1. Not loaded\n\t * The user can't manipulate Cppkies dragon data, has no aura if aura is custom\n\t * 2. Cppkies loaded (here)\n\t * When loaded with custom aura:\n\t * a. If normal aura is none (has not been modified), keep it at that, but  keep  the custom aura data on save\n\t * b. If normal aura is not none (has been modified), keep it at that, but remove the custom aura data on save\n\t * 3. Aura loaded\n\t * On aura creation, if aura id exists now, set the normal aura to the custom aura\n\t */\n\tmaster.on(\"preSave\", () => {\n\t\tif (Game.dragonAura !== 0) save.dragon.auras[0] = \"sync\"\n\t\tif (Game.dragonAura2 !== 0) save.dragon.auras[1] = \"sync\"\n\n\t\tif (Game.dragonAuras[Game.dragonAura] instanceof DragonAura) {\n\t\t\tsave.dragon.auras[0] = Game.dragonAura\n\t\t\tGame.dragonAura = 0\n\t\t}\n\t\tif (Game.dragonAuras[Game.dragonAura2] instanceof DragonAura) {\n\t\t\tsave.dragon.auras[1] = Game.dragonAura2\n\t\t\tGame.dragonAura2 = 0\n\t\t}\n\t\tif (\n\t\t\tGame.dragonLevels[Game.dragonLevel] instanceof DragonLevel ||\n\t\t\tGame.dragonLevel >= VANILLA_DRAGON_LEVEL_AMOUNT\n\t\t) {\n\t\t\tsave.dragon.level = Game.dragonLevel\n\t\t\twhile (\n\t\t\t\tGame.dragonLevels[Game.dragonLevel] instanceof DragonLevel ||\n\t\t\t\tGame.dragonLevel >= VANILLA_DRAGON_LEVEL_AMOUNT\n\t\t\t)\n\t\t\t\tGame.dragonLevel--\n\t\t} // else save.dragon.level = \"sync\"\n\t})\n\tmaster.on(\"postSave\", () => {\n\t\tif (\n\t\t\tsave.dragon.auras[0] !== \"sync\" &&\n\t\t\tGame.dragonAuras[save.dragon.auras[0]]\n\t\t)\n\t\t\tGame.dragonAura = save.dragon.auras[0]\n\t\tif (\n\t\t\tsave.dragon.auras[1] !== \"sync\" &&\n\t\t\tGame.dragonAuras[save.dragon.auras[1]]\n\t\t)\n\t\t\tGame.dragonAura2 = save.dragon.auras[1]\n\t\tif (save.dragon.level !== \"sync\" && Game.dragonLevels[save.dragon.level])\n\t\t\tGame.dragonLevel = save.dragon.level\n\t})\n\n\tmaster.on(\"reset\", () => {\n\t\tsave.dragon.auras = [\"sync\", \"sync\"]\n\t\tsave.dragon.level = \"sync\"\n\t})\n\n\tmaster.on(\"specialPic\", pic => {\n\t\tconst level = Game.dragonLevels[Game.dragonLevel]\n\t\tif (pic.tab === \"dragon\" && level instanceof DragonLevel)\n\t\t\tpic.pic = level.picLink ?? pic.pic\n\n\t\treturn pic\n\t})\n}\n", "import { main } from \"./injects/basegame\"\n\nimport master from \"./vars\"\nimport { exportSave, importSave } from \"./saves\"\nimport { prod } from \"../isprod.json\"\nimport postInject from \"./injects/postInject\"\nimport { hookAllBuildings } from \"./buildings\"\nimport { InjectParams } from \"./helpers\"\n\nlet CppkiesExport: typeof master\n\ndeclare global {\n\tinterface Window {\n\t\tCppkies: typeof master | undefined\n\t\tCPPKIES_ONLOAD: (() => void)[] | undefined\n\t}\n}\n\n//Check if Cppkies is already created\nif (window.Cppkies) {\n\t//If so, just reexport it\n\tCppkiesExport = window.Cppkies\n} else {\n\tCppkiesExport = master\n\t//Force manual addition since in-module injects b r e a k\n\twindow.Cppkies = CppkiesExport\n\t//Inject maingame and create hooks\n\tmain().then(answer => {\n\t\tCppkiesExport.hooks = answer\n\t\tCppkiesExport.on = answer.on.bind(answer)\n\t\tGame.Notify(\"Cppkies loaded!\", \"\", [32, prod ? 17 : 21], 1.5)\n\n\t\tconst cppkiesNote = document.createElement(\"div\")\n\t\tcppkiesNote.textContent = \"Cppkies!\"\n\t\t;(document.querySelector(\"#topBar\") as HTMLElement).insertBefore(\n\t\t\tcppkiesNote,\n\t\t\t(document.querySelector(\"#topBar\") as HTMLElement).children[1]\n\t\t)\n\n\t\tif (!Game.modSaveData[\"cppkies\"]) Game.modSaveData[\"cppkies\"] = \"{}\"\n\t\tGame.registerMod(\"cppkies\", {\n\t\t\tsave: exportSave,\n\t\t\tload: importSave,\n\t\t})\n\t\tGame.Win(\"Third-party\")\n\t\thookAllBuildings()\n\t\t//Run all onLoad events\n\t\tmaster.onLoad.forEach(val => val())\n\t\t//Force all new onLoad events to run\n\t\tmaster.onLoad = new Proxy(master.onLoad, {\n\t\t\tset: (_target, key, value): boolean => {\n\t\t\t\tif (key !== \"length\") value()\n\t\t\t\treturn true\n\t\t\t},\n\t\t})\n\t\t//Do the same for CPPKIES_ONLOAD\n\t\tif (!window.CPPKIES_ONLOAD) window.CPPKIES_ONLOAD = []\n\t\t//Run all onLoad events\n\t\twindow.CPPKIES_ONLOAD.forEach(val => val())\n\t\t//Force all new onLoad events to run\n\t\twindow.CPPKIES_ONLOAD = new Proxy(master.onLoad, {\n\t\t\tset: (_target, key, value): boolean => {\n\t\t\t\tif (key !== \"length\") value()\n\t\t\t\treturn true\n\t\t\t},\n\t\t})\n\t\tpostInject()\n\t})\n}\nexport default CppkiesExport\nexport { InjectParams } from \"./helpers\"\n", "type EventListenerFunction<\n\tT extends Record<string, [unknown, unknown]>,\n\tN extends keyof T\n> = (src: T[N][0]) => T[N][1]\n\ntype EventList<T extends Record<string, [unknown, unknown]>> = {\n\t[P in keyof T]: EventListenerFunction<T, P>[]\n}\n\n/**\n * A small implementation of node's EventEmitter with return value support\n */\n\nexport class ReturnableEventEmitter<\n\tT extends Record<string, [unknown, unknown]>\n> {\n\t_events = {} as EventList<T>\n\n\t/**\n\t * Registers an event listener which is called each time the event is emitted\n\t * @param name Name of the hook\n\t * @param func The event listener function\n\t */\n\ton<N extends keyof T>(name: N, func: EventListenerFunction<T, N>): void {\n\t\tif (!this._events[name]) {\n\t\t\tthis._events[name] = [func]\n\t\t} else this._events[name].push(func)\n\t}\n\t/**\n\t * Registers an event listener which is called for the first time the event is emitted\n\t * @param name Name of the hook\n\t * @param func The event listener function\n\t */\n\tonce<N extends keyof T>(name: N, func: EventListenerFunction<T, N>): void {\n\t\tthis.on(name, arg => {\n\t\t\tthis.off(name, func)\n\t\t\treturn func(arg)\n\t\t})\n\t}\n\t/**\n\t * Removes an event listener which was registered before\n\t * @param name Name of the hook\n\t * @param func The event listener function\n\t */\n\toff<N extends keyof T>(name: N, func: EventListenerFunction<T, N>): void {\n\t\tthis._events[name].splice(this._events[name].indexOf(func), 1)\n\t}\n\n\t// Sorry for the minor type mess, I blame typescript\n\t/**\n\t * Emits the event, triggering all registered event listeners under the event name and modifying the given value\n\t * @param name The name of the event\n\t * @param startingValue The starting value for the listeners\n\t */\n\temit<N extends keyof T>(\n\t\tname: N,\n\t\t...startingValue: T[N][0] extends void ? [undefined?] : [T[N][0]]\n\t): T[N][1] {\n\t\tlet retVal: T[N][0] | T[N][1] = startingValue[0]\n\t\tif (!this._events[name]) this._events[name] = []\n\t\tfor (const func of this._events[name]) retVal = func(retVal)\n\t\treturn retVal\n\t}\n\t/**\n\t * Emits the event, triggering all registered event listeners under the event name and *not* modifying the given value\n\t * @param name The name of the event\n\t * @param startingValue The starting value for the listeners\n\t */\n\tconstEmit<N extends keyof T>(\n\t\tname: N,\n\t\t...startingValue: T[N][0] extends void ? [undefined?] : [T[N][0]]\n\t): void {\n\t\tif (!this._events[name]) this._events[name] = []\n\t\tfor (const func of this._events[name]) func(startingValue[0])\n\t}\n}\n", "export class Injection {\n\tconstructor(public value: string, public func?: () => void) {}\n}\n", "import { resolveAlias } from \"./spritesheets\"\nimport master from \"./vars\"\n\nexport const customTiers: Tier[] = []\n\nexport default class Tier implements Game.Tier {\n\tachievUnlock: number\n\ticonRow: number\n\ticonLink?: string\n\n\t/**\n\t\tIndicates if the tier shouldn't be accounted for tiered upgrades\n\t*/\n\tspecial: boolean\n\treq?: string\n\tupgrades: Game.GenericTieredUpgrade[]\n\n\tunlock: number\n\tprice: number\n\tkeyName: string\n\n\t/**\n\t * Adds a new tier to the game for upgrades and achievements\n\t * @param name The name of the new tier\n\t * @param sampleIcon A sample of an icon using the tier\n\t * @param color The color of the tier\n\t * @param price The base price of tiered upgrades\n\t * @param special Indicates if the tier shouldn't be accounted for tiered upgrades\n\t * @param unlock How many buildings are needed for the upgrade\n\t * @param achievUnlock How many buildings are needed for the achievement\n\t * @param req Which upgrade is required to unlock the upgrades\n\t * @param keyName Optional, the key for tiers, used in everything\n\t */\n\tconstructor(\n\t\tpublic name: string,\n\t\tsampleIcon: Game.Icon,\n\t\tpublic color: string,\n\t\tspecial = false,\n\t\tprice: number | \"auto\" = \"auto\",\n\t\tunlock: number | \"auto\" | null = null,\n\t\tachievUnlock: number | \"auto\" | null = null,\n\t\treq: string | null = null,\n\t\tkeyName: string | \"auto\" = \"auto\"\n\t) {\n\t\tthis.special = special\n\n\t\tif (keyName === \"auto\")\n\t\t\tif (!special)\n\t\t\t\tthis.keyName = (\n\t\t\t\t\tObject.keys(Game.Tiers).filter(val => !isNaN(parseInt(val))).length +\n\t\t\t\t\t1\n\t\t\t\t).toString()\n\t\t\telse this.keyName = name\n\t\telse this.keyName = keyName\n\n\t\tif (unlock === null) this.unlock = -1\n\t\tif (typeof unlock === \"number\") this.unlock = unlock\n\t\tif ((special === false && unlock === null) || unlock === \"auto\")\n\t\t\tthis.unlock = Game.Tiers[parseInt(this.keyName) - 1].unlock + 50\n\n\t\tif (typeof achievUnlock === \"number\") this.achievUnlock = achievUnlock\n\t\tif ((special === false && achievUnlock === null) || achievUnlock === \"auto\")\n\t\t\tthis.achievUnlock =\n\t\t\t\tGame.Tiers[parseInt(this.keyName) - 1].achievUnlock + 50\n\t\tif (req) this.req = req\n\t\tif (price === \"auto\")\n\t\t\tthis.price =\n\t\t\t\tGame.Tiers[\n\t\t\t\t\tObject.keys(Game.Tiers)\n\t\t\t\t\t\t.filter(val => !isNaN(parseInt(val)))\n\t\t\t\t\t\t.length.toString()\n\t\t\t\t].price * 1e8\n\t\telse this.price = price\n\t\t/*\n\t\t\tAnalyze sample icon\n\t\t*/\n\t\tthis.iconRow = sampleIcon[1]\n\t\tthis.iconLink = resolveAlias(sampleIcon[2] ?? master.iconLink)\n\t\tGame.Tiers[this.keyName] = this\n\t\tcustomTiers.push(this)\n\t}\n}\n", "import { Building } from \"./buildings\"\nimport { save } from \"./saves\"\nimport { resolveIcon } from \"./spritesheets\"\n\nexport class DragonAura implements Game.DragonAura {\n\tpic: Game.Icon\n\t/**\n\t * Creates a (non-building) dragon aura\n\t * @param name Name of the dragon aura (in HTML text)\n\t * @param desc Description of it (in HTML text)\n\t * @param icon The icon of it\n\t */\n\tconstructor(name: string, desc: string, icon: Game.Icon)\n\t/**\n\t * Creates a (building) dragon aura\n\t * @param name Name of the dragon aura (in HTML text)\n\t * @param desc Description of it (in HTML text)\n\t * @param building The building (name or object) to link the aura to\n\t */\n\tconstructor(name: string, desc: string, building: string | Game.Object)\n\tconstructor(\n\t\tpublic name: string,\n\t\tpublic desc: string,\n\t\tbuildingOrIcon: string | Game.Object | Game.Icon\n\t) {\n\t\tif (typeof buildingOrIcon === \"string\")\n\t\t\tbuildingOrIcon = Game.Objects[buildingOrIcon]\n\t\tif (buildingOrIcon instanceof Game.Object)\n\t\t\tthis.pic = resolveIcon([\n\t\t\t\tbuildingOrIcon.iconColumn,\n\t\t\t\t25,\n\t\t\t\tbuildingOrIcon instanceof Building\n\t\t\t\t\t? buildingOrIcon.iconLink\n\t\t\t\t\t: undefined,\n\t\t\t])\n\t\telse this.pic = buildingOrIcon\n\t\tGame.dragonAuras[Object.keys(Game.dragonAuras).length] = this\n\t\tif (\n\t\t\tsave.dragon.auras[0] !== \"sync\" &&\n\t\t\tObject.keys(Game.dragonAuras).length >= save.dragon.auras[0]\n\t\t)\n\t\t\tGame.dragonAura = save.dragon.auras[0]\n\t\tif (\n\t\t\tsave.dragon.auras[1] !== \"sync\" &&\n\t\t\tObject.keys(Game.dragonAuras).length >= save.dragon.auras[1]\n\t\t)\n\t\t\tGame.dragonAura2 = save.dragon.auras[1]\n\t}\n}\n\nexport class DragonLevel implements Game.DragonLevel {\n\t/**\n\t * The X position of the dragon icon\n\t */\n\tpic: number\n\t/**\n\t * The Y position of the dragon icon\n\t */\n\tpicY = 0\n\t/**\n\t * The link to the dragon icon\n\t */\n\tpicLink?: string\n\t// Dragon name\n\tname: string\n\t// Description of the cost\n\tcostStr: () => string\n\t// Determines if the level can be upgraded\n\tcost: () => boolean\n\n\t// Description of effects of leveling up\n\taction: string\n\t/**\n\t * Creates a new dragon level\n\t * @param name Name of the dragon at this level, null for last name\n\t * @param desc A string describing the effects of leveling up\n\t * @param costDescription A string (or a function) describing the resources required to be able to buy the level\n\t * @param canBuy A function which determines if it is possible to buy the level\n\t * @param buy A function which spends the required resources\n\t * @param icon  Icon of the dragon at this level, null for last icon, note that the icon is 96x96, not 48x48\n\t */\n\tconstructor(\n\t\tname: string | null,\n\t\tdesc: string, // `this.action`\n\t\tcostDescription: string | (() => string), // `this.costStr`\n\t\tcanBuy: () => boolean, // `this.cost`\n\t\tpublic buy: () => void,\n\t\ticon?: Game.Icon | null, // `this.pic`, `this.picLink`, and `this.picY`\n\t\torder: number = Game.dragonLevels.length - 3\n\t) {\n\t\tconst lastLevel = Game.dragonLevels[order - 1]\n\t\tthis.name = name ?? lastLevel.name\n\t\tthis.action = desc\n\t\tthis.costStr =\n\t\t\ttypeof costDescription === \"string\"\n\t\t\t\t? () => costDescription\n\t\t\t\t: costDescription\n\t\tthis.cost = canBuy\n\t\tif (icon) {\n\t\t\tthis.pic = icon[0]\n\t\t\tthis.picY = icon[1]\n\t\t\t// TODO: Implement pic Y in specials\n\t\t\tif (this.picY !== 0)\n\t\t\t\tconsole.warn(\"For now, all dragon levels must not use pic Y, sorry.\")\n\t\t\tthis.picLink = icon[2]\n\t\t} else {\n\t\t\tthis.pic = lastLevel.pic\n\t\t\tif (lastLevel instanceof DragonLevel) {\n\t\t\t\tthis.picY = lastLevel.picY\n\t\t\t\tthis.picLink = lastLevel.picLink\n\t\t\t}\n\t\t}\n\t\tGame.dragonLevels.splice(order, 0, this)\n\t\tif (\n\t\t\tsave.dragon.level !== \"sync\" &&\n\t\t\tGame.dragonLevels.length >= save.dragon.level\n\t\t)\n\t\t\tGame.dragonLevel = save.dragon.level\n\t}\n}\n\nexport class DragonAuraLevel extends DragonLevel {\n\t/**\n\t * Creates a level which unlocks an aura\n\t * @param auraName Name of the aura\n\t * @param auraDesc Short description of the aura, in html text\n\t * @param building The building which the aura is tied to\n\t */\n\tconstructor(\n\t\tauraName: string,\n\t\tauraDesc: string,\n\t\tbuilding: string | Game.Object\n\t) {\n\t\tif (typeof building === \"string\") building = Game.Objects[building]\n\n\t\tsuper(\n\t\t\tnull,\n\t\t\t`Train ${auraName}<br/><small>Aura : ${auraDesc}</small>`,\n\t\t\t`100 ${building.plural}`,\n\t\t\t// Grr typescript\n\t\t\t() => (building as Game.Object).amount >= 100,\n\t\t\t() =>\n\t\t\t\t(building as Game.Object & {\n\t\t\t\t\tsacrifice: (amount: number) => void // I made a typo, sorry\n\t\t\t\t}).sacrifice(100)\n\t\t)\n\t}\n}\n", "import { toRomanNumeral } from \"./helpers\"\nimport { resolveIcon } from \"./spritesheets\"\n\ntype MilkClass = typeof Game.Milk & Game.ChoiceCosmetics\n\nexport class Milk implements MilkClass {\n\ticon: [number, number]\n\ticonLink?: string\n\t/**\n\t * Creates a new milk type\n\t * @param name The name of the milk\n\t * @param icon The icon of the mink\n\t * @param pic The image to use for the milk itself, must end in .png\n\t * @param special If true, the milk is only avaliable via milk selector\n\t */\n\tconstructor(\n\t\tpublic name: string,\n\t\ticon: Game.Icon,\n\t\tpublic pic: string,\n\t\tpublic special = false\n\t) {\n\t\tif (!pic.endsWith(\".png\"))\n\t\t\tthrow new Error(\n\t\t\t\t`Can't create milk with the milk URL \"${pic}\", the URL must end with .png!`\n\t\t\t)\n\t\tif (!special)\n\t\t\tthis.name = `Rank ${toRomanNumeral(Game.Milks.length + 1)} - ${name}`\n\t\tthis.pic = pic.substr(0, pic.length - 4)\n\t\tresolveIcon(icon)\n\t\tthis.icon = [icon[0], icon[1]]\n\t\tthis.iconLink = icon[2]\n\t\t// TODO: Special milks\n\t\tif (special)\n\t\t\tGame.MilksByChoice[Object.keys(Game.MilksByChoice).length] = this\n\t\telse Game.Milks.push(this)\n\t}\n}\n", "import { save } from \"./saves\"\nimport {\n\tBuilding,\n\tdefaultOnBuy,\n\tdefaultCps,\n\tcustomBuildings,\n\tbuildingHooks,\n} from \"./buildings\"\nimport {\n\tUpgrade,\n\tTieredUpgrade,\n\tHeavenlyUpgrade,\n\tGrandmaSynergy,\n\tSynergyUpgrade,\n\tcustomUpgrades,\n\tKittenUpgrade,\n} from \"./upgrade\"\nimport Tier, { customTiers } from \"./tiers\"\nimport { injectCode, injectCodes } from \"./helpers\"\nimport {\n\tpatchIconsheet,\n\trelinkColumn,\n\trelinkRow,\n\textraColumnIcons,\n\textraRowIcons,\n\talias,\n\taliases,\n} from \"./spritesheets\"\nimport { Hooks } from \"./injects/basegame\"\nimport { hookAllBuildings } from \"./buildings\"\nimport { CursorUpgrade, MouseUpgrade, CookieUpgrade } from \"./upgrade\"\nimport { MouseAchievement } from \"./achievement\"\nimport { DragonAura, DragonLevel, DragonAuraLevel } from \"./dragon\"\nimport { Milk } from \"./milk\"\nimport {\n\tTieredAchievement,\n\tProductionAchievement,\n\tLevel10Achievement,\n} from \"./achievement\"\n\nimport {\n\tAchievement,\n\tCpsAchievement,\n\tBankAchievement,\n\tcustomAchievements,\n} from \"./achievement\"\n\n/**\n * The main object which is exported by Cppkies\n */\nconst master = {\n\thooks: (null as unknown) as Hooks,\n\ton: (null as unknown) as Hooks[\"on\"],\n\t/**\n\t * The multiplier of milk which is not accessible in game by default\n\t */\n\thiddenMilkMult: 1,\n\ticonLink: \"\",\n\tbuildingLink: \"\",\n\tcookieOrder: 10020,\n\tbuildingHooks,\n\tbuildingHooksById: [],\n\thookAllBuildings,\n\tcustomBuildings,\n\tcustomUpgrades,\n\tcustomTiers,\n\tsave,\n\tonLoad: [] as (() => void)[],\n\tBuilding,\n\tUpgrade,\n\tTieredUpgrade,\n\tTier,\n\tHeavenlyUpgrade,\n\tGrandmaSynergy,\n\tSynergyUpgrade,\n\tCursorUpgrade,\n\tKittenUpgrade,\n\tMouseUpgrade,\n\tCookieUpgrade,\n\tAchievement,\n\tCpsAchievement,\n\tBankAchievement,\n\tTieredAchievement,\n\tProductionAchievement,\n\tLevel10Achievement,\n\tMouseAchievement,\n\tcustomAchievements,\n\tDragonAura,\n\tDragonLevel,\n\tDragonAuraLevel,\n\tMilk,\n\tinjectCode,\n\tinjectCodes,\n\tDEFAULT_ONBUY: defaultOnBuy,\n\tDEFAULT_CPS: defaultCps,\n\ticons: {\n\t\trelinkColumn,\n\t\trelinkRow,\n\t\tpatchIconsheet,\n\t\textraColumnIcons,\n\t\textraRowIcons,\n\t\talias,\n\t\taliases,\n\t},\n}\n\nexport default master\n", "import { injectCode, injectCodes } from \"../helpers\"\nimport { ReturnableEventEmitter } from \"../lib/eventemitter\"\nimport { Injection } from \"./generic\"\n\nexport type Hooks = ReturnableEventEmitter<{\n\t//! Custom menus\n\t/**\n\t * Allows you to add entries to all menus\n\t */\n\tmenu: [void, void]\n\t/**\n\t * Allows you to add entries to the options menu\n\t */\n\toptionsMenu: [void, void]\n\t/**\n\t * Allows you to add entries to the stats menu\n\t */\n\tstatsMenu: [void, void]\n\t/**\n\t * Allows you to add entries to the info menu\n\t */\n\tinfoMenu: [void, void]\n\n\t//! Data manipulation\n\n\t/**\n\t * Allows you to execute a function on before saving, useful for cleaning up data which will be invalid if no mod is present\n\t */\n\tpreSave: [void, void]\n\n\tpostSave: [void, void]\n\t/**\n\t * Allows you to execute a function on data load, useful for custom data resetting\n\t * @param hard whether or not this is a hard reset\n\t */\n\treset: [boolean, void]\n\n\treincarnate: [void, void]\n\t//! Tiers\n\n\tgetIcon: [\n\t\t{\n\t\t\ttype: string\n\t\t\ttier: string | number\n\t\t\ticon: Game.Icon\n\t\t},\n\t\t{\n\t\t\ttype: string\n\t\t\ttier: string | number\n\t\t\ticon: Game.Icon\n\t\t}\n\t]\n\n\t//! Buildings\n\t/**\n\t * Called after BuildStore, used internally\n\t */\n\tbuildStore: [void, void]\n\t/**\n\t * Adds grandma options for the grandma art\n\t */\n\tgrandmaPic: [string[], string[]]\n\t//! Gameplay\n\trawCps: [number, number]\n\trawCpsMult: [number, number]\n\tcps: [number, number]\n\tcpsMult: [number, number]\n\t/**\n\t * The multiplier of cursor finger bonus\n\t */\n\tcursorFingerMult: [number, number]\n\t/**\n\t * Cookies per click\n\t */\n\tcpc: [number, number]\n\tcpcAdd: [number, number]\n\t//! Vanilla hooks\n\tlogic: [void, void]\n\tdraw: [void, void]\n\tcheck: [void, void]\n\tticker: [string[], string[]]\n\t// !!!INTERNAL DO NOT USE!!! Use buildingHooks' \"cps\" instead\n\tbuildingCps: [\n\t\t{ building: string; cps: number },\n\t\t{ building: string; cps: number }\n\t]\n\t//! Special objects hooks\n\tspecialPic: [\n\t\t{ tab: string; pic: string; frame: number },\n\t\t{ tab: string; pic: string; frame: number }\n\t]\n}>\n/**\n * Creates the function hooks for base game\n * @returns A promise\n */\nexport function main(): Promise<Hooks> {\n\treturn new Promise(resolve => {\n\t\tconst emitter: Hooks = new ReturnableEventEmitter()\n\t\tconst injections: Array<Injection> = [\n\t\t\t//// -- Custom menus -- ////\n\t\t\t/*\n\t\t\tHooks that allow you to add new stuff do the menu \n\n\t\t\t\"optionsMenu\"\n\t\t\tAllows you to add entries to the options menu\n\n\t\t\t\"statsMenu\"\n\t\t\tAllows you to add entries to the stats menu\n\n\t\t\t\"logMenu\"\n\t\t\tAllows you to add entries to the info menu\n\n\t\t\t\"menu\"\n\t\t\tAllows you to add entries to all menus\n\t\t\t*/\n\t\t\tnew Injection(\"customMenu\", () => {\n\t\t\t\tGame.UpdateMenu = injectCode(\n\t\t\t\t\tGame.UpdateMenu,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tswitch (Game.onMenu) {\n\t\t\t\t\t\tcase \"prefs\":\n\t\t\t\t\t\t\tCppkies.hooks.emit(\"optionsMenu\")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"stats\":\n\t\t\t\t\t\t\tCppkies.hooks.emit(\"statsMenu\")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\t\tCppkies.hooks.emit(\"logMenu\")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tCppkies.hooks.emit(\"menu\")\n\t\t\t\t\t`,\n\t\t\t\t\t\"after\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Data manipulation -- ////\n\n\t\t\tnew Injection(\"preSave\", () => {\n\t\t\t\tGame.WriteSave = injectCode(\n\t\t\t\t\tGame.WriteSave,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tCppkies.hooks.emit(\"preSave\")\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"postSave\", () => {\n\t\t\t\tGame.WriteSave = injectCode(\n\t\t\t\t\tGame.WriteSave,\n\t\t\t\t\t\"if (type==2 || type==3)\",\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tCppkies.hooks.emit(\"postSave\")\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"reset\", () => {\n\t\t\t\t// Called before everything else, so ascend with _ achievements are possible\n\t\t\t\tGame.Reset = injectCode(\n\t\t\t\t\tGame.Reset,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tCppkies.hooks.constEmit(\"reset\", hard)\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"reincarnate\", () => {\n\t\t\t\tGame.registerHook(\"reincarnate\", () => emitter.emit(\"reincarnate\"))\n\t\t\t}),\n\t\t\t//// -- Tiers -- ////\n\t\t\t/**\n\t\t\t\t\"customGetIcon\"\n\t\t\t\tOverrides for icons gotten from GetIcon\n\t\t\t\ttype: string - The type of icon, either a building name or \"Kitten\"\n\t\t\t\ttier: string - The tier of the icon, gotten from Tier.iconRow\n\t\t\t\ticon: Icon - the current icon\n\t\t\t */\n\t\t\tnew Injection(\"getIcon\", () => {\n\t\t\t\tGame.GetIcon = injectCodes(Game.GetIcon, [\n\t\t\t\t\t[\n\t\t\t\t\t\t\"return [col,Game.Tiers[tier].iconRow];\",\n\t\t\t\t\t\t`// Cppkies Injection\n\t\t\t\t\treturn Cppkies.hooks.emit(\"getIcon\", { icon: [col, Game.Tiers[tier].iconRow], tier: tier, type: type }).icon`,\n\t\t\t\t\t\t\"replace\",\n\t\t\t\t\t],\n\t\t\t\t\t[\"col=18;\", 'else if (type === \"Mouse\") col = 11;', \"after\"],\n\t\t\t\t])\n\t\t\t}),\n\t\t\t//// -- Sugar Lump -- ////\n\t\t\t// TODO Rewrite Game.computeLumpType\n\t\t\t// TODO Cppkies.hooks.customComputeLumpType\n\t\t\t// TODO Cppkies.hooks.customDoLumps\n\t\t\t//// -- Shimmers -- ////\n\t\t\t// TODO everything shimmer related\n\t\t\t//// -- Prompts -- ////\n\t\t\t// Idk what here\n\t\t\t//// -- Menus -- ////\n\t\t\t// TODO Patch disabled buttons(?)\n\t\t\t//// -- Buildings -- ////\n\t\t\tnew Injection(\"buildStore\", () => {\n\t\t\t\tGame.BuildStore = injectCode(\n\t\t\t\t\tGame.BuildStore,\n\t\t\t\t\tnull,\n\t\t\t\t\t`;\\nCppkies.hooks.emit(\"buildStore\")`,\n\t\t\t\t\t\"after\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"grandmaPic\", () => {\n\t\t\t\tGame.Objects.Grandma.art.pic = injectCode(\n\t\t\t\t\tGame.Objects.Grandma.art.pic as (\n\t\t\t\t\t\tbuilding: Game.Object,\n\t\t\t\t\t\ti: number\n\t\t\t\t\t) => string,\n\t\t\t\t\t\"return choose(list)+'.png'\",\n\t\t\t\t\t`// Cppkies injection\n\t\t\t\t\tlist = Cppkies.hooks.emit(\"grandmaPic\", list)\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Gameplay -- ////\n\t\t\tnew Injection(\"cps\", () => {\n\t\t\t\tGame.CalculateGains = injectCodes(Game.CalculateGains, [\n\t\t\t\t\t[\n\t\t\t\t\t\t\"var rawCookiesPs=Game.cookiesPs*mult;\",\n\t\t\t\t\t\t`// Cppkies injection\n\t\t\t\t\tGame.cookiesPs = Cppkies.hooks.emit(\"rawCps\", Game.cookiesPs);\n\t\t\t\t\tmult = Cppkies.hooks.emit(\"rawCpsMult\", mult);\\n`,\n\t\t\t\t\t\t\"before\",\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t\"Game.cookiesPs=Game.runModHookOnValue('cps',Game.cookiesPs);\",\n\t\t\t\t\t\t`// Cppkies injection\n\t\t\t\t\t\tmult = Cppkies.hooks.emit(\"cpsMult\", mult);\\n`,\n\t\t\t\t\t\t\"before\",\n\t\t\t\t\t],\n\t\t\t\t])\n\t\t\t\tGame.registerHook(\"cps\", cps => emitter.emit(\"cps\", cps))\n\t\t\t}),\n\t\t\tnew Injection(\"cursorFingerMult\", () => {\n\t\t\t\tGame.Objects.Cursor.cps = injectCode(\n\t\t\t\t\tGame.Objects.Cursor.cps,\n\t\t\t\t\t`var mult=1;`,\n\t\t\t\t\t`// Cppkies injection\nadd = Cppkies.hooks.emit(\"cursorFingerMult\", add);\\n`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"cpc\", () => {\n\t\t\t\tGame.mouseCps = injectCodes(Game.mouseCps, [\n\t\t\t\t\t[\n\t\t\t\t\t\t`var num=0;`,\n\t\t\t\t\t\t`// Cppkies injection\n\t\t\t\t\t\tadd = Cppkies.hooks.emit(\"cursorFingerMult\", add);\\n`,\n\t\t\t\t\t\t\"before\",\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t`var out`,\n\t\t\t\t\t\t`// Cppkies injection\n\t\t\t\t\t\tadd = Cppkies.hooks.emit(\"cpcAdd\", add);\\n`,\n\t\t\t\t\t\t\"before\",\n\t\t\t\t\t],\n\t\t\t\t])\n\n\t\t\t\tGame.registerHook(\"cookiesPerClick\", cpc => emitter.emit(\"cpc\", cpc))\n\t\t\t}),\n\t\t\t// !!!INTERNAL DO NOT USE!!! Use buildingHooks' \"cps\" instead\n\t\t\tnew Injection(\"buildingCps\", () => {\n\t\t\t\tGame.CalculateGains = injectCode(\n\t\t\t\t\tGame.CalculateGains,\n\t\t\t\t\t\"me.storedTotalCps=me.amount*me.storedCps;\",\n\t\t\t\t\t`// Cppkies injection (internal, do not use)\nme.storedCps = Cppkies.hooks.emit(\"buildingCps\", { building: i, cps: me.storedCps }).cps;\\n`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Vanilla -- ////\n\t\t\tnew Injection(\"logic\", () => {\n\t\t\t\tGame.registerHook(\"logic\", () => emitter.emit(\"logic\"))\n\t\t\t}),\n\t\t\tnew Injection(\"draw\", () => {\n\t\t\t\tGame.registerHook(\"draw\", () => emitter.emit(\"draw\"))\n\t\t\t}),\n\t\t\tnew Injection(\"check\", () => {\n\t\t\t\tGame.registerHook(\"check\", () => emitter.emit(\"check\"))\n\t\t\t}),\n\t\t\tnew Injection(\"ticker\", () => {\n\t\t\t\tGame.getNewTicker = injectCode(\n\t\t\t\t\tGame.getNewTicker,\n\t\t\t\t\t\"Game.TickerAge=Game.fps*10;\",\n\t\t\t\t\t`// Cppkies injection\nlist = Cppkies.hooks.emit(\"ticker\", list);\\n`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Specials -- ////\n\t\t\tnew Injection(\"specialPic\", () => {\n\t\t\t\tGame.DrawSpecial = injectCode(\n\t\t\t\t\tGame.DrawSpecial,\n\t\t\t\t\t\"if (hovered || selected)\",\n\t\t\t\t\t`// Cppkies injection\nconst override = Cppkies.hooks.emit(\"specialPic\", {tab: Game.specialTabs[i], frame: frame, pic: pic})\npic = override.pic\nframe = override.frame;\\n`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t\tGame.ToggleSpecialMenu = injectCode(\n\t\t\t\t\tGame.ToggleSpecialMenu,\n\t\t\t\t\t\"else {pic='dragon.png?v='+Game.version;frame=4;}\",\n\t\t\t\t\t`// Cppkies injection\nconst override = Cppkies.hooks.emit(\"specialPic\", {tab: Game.specialTab, frame: frame, pic: pic})\npic = override.pic\nframe = override.frame;\\n`,\n\t\t\t\t\t\"after\"\n\t\t\t\t)\n\t\t\t}),\n\t\t]\n\t\tinjections.forEach(inject => {\n\t\t\tinject.func?.()\n\t\t})\n\t\t//Misc stuff\n\t\tGame.Loader.Load = injectCode(\n\t\t\tGame.Loader.Load,\n\t\t\t\"img.src=this.domain\",\n\t\t\t`\n\t\t\t// Cppkies injection\n\t\t\timg.src = (assets[i].indexOf('http') !== -1 ? \"\" : this.domain)\n`,\n\t\t\t\"replace\"\n\t\t)\n\t\tGame.UpdateMenu = injectCodes(Game.UpdateMenu, [\n\t\t\t[\n\t\t\t\t\"url(img/'+milk.pic+'.png)\",\n\t\t\t\t\"url(' + (milk.pic.indexOf('http') >= 0 ? milk.pic : 'img/'+milk.pic) + '.png)\",\n\t\t\t\t\"replace\",\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"img/icons.png?v='+Game.version+'\",\n\t\t\t\t\"' + (Game.Milks[i].iconLink ? Game.Milks[i].iconLink : 'img/icons.png?v='+Game.version) + '\",\n\t\t\t\t\"replace\",\n\t\t\t],\n\t\t])\n\n\t\tGame.ToggleSpecialMenu = injectCodes(Game.ToggleSpecialMenu, [\n\t\t\t[\n\t\t\t\t\">=5\",\n\t\t\t\t'>=Game.dragonLevels.findIndex(val => val.name === \"Krumblor, cookie hatchling\")',\n\t\t\t\t\"replace\",\n\t\t\t],\n\t\t\t[\n\t\t\t\t\">=25\",\n\t\t\t\t'>=Game.dragonLevels.findIndex(val => val.action === \"Train secondary aura<br><small>Lets you use two dragon auras simultaneously</small>\") + 1',\n\t\t\t\t\"replace\",\n\t\t\t],\n\t\t])\n\t\tGame.Objects.Cursor.buyFunction = injectCode(\n\t\t\tGame.Objects.Cursor.buyFunction,\n\t\t\t\"Game.Unlock('Octillion fingers');\",\n\t\t\t`\n \t\t\t// Cppkies injection\n\t\t\tfor(const i in this.tieredUpgrades) {\n\t\t\t\tif (isNaN(parseInt(i))) continue\n\t\t\t\tif (this.amount >= Game.Tiers[this.tieredUpgrades[i].tier].unlock - 50) this.tieredUpgrades[i].unlock()\n\t\t\t}\n`,\n\t\t\t\"after\"\n\t\t)\n\t\tGame.Object = injectCode(\n\t\t\tGame.Object,\n\t\t\t\"Game.ObjectsN++\",\n\t\t\t`\n// Cppkies injection\nCppkies.hookAllBuildings();\\n`,\n\t\t\t\"after\"\n\t\t)\n\t\tGame.CalculateGains = injectCode(\n\t\t\tGame.CalculateGains,\n\t\t\t\"var catMult=1;\",\n\t\t\t`// Cppkies injection\n\t\t\tCppkies.hiddenMilkMult = milkMult;\\n`,\n\t\t\t\"before\"\n\t\t)\n\t\tresolve(emitter)\n\t})\n}\n", "import Cppkies from \"cppkies\";\r\n\r\nimport { PrestigePage, RiftUpgrade, PagedHeavenlyUpgrade } from \"./rifts\";\r\n\r\nimport { TopBarMenuWidget, BuildingBarMenuWidget } from \"./bars\";\r\n\r\nimport { Task } from \"./quests\";\r\n\r\nimport { TagCondition } from \"./tags\";\r\nimport { AuthorAchievement } from \"./achievement/AuthorAchievement\";\r\nimport { AdvancedAchievement } from \"./achievement\";\r\nimport { AdvancedUpgrade, AdvancedHeavenlyUpgrade } from \"./upgrade\";\r\nimport { createElementFromString, IconToStyle, exclude } from \"./helpers/common\";\r\n\r\nconst SkullyCore = {\r\n\t// Base\r\n\tAdvancedAchievement,\r\n\tAdvancedHeavenlyUpgrade,\r\n\tAdvancedUpgrade,\r\n\tAuthorAchievement,\r\n\tTagCondition,\r\n\r\n\t// Prestige Pages & Rifts\r\n\tPrestigePage,\r\n\tRiftUpgrade,\r\n\tPagedHeavenlyUpgrade,\r\n\r\n\tcurrentPage: \"vanilla\",\r\n\tpages: { vanilla: Game.PrestigeUpgrades } as Record<string, Game.HeavenlyUpgrade[]>,\r\n\r\n\t// Injecting into bars to add stuff (ex. sugar lumps)\r\n\tTopBarMenuWidget,\r\n\tBuildingBarMenuWidget,\r\n\r\n\t// Task Effects (aka. quests), tasks that have a completion req and give a reward when completed\r\n\tTask,\r\n\r\n\t// OnLoad\r\n\tonLoad: [] as (() => void)[],\r\n\r\n\t// Global Helpers\r\n\texclude,\r\n\tIconToStyle,\r\n\tcreateElementFromString,\r\n};\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tSkullyCore: typeof SkullyCore | undefined;\r\n\t}\r\n}\r\n// eslint-disable-next-line import/no-mutable-exports\r\nlet SkullyCoreExport: typeof SkullyCore;\r\nif (typeof window.SkullyCore !== \"undefined\") SkullyCoreExport = window.SkullyCore;\r\nelse {\r\n\twindow.SkullyCore = SkullyCore;\r\n\tSkullyCoreExport = SkullyCore;\r\n\r\n\tCppkies.onLoad.push(() => {\r\n\t\tconst enum InjectCode {\r\n\t\t\tAfter = \"after\",\r\n\t\t\tReplace = \"replace\",\r\n\t\t\tBefore = \"before\",\r\n\t\t}\r\n\r\n\t\t// Author Upgrade\r\n\t\tGame.UpdateMenu = Cppkies.injectCodes(Game.UpdateMenu, [\r\n\t\t\t[\r\n\t\t\t\t\"for (var i in achievements)\",\r\n\t\t\t\t'pools.authors = \"<b>Authors</b> <small>The people who made the mods you are playing with now!</small>\";',\r\n\t\t\t\tInjectCode.Before,\r\n\t\t\t],\r\n\t\t]);\r\n\r\n\t\tGame.crate = Cppkies.injectCodes(Game.crate, [\r\n\t\t\t[\r\n\t\t\t\t\"if (neuromancy)\",\r\n\t\t\t\t'if (neuromancy && (typeof me.noNeuromancy !== \"undefined\" ? !me.noNeuromancy : true))',\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\t\t]);\r\n\r\n\t\tGame.crateTooltip = Cppkies.injectCodes(Game.crateTooltip, [\r\n\t\t\t// Tag Logic\r\n\t\t\t[\r\n\t\t\t\t\"var tagsStr='';\",\r\n\t\t\t\t/* javascript*/ `\r\n\t\t\t\tif (typeof me.noTags !== \"undefined\" ? me.noTags : false) tags = []\r\n\t\t\t\tif (typeof me.tags !== \"undefined\") {\r\n\t\t\t\t\tfor(let i in me.tags) {\r\n\t\t\t\t\t\ttags.concat(me.tags[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof window.SkullyCore !== \"undefined\") window.SkullyCore.TagCondition.Conditions.forEach((element) => {\r\n\t\t\t\t\tif (typeof element.tagFunction === \"function\") {\r\n\t\t\t\t\t\tif (element.tagFunction(me)) tags.push(element.name, element.color) \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(\"Malformed TagCondition\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t`,\r\n\t\t\t\tInjectCode.Before,\r\n\t\t\t],\r\n\t\t]);\r\n\t\t/*\r\n        Note for anyone reading this I don't use the in operator because apparently it is rather slow. While I myself have not done any tests I did this just to be safe.\r\n        Plus while it would be a bit more readable, It wouldn't make much of a difference since it would look something like this:\r\n        if ((native.code === true) && (\"exclude\" in me ? \"total\" in me.exclude ? !me.exclude.total : true : true)) { // True in this case is treated as an \"ignore me\"\r\n            //actual code\r\n        }\r\n        Rather then this :\r\n        if ((native.code === true) && (typeof me.exclude === \"undefined\" ? true : typeof me.exclude.total === \"undefined\"  ? true : !me.exclude.total)) {\r\n            //actual code\r\n        }\r\n        So a bit of a difference but not much, as I said.\r\n\r\n        Another thing I noticed opon writing this is I could've used nested if statements instead of nested ternary operators but... uhh I probabaly should've done that but.... I don't want to redo my code now.\r\n        I might redo it later though.\r\n\r\n        Redone Later B)\r\n            - Bob\r\n        */\r\n\r\n\t\tGame.UpdateMenu = Cppkies.injectCodes(Game.UpdateMenu, [\r\n\t\t\t// Exclude Total\r\n\t\t\t[\r\n\t\t\t\t\"if (me.pool=='' || me.pool=='cookie' || me.pool=='tech') upgradesTotal++;\",\r\n\t\t\t\t`if (me.pool=='' || me.pool=='cookie' || me.pool=='tech') {\r\n\t\t\t\t\t// SkullyCore Inject\r\n\t\t\t\t\tif (window.SkullyCore.exclude(\"total\", me)) upgradesTotal++;\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\r\n\t\t\t// Exclude Debug - Display\r\n\t\t\t[\r\n\t\t\t\t\"if (me.pool=='debug') hiddenUpgrades += str2;\",\r\n\t\t\t\t`if (me.pool=='debug') { \r\n\t\t\t\t\t// SkullyCore Inject\r\n\t\t\t\t\tif (window.SkullyCore.exclude(\"debug\", me)) hiddenUpgrades += str2;\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\r\n\t\t\t// Exclude Prestige - Display & Count\r\n\t\t\t[\r\n\t\t\t\t\"if (me.pool=='prestige') {prestigeUpgrades+=str2;prestigeUpgradesTotal++;}\",\r\n\t\t\t\t`if (me.pool=='prestige') {\r\n               \t\t// SkullyCore Inject\r\n\t\t\t\t\tif (window.SkullyCore.exclude(\"prestige\", me)) {\r\n\t\t\t\t\t\tprestigeUpgrades += str2;\r\n\t\t\t\t\t\tprestigeUpgradesTotal++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"if (me.pool=='prestige') prestigeUpgradesOwned++;\",\r\n\t\t\t\t`if (me.pool=='prestige') {\r\n\t\t\t\t\t// SkullyCore Inject\r\n\t\t\t\t\tif (window.SkullyCore.exclude(\"prestige\", me)) prestigeUpgradesOwned++;\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\r\n\t\t\t// Exclude Cookie - Display\r\n\t\t\t[\r\n\t\t\t\t\"if (me.pool=='cookie') cookieUpgrades+=str2;\",\r\n\t\t\t\t`if (me.pool=='cookie') {\r\n\t\t\t\t\t// SkullyCore Inject\r\n\t\t\t\t\tif (window.SkullyCore.exclude(\"cookie\", me)) cookieUpgrades += str2;\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\r\n\t\t\t// Exclude Other - Display\r\n\t\t\t[\r\n\t\t\t\t\"if (me.pool!='toggle' && me.pool!='unused') upgrades+=str2;\",\r\n\t\t\t\t`if (me.pool!='toggle' && me.pool!='unused') {\r\n\t\t\t\t\t// SkullyCore Inject\r\n\t\t\t\t\tif (window.SkullyCore.exclude(\"other\", me)) {\r\n\t\t\t\t\t\tupgrades+=str2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\r\n\t\t\t// Exclude Shadow - Count\r\n\t\t\t[\r\n\t\t\t\t\"achievementsOwnedOther++;\",\r\n\t\t\t\t`if (window.SkullyCore.exclude(\"shadow\", me)) {\r\n\t\t\t\t\t// SkullyCore Inject\r\n\t\t\t\t\tachievementsOwnedOther++;\r\n\t\t\t\t}`,\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\t\t]);\r\n\r\n\t\tGame.BuildAscendTree = Cppkies.injectCodes(Game.BuildAscendTree, [\r\n\t\t\t[\r\n\t\t\t\t\"for (var i in Game.PrestigeUpgrades)\",\r\n\t\t\t\t\"for (var i in window.SkullyCore.pages[window.SkullyCore.currentPage])\",\r\n\t\t\t\tInjectCode.Replace,\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t\"var str='';\",\r\n\t\t\t\t\"var currentHeavenlyUpgrades = window.SkullyCore.pages[window.SkullyCore.currentPage];\\n\",\r\n\t\t\t\tInjectCode.Before,\r\n\t\t\t],\r\n\t\t\t[\"Game.PrestigeUpgrades\", \"currentHeavenlyUpgrades\", InjectCode.Replace],\r\n\t\t]);\r\n\r\n\t\t/*\r\n\t\tGame.tooltip.draw = Cppkies.injectCodes(Game.tooltip.draw, [\r\n            [\r\n\t\t\t\t`this.shouldHide=0;`,\r\n\t\t\t\t`if (this.stopNewTooltips === true) {`,\r\n\t\t\t\tInjectCode.Before\r\n\t\t\t],\r\n            [\r\n\t\t\t\t`this.on=1;`,\r\n\t\t\t\t`}`,\r\n\t\t\t\tInjectCode.After\r\n\t\t\t]\r\n        ])\r\n\t\t*/\r\n\r\n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(\r\n\t\t\tcreateElementFromString(/* html*/ `\r\n\t\t\t<style type=\"text/css\">\r\n\t\t\t\t.widget_container {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tbottom: -12px;\r\n\t\t\t\t\tz-index: 10000\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#comments_container {\r\n\t\t\t\t\t/* dirty hack */\r\n\t\t\t\t\tmargin-left:  24px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.widget_container > div { \r\n\t\t\t\t\twidth: 32px;\r\n\t\t\t\t\theight: 32px;\r\n\r\n\t\t\t\t\tposition: relative !important;\r\n\t\t\t\t\tbottom: 0px;\r\n\t\t\t\t\tleft: 0px !important;\r\n\r\n\t\t\t\t\tz-index:10000;\r\n\t\t\t\t\tfilter: drop-shadow(0px 3px 2px #000);\r\n\t\t\t\t\t-webkit-filter: drop-shadow(0px 3px 2px #000);\r\n\t\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t\tmargin-left: 4px;\r\n\t\t\t\t}\r\n\t\t\t\t.widget_container > div:hover {\r\n\t\t\t\t\tbottom: 8px;\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t\t.baseIcon {\r\n\t\t\t\t\twidth: 48px;\r\n\t\t\t\t\theight: 48px;\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tleft: -8px;\r\n\t\t\t\t\ttop: -8px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiv#lumpsAmount\r\n\t\t\t\t{\r\n\t\t\t\t\tposition: relative !important;\r\n\t\t\t\t}\r\n\t\t\t</style>`)\r\n\t\t);\r\n\t\t\r\n\t\tSkullyCore.onLoad.forEach((func) => func());\r\n\r\n\t\t// TopBars\r\n\t\tconst TopBar = l(\"comments\").appendChild(\r\n\t\t\tcreateElementFromString(/*html*/ `\r\n\t\t\t\t<div id=\"comments_container\" class=\"widget_container\"></div>\r\n\t\t\t`)\r\n\t\t);\r\n\r\n\t\tTopBarMenuWidget.Bars.forEach((bar) => {\r\n\t\t\tbar.div = TopBar.appendChild(bar.getDiv());\r\n\t\t});\r\n\r\n\t\tGame.ObjectsById.forEach((object) => {\r\n\t\t\tconst el = l(`row${object.id}`);\r\n\t\t\tif (el !== null) {\r\n\t\t\t\tconst building = el.appendChild(\r\n\t\t\t\t\tcreateElementFromString(/*html*/ `\r\n\t\t\t\t\t\t<div id=\"row${object.id}_container\" class=\"widget_container\"></div>\r\n\t\t\t\t\t`)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst bars = BuildingBarMenuWidget.Bars;\r\n\t\t\t\tbars[object.name] ??= [];\r\n\r\n\t\t\t\tbars[object.name].forEach((bar) => {\r\n\t\t\t\t\tbar.div = building.appendChild(bar.getDiv());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/*\r\n        Cppkies.on(\"check\", () => {\r\n            if(typeof SkullyCore.ActiveTasks !== \"undefined\" && SkullyCore.ActiveTasks.length !== 0) {\r\n                SkullyCore.ActiveTasks.forEach((value, index) => {\r\n                    if (value.check()) {\r\n                        value.finish();\r\n                        delete SkullyCore.ActiveTasks[index];\r\n                    }\r\n                });\r\n            }\r\n        })\r\n        */\r\n\r\n\t});\r\n\r\n\tSkullyCore.onLoad.push(() => {\r\n\t\tnew TagCondition(\"Author\", \"#ffffff\", (me: AdvancedUpgrade) => me.pool === \"authors\");\r\n\r\n\t\tconst iconLink =\r\n\t\t\t\"https://raw.githubusercontent.com/MasterOfBob777/SkullyCore/master/static/skullyCoreIcons.png\";\r\n\r\n\t\tnew AuthorAchievement(\"Orteil & Opti\", \"The people who made this awesome game!\", [17, 5, \"\"]);\r\n\t\tnew AuthorAchievement(\"TheGLander\", \"The developer of Cppkies and the CCRepo (W.I.P)\", [3, 2, iconLink]);\r\n\t\tnew AuthorAchievement(\"TheSkullyKO\", \"The ideas guy and artist for SkullyCore and other Skully mods\", [\r\n\t\t\t1,\r\n\t\t\t0,\r\n\t\t\ticonLink,\r\n\t\t]);\r\n\t\tconst BobCheevo = new AuthorAchievement(\r\n\t\t\t\"Bob\",\r\n\t\t\t\"The developer that made this menu for authors and hopefully will work on much more.\",\r\n\t\t\t[2, 2, iconLink]\r\n\t\t);\r\n\t\t// #region Spoliers for tiny minigame, Hide it if you don't want to be spoiled!!!!! (Currenly unavailable tho) I might implement it later\r\n\t\t//*\r\n        \r\n        let BobClicks = 0;\r\n\r\n\t\tinterface BobLine {\r\n\t\t\ttext: string;\r\n\t\t\ticon?: Game.Icon;\r\n\t\t\tfunc?: () => void ;\r\n\t\t}\r\n        let BobLines: BobLine[] = [\r\n            {text: \"The developer that made this menu for authors and hopefully will work on much more.\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"You can stop clicking on me now. There's not an achievement or anything, there's not bcps (Bob Clicks per Second), there's really nothing too interesting.\"},\r\n            {text: \"Like I'm serious there's nothing execept these words.\"},\r\n            {text: \"...\"},\r\n            {text: \".....\"},\r\n            {text: \".......\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Hi!\"},\r\n            {text: \"Wow, you're still here. Usually those two tricks work. \"},\r\n            {text: \"Well there's nothing else.\"},\r\n            {text: \"I mean you can keep clicking on me.\"},\r\n            {text: \"But it's ultimately a waste of your time.\"},\r\n            {text: \"Oh look! There's a golden cookie, better go click on it not me!\", func: () => {\r\n                new Game.shimmer(\"golden\").force=\"blab\"; \r\n            }},\r\n            {text: \"Hah that's what you get for clicking on me!\"},\r\n            {text: \"Wait that wasn't a wrath cookie, just a harmless blab! Grrrrr, I'll get you next time!\"},\r\n            {text: \"For a reward, I'll go away for now, but I'll be back!\", func: () => {\r\n                Game.RemoveAchiev(\"Bob\")\r\n                setTimeout(() => {\r\n                    Game.Achievements[\"Bob\"].won=1;\r\n                    BobClicks++;\r\n                }, 10000)\r\n            }},\r\n            {text: \"Okay, I'm Back.\"},\r\n            {text: \"To be continued..... \"}\r\n        ]\r\n        BobCheevo.clickFunction = () => {\r\n\t\t\tif (BobClicks !== BobLines.length) BobClicks++;\r\n        }\r\n        BobCheevo.descFunc = () => {\r\n            if (typeof BobLines[BobClicks].func !== \"undefined\") {\r\n                BobLines[BobClicks].func();\r\n            }\r\n            return BobLines[BobClicks].text\r\n        }\r\n\r\n        BobCheevo.iconFunction = () => {\r\n            return BobLines[BobClicks]?.icon ?? [0, 2]\r\n        }\r\n        //*/\r\n\t\t// #endregion\r\n\t\tconsole.log(\"SkullyCore Loaded!\");\r\n\r\n\t\t/* Examples\r\n\t\tconst testPage = new SkullyCore.PrestigePage(\"Test\", \"test\", [\"Legacy\"]);\r\n\t\tnew SkullyCore.PagedHeavenlyUpgrade(\r\n\t\t\t\"test\",\r\n\t\t\t\"test\",\r\n\t\t\t0,\r\n\t\t\t[-30, 70],\r\n\t\t\ttestPage.id,\r\n\t\t\t[0, 0],\r\n\t\t\t[testPage.VanillaRift.id]\r\n\t\t);\r\n\r\n\t\tnew SkullyCore.TopBarMenuWidget(\"test\", [0, 0], () => \"test\").onclick = () => {\r\n\t\t\tconsole.log(\"Test\");\r\n\t\t};\r\n\r\n\t\tconst test_icon = new SkullyCore.TopBarMenuWidget(\"test_icon\", [0, 0], () => \"test_icon\");\r\n\t\ttest_icon.onclick = function arrow() {\r\n\t\t\tconsole.log(\"test_icon\");\r\n\t\t\tthis.div.children[0].setAttribute(\"style\", IconToStyle([0, 1]));\r\n\t\t};\r\n\r\n\t\tnew SkullyCore.BuildingBarMenuWidget(\"test2\", [0, 0], \"Grandma\", () => \"test2\").onclick = () => {\r\n\t\t\tconsole.log(\"Test2\");\r\n\t\t};\r\n\t\t//*/\r\n\t});\r\n}\r\n\r\nexport default SkullyCoreExport;\r\n", "import { Upgrade } from \"cppkies/dist/upgrade\";\n\n/**\n * A class that adds a tag to a CrateLike as the name suggests\n * @class\n */\nexport class TagCondition {\n\tpublic static Conditions: TagCondition[] = [];\n\n\t/**\n\t * A class that adds a tag to a CrateLike as the name suggests\n\t * @param name The tag's name\n\t * @param color The color of your tag\n\t * @param tagFunction A function that should return a boolean on whether this tag should be added to a CrateLike\n\t */\n\tconstructor(\n\t\t/**\n\t\t * The name of your tag\n\t\t */\n\t\tpublic name: string, \n\n\t\t/**\n\t\t * The color of your tag. Ex. \"#ff0000\", \"#00ff00\", \"#0000ff\", \"#ffffff\", \"#000000\", etc.\n\t\t */\n\t\tpublic color: string, \n\t\t\n\t\t/**\n\t\t * A function that should return a boolean on whether this tag should be added to a CrateLike.\n\t\t * Should also check if the crate has noTags and respect that, unless you need to do that.\n\t\t * \n\t\t * @param me an Upgrade\n\t\t */\n\t\tpublic tagFunction: (me: any) => boolean\n\t) {\n\t\tTagCondition.Conditions.push(this);\n\t}\n}\n", "import { CommonValue } from \"cppkies/dist/helpers\";\nimport { ExcludeTypes } from \"../types\";\nimport Cppkies from \"cppkies\"\n\n/**\n * An extended Heavenly Upgrade class that add a few utility features\n * @class\n */\n export class AdvancedHeavenlyUpgrade extends Cppkies.HeavenlyUpgrade {\n\t/**\n\t * The pool that this heavenly upgrade is in\n\t */\n\tpublic pool: any;\n\n\t/**\n\t * The groups to exclude this heavenly upgrade from\n\t */\n\tpublic exclude: ExcludeTypes;\n\n\t/**\n\t * Remove all tags? Done before calculating tag conditions\n\t */\n\tpublic noTags: boolean;\n\n\t/**\n\t * Can you use neuromancy with this upgrade?\n\t */\n\tpublic noNeuromancy: boolean;\n\n\t/**\n\t * Creates a AdvancedHeavenlyUpgrade.\n\t * @param name The name of the heavenly upgrade\n\t * @param desc The heavenly upgrade's description\n\t * @param price The price of the heavenly upgrade\n\t * @param icon The icon of your heavenly upgrade\n\t * @param position The position of the heavenly upgrade on screen, (-30, -30) is the origin\n\t * @param parents Your heavenly upgrade's parents\n\t * @param buyFunc A function that gets called when buying your heavenly upgrade\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tdesc: CommonValue<string>,\n\t\tprice: CommonValue<number>,\n\t\ticon: CommonValue<Game.Icon>,\n\t\tposition: [number, number],\n\t\tparents?: (string | number)[],\n\t\tbuyFunc?: () => void\n\t) {\n\t\tsuper(name, desc, price, icon, [position[0], position[1]], parents, buyFunc);\n\t}\n}", "import Cppkies from \"cppkies\"\nimport { CommonValue } from \"cppkies/dist/helpers\";\nimport { ExcludeTypes } from \"../types\";\n\n/**\n * An extended Upgrade class that add a few utility features\n * @class\n */\n export class AdvancedUpgrade extends Cppkies.Upgrade {\n\t/**\n\t * The pool that this upgrade is in\n\t */\n\tpublic pool: any;\n\n\t/**\n\t * The groups to exclude this upgrade from\n\t */\n\tpublic exclude: ExcludeTypes;\n\n\t/**\n\t * Remove all tags? Done before calculating tag conditions\n\t */\n\tpublic noTags: boolean;\n\n\t/**\n\t * Can you use neuromancy with this achievement?\n\t */\n\tpublic noNeuromancy: boolean;\n\n\t/**\n\t * Creates a AdvancedUpgrade\n\t * @param name The name of your upgrade\n\t * @param desc Your upgrade's description\n\t * @param price The price of your upgrade\n\t * @param icon Your upgrade's icon\n\t * @param buyFunc A function that gets called when your upgrade is bought\n\t */\n\tconstructor(\n\t\tname: string,\n\t\tdesc: CommonValue<string>,\n\t\tprice: CommonValue<number>,\n\t\ticon: CommonValue<Game.Icon>,\n\t\tbuyFunc?: () => void\n\t) {\n\t\tsuper(name, desc, price, icon, buyFunc);\n\t}\n}\n", "import { CommonValue } from \"cppkies/dist/helpers\";\r\nimport { TagCondition } from \"./tags\";\r\nimport { AdvancedHeavenlyUpgrade } from \"./upgrade\";\r\n\r\n/**\r\n * A class that adds a Heavenly Upgrade that is only visble if it's page is selected\r\n * @class\r\n */\r\nexport class PagedHeavenlyUpgrade extends AdvancedHeavenlyUpgrade {\r\n\t/**\r\n\t * Creates a PagedHeavenlyUpgrade.\r\n\t * @param name The name of the heavenly upgrade\r\n\t * @param desc The heavenly upgrade's description\r\n\t * @param price The price of the heavenly upgrade\r\n\t * @param position The position of the heavenly upgrade on screen, (-30, -30) is the origin\r\n\t * @param page The page's id that denotes when your heavenly upgrade will be visable\r\n\t * @param icon The icon of your heavenly upgrade\r\n\t * @param parents Your heavenly upgrade's parents\r\n\t * @param buyFunc A function that gets called when buying your heavenly upgrade\r\n\t */\r\n\tconstructor(\r\n\t\tname: string,\r\n\t\tdesc: CommonValue<string>,\r\n\t\tprice: CommonValue<number>,\r\n\t\tposition: [number, number],\r\n\t\tpage: string,\r\n\t\ticon: CommonValue<Game.Icon>,\r\n\t\tparents?: (string | number)[],\r\n\t\tbuyFunc?: () => void\r\n\t) {\r\n\t\tsuper(name, desc, price, icon, position, parents, buyFunc);\r\n\t\tif (typeof window.SkullyCore.pages[page] === \"undefined\") window.SkullyCore.pages[page] = [];\r\n\t\twindow.SkullyCore.pages[page].push(this);\r\n\t\tif (page !== \"vanilla\") Game.PrestigeUpgrades.pop();\r\n\t}\r\n}\r\n\r\n/**\r\n * A class that allows you to transfer yourself to another page. Note : You probably shouldn't define this yourself unless you know what you're doing\r\n * @class\r\n */\r\nexport class RiftUpgrade extends PagedHeavenlyUpgrade {\r\n\t/**\r\n\t * The page that this rift is from's id\r\n\t */\r\n\tpublic back: string;\r\n\r\n\t/**\r\n\t * The page that this rift goes to's id\r\n\t */\r\n\tpublic goto: string;\r\n\r\n\t/**\r\n\t * Don't change this. This is for checking if the rift is a rift when going through tags.\r\n\t */\r\n\tpublic isRift = true;\r\n\r\n\t/**\r\n\t * Creates a RiftUpgrade.\r\n\t * @param name The name of the heavenly upgrade\r\n\t * @param desc The heavenly upgrade's description\r\n\t * @param position The position of the heavenly upgrade on screen, (-30, -30) is the origin\r\n\t * @param goto\r\n\t * @param back\r\n\t * @param icon The icon of your heavenly upgrade\r\n\t * @param parents Your heavenly upgrade's parents\r\n\t * @param buyFunc A function that gets called when buying your heavenly upgrade\r\n\t */\r\n\tconstructor(\r\n\t\tname: string,\r\n\t\tdesc: CommonValue<string>,\r\n\t\tposition: [number, number],\r\n\t\tgoto: string,\r\n\t\tback: string,\r\n\t\ticon: CommonValue<Game.Icon> = [\r\n\t\t\t1,\r\n\t\t\t2,\r\n\t\t\t\"https://raw.githubusercontent.com/MasterOfBob777/SkullyCore/master/static/skullyCoreIcons.png\",\r\n\t\t],\r\n\t\tparents?: (string | number)[],\r\n\t\tbuyFunc?: () => void\r\n\t) {\r\n\t\tsuper(name, desc, 0, position, back, icon, parents, buyFunc);\r\n\t\tthis.exclude = {\r\n\t\t\tall: true,\r\n\t\t};\r\n\t\tthis.back = back;\r\n\t\tthis.noTags = true;\r\n\t\tthis.unlocked = 1;\r\n\t\tthis.bought = 1;\r\n\t\tthis.noNeuromancy = true;\r\n\t\tthis.goto = goto;\r\n\t}\r\n\r\n\tpublic activateFunction = (): void => {\r\n\t\twindow.SkullyCore.currentPage = this.goto;\r\n\t\tGame.BuildAscendTree();\r\n\t}\r\n}\r\n/*\r\n\tWhy do I not just change the pool? Because It breaks HUs, why you ask? Because Orteil that's why.\r\n*/\r\nnew TagCondition(\"Rift\", \"#9700cf\", (me) => typeof me.isRift !== \"undefined\");\r\n\r\n/**\r\n *\r\n * @class\r\n */\r\nexport class PrestigePage {\r\n\t/**\r\n\t * The page's name in a sentence\r\n\t */\r\n\tpublic name: string;\r\n\r\n\t/**\r\n\t * The internal id of the page\r\n\t */\r\n\tpublic id: string;\r\n\r\n\t/**\r\n\t * The rift to take you from the vanilla page to this page.\r\n\t */\r\n\tpublic Rift: RiftUpgrade;\r\n\r\n\t/**\r\n\t * The rift to take you from the this page to vanilla page.\r\n\t */\r\n\tpublic VanillaRift: RiftUpgrade;\r\n\r\n\t/**\r\n\t * Creates a PrestigePage\r\n\t * @param name The page's name in a sentence\r\n\t * @param id The internal id of the page\r\n\t * @param parents Your Goto Rift's parents (vanilla page)\r\n\t * @param gotoicon Your Goto Rift's icon\r\n\t * @param backicon Your Back Rift's icon\r\n\t */\r\n\tconstructor(name: string, id: string, parents: (string | number)[], gotoicon?: Game.Icon, backicon?: Game.Icon) {\r\n\t\tthis.name = name;\r\n\t\tthis.id = id;\r\n\t\tthis.Rift = new RiftUpgrade(\r\n\t\t\t`Goto${this.name}...`,\r\n\t\t\t\"Goto a new universe of possiblities. Don't worry, you can come back.\",\r\n\t\t\t[-30, -130],\r\n\t\t\tthis.id,\r\n\t\t\t\"vanilla\",\r\n\t\t\tgotoicon,\r\n\t\t\tparents\r\n\t\t);\r\n\t\tthis.VanillaRift = new RiftUpgrade(\r\n\t\t\t\"Goto Vanilla...\",\r\n\t\t\t\"Takes you back to the vanilla prestige tree.\",\r\n\t\t\t[-30, -30],\r\n\t\t\t\"vanilla\",\r\n\t\t\tthis.id,\r\n\t\t\tbackicon\r\n\t\t);\r\n\t}\r\n\r\n\t// TODO : Idleverse lore or something\r\n}\r\n", "export class BaseWidget {\n\t/**\n\t * The widget's named id, used for the various HTML elements create from this.\n\t */\n\tpublic id: string;\n\n\t/**\n\t * The widgets icon\n\t */\n\tpublic icon: Game.Icon;\n\n\t/**\n\t * The place the widget lies in the window.SkullyCore.BarWidgets.TopBar.Bars array\n\t */\n\tpublic index: number;\n\n\t/**\n\t * The function called when the game tries to render your widgets tooltip\n\t */\n\tpublic tooltip?: () => string;\n\t/**\n\t * The function called when a user tries to click on your widget\n\t */\n\tpublic onclick?: () => void;\n\t/**\n\t * Called after internal div creation, use this to edit your widget's HTML representation before it gets passed on to the internals\n\t */\n\tpublic customDiv?: (div: HTMLElement) => HTMLElement;\n\n\t/**\n\t * This is a refrence to the bar's HTML element in the dom\n\t * Useful little snippet to change the icon of the widget: bar.div.children[0].setAttribute(\"style\", SkullyCore.IconToStyle([0,0, \"\"]))\n\t */\n\tpublic div?: HTMLElement;\n\n\tprivate _hidden: boolean = false;\n\n\tset hidden(state: boolean) {\n\t\tthis._hidden = state;\n\t\tif (typeof this.div !== \"undefined\") {\n\t\t\tthis.div.style.display = state ? \"none\" : \"block\";\n\t\t}\n\t}\n\n\tget hidden() {\n\t\treturn this._hidden;\n\t}\n}\n", "/**\n * Creates a html object based on a string of valid HTML\n * @param htmlString a string that is valid HTML\n */\n export function createElementFromString(htmlString: string): ChildNode {\n\tconst div = document.createElement(\"div\");\n\tdiv.innerHTML = htmlString.trim();\n\treturn div.firstChild;\n}\n\ninterface ExcludeIsh {\n\texclude?: Partial<{\n\t\ttotal: boolean;\n\t\tdebug: boolean;\n\t\tprestige: boolean;\n\t\tcookie: boolean;\n\t\tother: boolean;\n\t\tshadow: boolean;\n\t\tall: boolean;\n\t}>;\n}\n\n/**\n *\n * @param type the exclude to check for\n * @param me the crate you are checking\n * @param str2 string\n * @param func the function to call if if matches\n */\nexport function exclude(type: keyof ExcludeIsh[\"exclude\"], me: ExcludeIsh): boolean {\n\tif (typeof me?.exclude !== \"undefined\") {\n\t\tif (typeof me?.exclude?.all !== \"undefined\" && !me.exclude.all) return true;\n\t\tif (typeof me?.exclude?.[type] !== \"undefined\" && !me.exclude[type]) return true;\n\t}\n\treturn false;\n}\n\n/**\n * Returns the style atrribute that an icon should have, usesIcon should be a class that this element should use if icon[2]\n * @param icon An icon\n */\nexport function IconToStyle(icon: Game.Icon): string {\n\treturn `${\n\t\t!(typeof icon[2] === \"undefined\" || icon[2] === \"\") ? `background-image: url(${icon[2]});` : \"\"\n\t}background-position:${-icon[0] * 48}px ${-icon[1] * 48}px;`;\n}\n", "export function attachTooltip(div: HTMLElement, tooltip: () => string) {\n\tdiv.addEventListener(\"mouseout\", () => {\n\t\tGame.tooltip.shouldHide = 1;\n\t});\n\tdiv.addEventListener(\"mouseover\", function arrow() {\n\t\tGame.tooltip.dynamic = 1;\n\t\tGame.tooltip.draw(\n\t\t\tthis,\n\t\t\ttooltip,\n\t\t\t\"bottom\"\n\t\t);\n\t\tGame.tooltip.wobble();\n\t});\n}", "\nimport { createElementFromString, IconToStyle } from \"../helpers/common\";\nimport { attachTooltip } from \"../helpers/tooltip\";\nimport { BaseWidget } from \"./BaseWidget\";\n\nexport class BuildingBarMenuWidget extends BaseWidget {\n\tstatic Bars: Record<string, BuildingBarMenuWidget[]> = {};\n\n\t/**\n\t * The building this widget is attached to.\n\t */\n\tpublic building: string;\n\n\tconstructor(id: string, icon: Game.Icon, building: string, tooltip?: () => string) {\n\t\tsuper();\n\t\tthis.id = id;\n\t\tthis.icon = icon;\n\t\tthis.building = building;\n\t\tthis.tooltip = tooltip;\n\t\tconst bars =BuildingBarMenuWidget.Bars\n\t\tbars[this.building] ??= []\n\t\tthis.index = bars[this.building].push(this) - 1;\n\t}\n\n\tpublic getDiv(): HTMLElement {\n\t\tlet div = createElementFromString(/*html*/ `\n\t\t\t<div \n\t\t\t\tclass=\"building_bar\" \n\t\t\t\tid=\"${this.id}BuildingBarMenu\"\n\t\t\t> \n\t\t\t\t<div \n\t\t\t\t\tid=\"${this.id}BuildingBarMenuIcon\" \n\t\t\t\t\tclass=\"baseIcon ${!this.icon[2] ? \"usesIcon\" : \"\"}\" \n\t\t\t\t\tstyle=\"${IconToStyle(this.icon)}\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t`) as HTMLElement;\n\t\tif (typeof this.onclick !== \"undefined\") {\n\t\t\tdiv.addEventListener(\"click\", this.onclick.bind(this));\n\t\t}\n\t\tif (typeof this.tooltip !== \"undefined\") {\n\t\t\tattachTooltip(div, this.tooltip);\n\t\t}\n\t\tif (typeof this.customDiv !== \"undefined\") {\n\t\t\tdiv = this.customDiv(div);\n\t\t}\n\t\tif (this.hidden) {\n\t\t\tdiv.style.display = \"none\";\n\t\t}\n\t\treturn div;\n\t}\n}\n", "\nimport { createElementFromString, IconToStyle } from \"../helpers/common\";\nimport { attachTooltip } from \"../helpers/tooltip\";\nimport { BaseWidget } from \"./BaseWidget\";\n\nexport class TopBarMenuWidget extends BaseWidget {\n\tstatic Bars: TopBarMenuWidget[] = [];\n\n\tconstructor(id: string, icon: Game.Icon, tooltip?: () => string) {\n\t\tsuper();\n\t\tthis.id = id;\n\t\tthis.icon = icon;\n\t\tthis.tooltip = tooltip;\n\t\tthis.index = TopBarMenuWidget.Bars.push(this) - 1;\n\t}\n\n\tpublic getDiv(): HTMLElement {\n\t\tlet div = createElementFromString(/*html*/ `\n        <div \n\t\t\tclass=\"top_bar\"\n\t\t\tid=\"${this.id}TopBarMenu\"\n\t\t> \n            <div \n\t\t\t\tid=\"${this.id}TopBarMenuIcon\" \n\t\t\t\tclass=\"baseIcon ${!this.icon[2] ? \"usesIcon\" : \"\"}\" \n\t\t\t\tstyle=\"${IconToStyle(this.icon)}\"\n\t\t\t></div>\n        </div>`) as HTMLElement;\n\t\tif (typeof this.onclick !== \"undefined\") {\n\t\t\tdiv.addEventListener(\"click\", this.onclick.bind(this));\n\t\t}\n\t\tif (typeof this.tooltip !== \"undefined\") {\n\t\t\tattachTooltip(div, this.tooltip);\n\t\t}\n\t\tif (typeof this.customDiv !== \"undefined\") {\n\t\t\tdiv = this.customDiv(div);\n\t\t}\n\t\tif (this.hidden) {\n\t\t\tdiv.style.display = \"none\";\n\t\t}\n\t\treturn div;\n\t}\n}\n", "export interface AdvancedBuffInterface extends Game.Buff {\n\ttimeless?: boolean;\n\tdismissable?: boolean;\n}\n\nexport class AdvancedBuff extends Game.buffType {\n\tpublic timeless: boolean;\n\n\tpublic dismissable: boolean;\n\n\tconstructor(\n\t\tname: string,\n\t\tfunc: (time: number, arg1?: number, arg2?: number, arg3?: number) => AdvancedBuffInterface\n\t) {\n\t\tsuper(name, func);\n\t}\n}", "import { AdvancedBuff, AdvancedBuffInterface } from \"./buff/AdvancedBuff\";\r\n\r\nexport class Task extends AdvancedBuff {\r\n\t// Todo : hide buff timer and make it eternal, optional to enable the timer and have a time limit\r\n\t// Todo : allow the user to dismiss task if dismissable is set to true or has open sesame\r\n\r\n\t// Todo : Add buff dismissal to user when open sesame is enabled for all buffs\r\n\tpublic check: () => boolean;\r\n\tpublic finish: () => boolean;\r\n\r\n\tconstructor(\r\n\t\tname: string,\r\n\t\tfunc: (time: number, arg1?: number, arg2?: number, arg3?: number) => AdvancedBuffInterface,\r\n\t\tcheck: () => boolean,\r\n\t\tfinish: () => boolean\r\n\t) {\r\n\t\tsuper(name, func);\r\n\t}\r\n}\r\n/*\r\nname \r\ndesc\r\nicon \r\ncheck \r\nfinish\r\n*/\r\n", "import { ExcludeTypes } from \"../types\";\nimport Cppkies from \"cppkies\";\n\n/**\n * An extended Achievement class that add a few utility features\n * @class\n */\n export class AdvancedAchievement extends Cppkies.Achievement {\n\t/**\n\t * The pool that this achievement is in\n\t */\n\tpublic pool: any;\n\n\t/**\n\t * A function which returns the description of the achievement\n\t */\n\tpublic descFunc: () => string;\n\n\t/**\n\t * A function which returns the icon of the achievement\n\t */\n\tpublic iconFunction: () => Game.Icon;\n\n\t/**\n\t * The groups to exclude this achievement from\n\t */\n\tpublic exclude: ExcludeTypes;\n\n\t/**\n\t * Remove all tags? Done before calculating tag conditions\n\t */\n\tpublic noTags: boolean;\n\n\t/**\n\t * Can you use neuromancy with this achievement?\n\t */\n\tpublic noNeuromancy: boolean;\n\n\t/**\n\t * Creates a achievement with a few utility features.\n\t * @param name The name of the achievement\n\t * @param desc The description of it\n\t * @param icon The icon for it\n\t */\n\tconstructor(name: string, desc: string, icon: Game.Icon) {\n\t\tsuper(name, desc, icon);\n\t}\n}\n\n", "import { AdvancedAchievement } from \"./AdvancedAchievement\";\n\n/**\n * An class to add your own credits to your mod\n * @class\n */\n export class AuthorAchievement extends AdvancedAchievement {\n\t/**\n\t * Creates an Author Achievement\n\t * @param name Your name / The author's name\n\t * @param desc A short desciption of what you or the author did\n\t * @param icon An icon that preferably describes yourself / the author\n\t */\n\tconstructor(name: string, desc: string, icon: Game.Icon) {\n\t\tsuper(name, desc, icon);\n\t\tthis.pool = \"authors\";\n\t\tthis.exclude = { shadow: true };\n\t\tthis.won = 1;\n\t\tthis.noTags = true;\n\t\tthis.noNeuromancy = true;\n\t}\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBA2CI,KAAK,KAAA,IALU,KAAK,OAAA,ICoGK,KAAK,KAAA,IAkLtB,KAAA,KAAA,ICjIS,KAAK;AAAA,mBAAA,IAAA,IAAA;AAAA,uBAAA;AAAA,iBAAA,cAAA;;AAAA,YAAA,IAAA,KAAA,GAAA,YAAA,AAAA,OAAA,OAAA,OAAA,OAAA,MAAA,GAAA,YAAA,GAAA,WAAA,IAAA;;AAAA,mBAAA,IAAA,IAAA,GAAA,IAAA;AAAA,iBAAA,IAAA,MAAA,KAAA,UAAA,SAAA,IAAA,IAAA;AAAA,wBAAA,IAAA;AAAA,kBAAA;AAAA,mBAAA,GAAA,KAAA;uBAAA,IAAA;AAAA,mBAAA;;;AAAA,wBAAA,IAAA;AAAA,kBAAA;AAAA,mBAAA,GAAA,SAAA;uBAAA,IAAA;AAAA,mBAAA;;;AAAA,wBAAA,IAAA;AAAA,iBAAA,OAAA,GAAA,GAAA,SAAA,IAAA,EAAA,SAAA,IAAA;AAAA,mBAAA,GAAA;iBAAA,KAAA,IAAA;;AAAA,eAAA,MAAA,GAAA,MAAA,IAAA,MAAA,KAAA;;;AAAA,mBAAA,IAAA,IAAA;AAAA,qBAAA,IAAA;AAAA,mBAAA,SAAA,IAAA;AAAA,qBAAA,GAAA,CAAA,IAAA;;;AAAA,sBAAA,IAAA;AAAA,gBAAA;AAAA,oBAAA,IAAA,UAAA;AAAA,mBAAA;AAAA,kBAAA;AAAA,oBAAA,KAAA,GAAA,MAAA,MAAA,IAAA,GAAA,KAAA,GAAA,YAAA,GAAA,KAAA,GAAA,YAAA,OAAA,GAAA,cAAA,GAAA,KAAA,KAAA,KAAA,GAAA,SAAA,CAAA,MAAA,GAAA,KAAA,IAAA,GAAA,KAAA;AAAA,yBAAA;AAAA,wBAAA,MAAA,GAAA,OAAA,MAAA,CAAA,IAAA,GAAA,IAAA,GAAA,SAAA,GAAA;uBAAA;uBAAA;AAAA,yBAAA;AAAA;uBAAA;AAAA,2BAAA,GAAA,SAAA,EAAA,OAAA,GAAA,IAAA,MAAA;uBAAA;AAAA,uBAAA,SAAA,KAAA,GAAA,IAAA,KAAA,CAAA;AAAA;uBAAA;AAAA,yBAAA,GAAA,IAAA,OAAA,GAAA,KAAA;AAAA;;AAAA,wBAAA,MAAA,GAAA,MAAA,CAAA,MAAA,IAAA,GAAA,UAAA,GAAA,GAAA,SAAA,QAAA,CAAA,GAAA,OAAA,KAAA,AAAA,GAAA,OAAA,IAAA;AAAA,2BAAA;AAAA;;AAAA,wBAAA,AAAA,GAAA,OAAA,KAAA,EAAA,MAAA,GAAA,KAAA,GAAA,MAAA,GAAA,KAAA,GAAA,KAAA;AAAA,yBAAA,QAAA,GAAA;AAAA;;AAAA,wBAAA,AAAA,GAAA,OAAA,KAAA,GAAA,QAAA,GAAA,IAAA;AAAA,yBAAA,QAAA,GAAA,IAAA,KAAA;AAAA;;AAAA,wBAAA,MAAA,GAAA,QAAA,GAAA,IAAA;AAAA,yBAAA,QAAA,GAAA,IAAA,GAAA,IAAA,KAAA;AAAA;;AAAA,uBAAA,MAAA,GAAA,IAAA,OAAA,GAAA,KAAA;AAAA;;AAAA,qBAAA,GAAA,KAAA,IAAA;uBAAA,IAAA;AAAA,qBAAA,CAAA,GAAA,KAAA,KAAA;wBAAA;AAAA,qBAAA,KAAA;;AAAA,gBAAA,IAAA,GAAA;AAAA,oBAAA,GAAA;AAAA,mBAAA,EAAA,OAAA,GAAA,KAAA,GAAA,KAAA,QAAA,MAAA;;AAAA,cAAA,IAAA,IAAA,IAAA,IAAA,KAAA,EAAA,OAAA,GAAA,MAAA,WAAA;AAAA,gBAAA,IAAA,GAAA;AAAA,oBAAA,GAAA;AAAA,mBAAA,GAAA;aAAA,MAAA,IAAA,KAAA;AAAA,iBAAA,KAAA,EAAA,MAAA,EAAA,IAAA,OAAA,EAAA,IAAA,QAAA,EAAA,MAAA,AAAA,OAAA,UAAA,cAAA,IAAA,OAAA,YAAA,WAAA;AAAA,mBAAA;cAAA;;AAAA,qBAAA;AAAA,mBAAA,KAAA,GAAA,KAAA,GAAA,KAAA,UAAA,QAAA,KAAA,IAAA;AAAA,kBAAA,UAAA,IAAA;AAAA,mBAAA,KAAA,MAAA,KAAA,KAAA,GAAA,KAAA,GAAA,KAAA,IAAA;AAAA,qBAAA,KAAA,UAAA,KAAA,KAAA,GAAA,KAAA,GAAA,QAAA,KAAA,IAAA,MAAA;AAAA,iBAAA,MAAA,GAAA;AAAA,iBAAA;;AAAA,mBCzKG,IAAA;AAE5B,iBAAO,GAAI,QAAQ,+BAA+B;;AAiBnD,mBAAwB,IAAgB,IAAxC;AAAA,cACO,IAA0B,AAAd,GAAO,OAAO,MAE5B,KAAK;AACS,UAAd,GAAO,OAAO,QAEhB,MADwB,AAArB,OAAO,GAAO,MAAO,WAChB,IAAI,OAAO,EAAa,GAAO,KAAK,OAChC,GAAO,IAChB,CAAC,GAAM,KAAK,OAAS,QAAQ,KAAK;AAAb,cAGpB,KAAY,cACZ,KAAU;AAEhB,kBAAQ,GAAO;iBACT;AACW,mBAAX,IAAoB,GAAO,QAAQ,IAAW,OAAK,GAAO,MAChD,GAAO,QAAQ,IAAO,KAAG,GAAO,KAAK,GAAO;AAC1D;iBACI;AACW,mBAAX,IAAoB,GAAO,KACjB,GAAO,QAAQ,IAAO,GAAO;AAC3C;iBACI;AACW,mBAAX,IAAoB,GAAO,QAAQ,IAAY,GAAO,KAAP,QACrC,GAAO,QAAQ,IAAO,KAAG,GAAO,KAAK,GAAO;AAC1D;;AAEA,oBAAM,IAAI,MAAM;;AAElB,iBAAO;;AACP,mBAeA,IACA,IACA,GACA,IACA,IAAA;AAAA,UAAA,OAAA,UAAA,MAAA;AAEA,cAAM,KAAU,SAAQ,MAAR,QAAA,EACZ,OAAO,KAAK,KAAZ,CACH,aAAW,EAAe,GAAK,YAAY,CAAC,IAAQ,GAAQ,OAA5D,OAFe,MAAA,QAGX,OAAO,OAAO;AAEnB,iBADA,GAAQ,YAAY,GAAK,WAClB;;AACP,mBAaC,IAAS,IAA4B,GAAA;AAAA,UAAA,MAAA,UAAA,KAAA;AAEtC,mBAAW,IADP,KAAS,GAAK,YAClB,KAAA,GAAwB,KAAA,IAAA,KAAA,GAAA,QAAA;AAAb,iBAAX,GAAA,KAAoC,KAAS,EAAe,IAAQ;AACpE,cAAM,KAAU,SAAQ,MAAR,QAAA,EACZ,OAAO,KAAK,IAAZ,CACH,aAAW,KAAX,OAFe,MAAA,QAGX,OAAO,OAAO;AAEnB,iBADA,GAAQ,YAAY,GAAK,WAClB;;AACP,mBAO6B,IAAiB,IAAA;AAC9C,mBAAW,MAAK;AAAQ,eAAQ,MAAK,GAAO;;AAC5C,mBAM8B,IAAA;AAC9B,iBAAO,GAAO,OAAO,GAAG,gBAAgB,GAAO,MAAM,GAAG;;AACxD,mBAOA,IACA,IAAA;AAGA,iBAAO,GAAI,eAAe;;AAC1B,mBAM8B,IAAA;AAkB9B,mBAAW,IAjBL,IAAS,CACd,CAAC,KAAM,MACP,CAAC,KAAK,OACN,CAAC,KAAK,MACN,CAAC,KAAK,OACN,CAAC,KAAK,MACN,CAAC,IAAI,OACL,CAAC,IAAI,MACL,CAAC,IAAI,OACL,CAAC,IAAI,MACL,CAAC,GAAG,OACJ,CAAC,GAAG,MACJ,CAAC,GAAG,OACJ,CAAC,GAAG,OAED,KAAQ,IAEZ,KAAA,GAAuB,KAAA,GAAA,KAAA,GAAA,QAAA;AAAvB,iBAAW,KAAX,GAAA,KACQ,MAAO,GAAS;AACtB,oBAAS,GAAS,IAClB,MAAO,GAAS;AAGlB,iBAAO;;ACnGR,mBAAmC,IAAnC;AACC,kBAAQ;iBACF;AACJ,qBAAO,EAAE,cAAc,IAAI,WAAW,IAAI,UAAU;iBAChD;AACJ,qBAAO,EACN,OAAO,QACP,OAAO,CAAC,QAAQ;iBAEb;AACJ,qBAAO,EAAE,KAAG;iBACR;AACJ,qBAAO,EACN,QAAM,OACN,UAAQ;iBAEL;AACJ,qBAAO,EACN,QAAQ,GACR,QAAQ,GACR,MAAM,GACN,cAAc,GACd,OAAO,GACP,OAAO,GACP,cAAc;;AAGf,oBAAM,IAAI,MAAM;;;AAInB,qBAAA;AACC,iBAAO,EACN,MAAM,IACN,SAAS,EAA0B,QACnC,SAAO,GACP,QAAQ,EAA0B;;AAEnC,qBAOe;AACf,aAAO,OAAO,IAAO;;AACrB,mBAK4B,IAAA;AAE5B,iBACC,EAAK,QAAQ,UAAU,GAAS,SAChC,EAA0B;;AAE3B,mBAK4B,IAAA;AAAA,cAC5B,KAAM,GAAA,QACN,IAAM,GAAA,QACN,KAAI,GAAA,MACJ,KAAY,GAAA,cACZ,KAAK,GAAA,OACL,KAAK,GAAA,OACL,KAAY,GAAA,cACZ,KAAI,GAAA;AAEJ,YAAK,QAAQ,UAAU,MAAQ,EAC9B,QAAM,IACN,QAAM,GACN,MAAI,IACJ,cAAY,IACZ,OAAK,IACL,OAAK,IACL,cAAY;;AAEb,mBAK2B,IAAA;AAC3B,iBACC,EAAK,QAAQ,SAAS,GAAQ,SAAS,EAA0B;;AAElE,mBAK2B,IAAA;AAC3B,YAAK,QAAQ,SAAS,GAAQ,QAAQ,EACrC,UAAU,CAAC,CAAC,GAAQ,UACpB,QAAQ,CAAC,CAAC,GAAQ;;AAEnB,mBAM+B,IAAA;AAC/B,iBACC,EAAK,QAAQ,aAAa,GAAQ,SAClC,EAA0B;;AAE3B,mBAK+B,IAAA;AAC/B,YAAK,QAAQ,aAAa,GAAQ,QAAQ,EACzC,KAAK,CAAC,CAAC,GAAQ;;AAEhB,qBACe;AAEQ,UAAtB,EAAK,OAAO,UAAU,UACtB,EAAK,OAAO,SAAS,KAAK,aAAa,SAAS,KAEhD,MAAK,cAAc,EAAK,OAAO,QAEN,AAAzB,EAAK,OAAO,MAAM,OAAO,UACzB,EAAK,OAAO,MAAM,MAAM,OAAO,KAAK,KAAK,aAAa,SAAS,KAE/D,MAAK,aAAa,EAAK,OAAO,MAAM,KAEX,AAAzB,EAAK,OAAO,MAAM,OAAO,UACzB,EAAK,OAAO,MAAM,MAAM,OAAO,KAAK,KAAK,aAAa,SAAS,KAE/D,MAAK,cAAc,EAAK,OAAO,MAAM;;AACtC,qBAKe;AACf,mBAAW,IAAY,KAAA,GAAA,IAAA,GAAO,iBAAP,KAAA,EAAA,QAAA;AAAZ,iBAAX,EAAA,KACC,EAAc,IAAU,EAAa;AAEtC,mBAAW,IAAW,KAAA,GAAA,KAAA,GAAO,gBAAP,KAAA,GAAA,QAAA;AAAX,iBAAX,GAAA,KACC,EAAc,IAAS,EAAY,MAC/B,GAAQ,UAAU,KAAK,qBAAqB,GAAQ,SACvD,KAAK;AAGP,mBAAW,IAAe,KAAA,GAAA,KAAA,GAAO,oBAAP,KAAA,GAAA,QAAA;AAAf,iBAAX,GAAA,KACC,EAAc,IAAa,EAAgB,MACvC,GAAY,OAAO,KAAK,yBAAyB,GAAY,SAChE,KAAK;AAGP;;AACA,qBAIe;AACf,mBAAW,IAAY,KAAA,GAAA,IAAA,GAAO,iBAAP,KAAA,EAAA,QAAA;AAAZ,iBAAX,EAAA,KAA+C,EAAa;AAC5D,mBAAW,IAAW,KAAA,GAAA,KAAA,GAAO,gBAAP,KAAA,GAAA,QAAA;AAAX,iBAAX,GAAA,KAA6C,EAAY;AACzD,mBAAW,IAAe,KAAA,GAAA,KAAA,GAAO,oBAAP,KAAA,GAAA,QAAA;AAAf,iBAAX,GAAA,KACC,EAAgB;;AAEjB,mBAEyB,IAAA;AACzB,cAAM,KAAc;AAEpB,cAAuB,AAAnB,OAAO,MAAY,YAAwB,AAAZ,OAAY;AAAM,mBAAO;AAE5D,cACC,CAAC,EAAe,IAAS,cACE,AAA3B,OAAO,GAAQ,WAAY,YAC3B,IAAA,GAAQ;AAER,mBAAO;AA2ER,cAFK,GAAY,UAFZ,EAAe,IAAS,aApE7B,SAAsB,IAAtB;AACC,gBAAM,KAAiB,EAA0B;AAEjD,gBAAuB,AAAnB,OAAO,MAAY,YAAwB,AAAZ,OAAY;AAAM,qBAAO;AAE5D,gBACC,EAAe,IAAS,gBACK,AAA7B,OAAO,GAAQ,aAAc,YACP,AAAtB,GAAQ,cAAc;AAEtB,uBAAW,MAAgB,GAAQ,WAAW;AAC7C,oBAAM,KAAW,GAAQ,UAAU;AACnC,oBAAwB,AAApB,OAAO,MAAa,YAAyB,AAAb,OAAa;AAIjD,2BAAW,MAHX,GAAe,UAAU,MAAgB,EACxC,aAEkB;AAEjB,2BAAO,GAAe,UAAU,IAAc,OAC9C,OAAO,GAAS,OAEhB,IAAe,UAAU,IAAc,MAAQ,GAAS;;AAI5D,gBACC,EAAe,IAAS,eACI,AAA5B,OAAO,GAAQ,YAAa,YACP,AAArB,GAAQ,aAAa;AAErB,uBAAW,MAAe,GAAQ,UAAU;AAC3C,oBAAM,KAAU,GAAQ,SAAS;AACjC,oBAAuB,AAAnB,OAAO,MAAY,YAAwB,AAAZ,OAAY;AAI/C,2BAAW,MAHX,GAAe,SAAS,MAAe,EACtC,YAEkB,GAAe,SAAS;AAEzC,2BAAO,GAAe,SAAS,IAAa,OAC5C,OAAO,GAAQ,OAEf,IAAe,SAAS,IAAa,MAAQ,GAAQ;;AAGzD,gBACC,EAAe,IAAS,mBACQ,AAAhC,OAAO,GAAQ,gBAAiB,YACP,AAAzB,GAAQ,iBAAiB;AAEzB,uBAAW,MAAmB,GAAQ,cAAc;AACnD,oBAAM,KAAc,GAAQ,aAAa;AACzC,oBAA2B,AAAvB,OAAO,MAAgB,YAA4B,AAAhB,OAAgB;AAIvD,2BAAW,MAHX,GAAe,aACd,MACG,EAA0B,gBACX,GAAe,aAAa;AAE7C,2BAAO,GAAe,aAAa,IAAiB,OACpD,OAAO,GAAY,OAEnB,IAAe,aAAa,IAAiB,MAC5C,GAAY;;AAGjB,mBAAO;YAMgC,GAAQ,WADzB,EAA0B,QAIhD,EAAe,IAAS,aACE,AAA1B,OAAO,GAAQ,UAAW,YACP,AAAnB,GAAQ,WAAW,QAGlB,GAAe,GAAQ,QAAQ,YACE,CAAhC,OAAO,GAAQ,OAAO,SAAU,YACP,AAAzB,GAAQ,OAAO,UAAU,WAE1B,IAAY,OAAO,QAAQ,GAAQ,OAAO,QAE1C,EAAe,GAAQ,QAAQ,YAC/B,GAAQ,OAAO,iBAAiB;AAEhC,qBAAW,MAAK,GAAQ,OAAO,OAAO;AACrC,kBAAM,IAAO,GAAQ,OAAO,MAAM;AADG,cAEjB,CAAhB,OAAO,KAAS,YAAqB,AAAT,MAAS,WACxC,IAAY,OAAO,MAAM,MAAK;;AAIlC,iBAAO;;AACP,mBAE0B,IAAA;AAC1B,cAAI;AACJ,cAAI;AACH,iBAAU,KAAK,MAAM;mBACpB,IAAA;AACY,YAAT,OAAS,MACZ,QAAQ,KAAK,qDACd;;AAED,cAAO,GAAO,OAAO,EAAU,KAC/B;;AACA,qBAEe;AAEf,iBADA,KACO,KAAK,UAAU;;AACtB,mBF3WqB,IAAiB,IAAA;AACtC,YAAQ,MAAW;;AACnB,mBAc4B,IAAA;AAC5B,cAAI,EAAe,SAAS;AAAO,kBAAM,IAAI,MAAM;AAAhB,iBACnC,GAAe,KAAK,KAChB,MAAQ,KAAgB,EAAa,EAAQ,OACjD,KAAiB,IACV;;AAOR,mBAA+B,IAA/B;AACC,iBAAO,IAAI,QAAQ,SAAA,IAAA;AAClB,gBAAM,IAAM,IAAI;AAChB,cAAI,iBAAiB,QAAQ,WAAA;AAC5B,iBAAQ;gBAET,EAAI,cAAc,aAClB,EAAI,MAAM;;;AAOZ,mBAAmB,IAAnB;AACC,iBAAO,IAAI,QAAQ,SAAA,IAAA;AAClB,eAAI,OAAO,OAAO,SAAC,IAAD;AACjB,iBAAQ,IAAI,gBAAgB;;;;AAkB/B,mBACC,IACA,IACA,GACA,IACA,IACA,IAND;AAQC,iBAAO,IAAI,QAAQ,SAAA,IAAA;AACZ,cAAO,cAAc,SAAQ,KAAS,CAAC,KAC7C,IAAS;AAET,gBAAM,KAAwC;AAC9C,qBAAW,MAAK;AACf,uBAAW,MAAK,EAAO;AAEtB,oBAAK,EAAO,IAAG,KAAf;AAEA,sBADA,EAAO,IAAG,MAAK,EAAO,IAAG,IAAG,WAAW,eACnC,CAAE,GAAO,IAAG,OAAM;AAAQ,0BAAM,IAAI,MAAM;AAC9C,qBAAW,EAAO,IAAG,OAAM,CAAC,SAAS,KAAI,SAAS;;AAHlD,gBAMI,KAAS,SACb,cAAc,UACd,WAAW,OACP,KAAM,IAAI;AAChB,eAAI,iBAAiB,QAAQ,WAAA;AAG5B,uBAAW,MAFX,GAAO,OAAO,QAAQ,GAAK,IAC3B,GAAO,OAAO,SAAS,GAAK,IACZ;AACf,mBAAO,UACN,IACA,GAAW,IAAG,KAAK,GAAS,IAC5B,GAAW,IAAG,KAAK,GAAS,IAC5B,GAAS,IACT,GAAS,IACT,GAAM,IAAG,KAAK,GAAS,IACvB,GAAM,IAAG,KAAK,GAAS,IACvB,GAAS,IACT,GAAS;AATV,kBAcG,IAHE,KAAkB,WAAA;AACvB,kBAAU,IAAQ,KAAK;;AAGpB,oBAAa,MAAM,GAAY,MAC/B,cAAe,UAAS,GAAI,KAAK,MAChC;gBAEN,GAAI,cAAc,aAClB,GAAI,MAAM;;;AAEX,mBA2N2B,IAAA;AAI3B,iBAHA,KAAI,EAAO,KACP,CAAA,GAAK,OAAL,UAAqC,AAAZ,GAAK,OAAO,SAAM,IAAK,KAAK,GAAO,WAChE,GAAK,KAAK,EAAa,GAAK,KACrB;;AACP,mBG1U2B,IAAA;AAAA,cACrB,KAAyB,IAAI,KAC7B,IAAa,CAClB,IAAI,EAAU,WAAW,WAAA;AACxB,eAAS,UAAU,EAClB,EAAW,GAAS,SAAS,UAAU,kBAAkB,YACzD,MACA,+FAEA;cAGF,IAAI,EAAU,OAAO,WAAA;AACpB,eAAS,MAAM,EACd,GAAS,KACT,MACA,sGAIA;cAGF,IAAI,EAAU,WAAW,WAAA;AACxB,eAAS,UAAU,EAClB,GAAS,SACT,gBACA,0EAEA,SACA,EAAE,IAAI;;AAIT,YAAW,QAAQ,SAAA,IAAA;AAAA,gBAAA;AAAA,YAClB,MAAA,GAAO,UADW,QAClB,AAAA,OAAA,SAAA,SAAA,GAAA,KAAA;cAED,GAAO,MAAM,GAAG,eAAe,SAAA,IAAA;AAAO,mBAAC,EACtC,UAAU,GAAI,UACd,KACC,KAAK,QAAQ,GAAI,cAAc,KAC5B,GAAQ,KAAK,OAAO,GAAI,OACxB,GAAI;cAET,GAAc,GAAS,QAAQ;;AAC/B,qBAKe;AACf,mBAAW,IAAY,KAAA,GAAA,IAAA,KAAK,aAAL,KAAA,EAAA,QAAA;AAAZ,iBAAX,EAAA,KACM,GAAc,GAAS,SAAO,EAAY;;AJejD,mBACC,IADD;AAGC,iBAAwB,AAAjB,GAAQ,SAAS;;AACxB,mBA4NiC,IAAA;AAEjC,mBAAA,IADI,KAAO,GACF,KAAI,GAAG,MAAK,IAAM;AAC1B,kBAAI,AAAA,MAAI,GAAiB,SAArB,QAAoB,AAAA,OAAA,SAAA,KAAO,GAAiB;AACjD,iBAAO,IAAI,EAAA,IAAM;;AACjB,qBKxTuB;AACvB,aAAO,GAAG,WAAW,SAAC,IAAD;AAAA,gBAAG,KAAI,GAAA,MAAE,IAAI,GAAA,MAAE,KAAI,GAAA;AAKvC,mBAJA,GAAO,YAAY,QAAQ,SAAA,IAAA;AACtB,iBAAI,YAAY,GAAK,cAAc,GAAI,YAC1C,IAAK,KAAK,GAAI;gBAET,EAAE,MAAI,IAAE,MAAI,GAAE,MAAI;cAE1B,GAAO,GAAG,WAAW,SAAC,IAAD;AAAA,gBAAG,KAAI,GAAA,MAAE,IAAI,GAAA,MAAE,KAAI,GAAA;AAIvC,mBAHA,GAAO,gBAAgB,QAAQ,SAAA,IAAA;AAC1B,iBAAI,SAAS,KAAQ,GAAI,YAAU,IAAK,KAAK,GAAI;gBAE/C,EAAE,MAAI,IAAE,MAAI,IAAE,MAAI;cAE1B,GAAO,GAAG,WAAW,SAAC,IAAD;AAAA,gBAAG,KAAI,GAAA,MAAE,IAAI,GAAA,MAAE,KAAI,GAAA;AAMvC,mBAJE,AAAA,GAAK,OAAL,UAAqC,AAAZ,GAAK,OAAO,QACrC,EAAe,KAAK,MAAM,GAAK,aAAa,eAE7C,IAAK,KAAK,KACJ,EAAE,MAAI,IAAE,MAAI,IAAE,MAAI;cAc1B,GAAO,GAAG,WAAW,WAAA;AAYpB,gBAXwB,AAApB,KAAK,eAAe,KAAG,GAAK,OAAO,MAAM,KAAK,SACzB,AAArB,KAAK,gBAAgB,KAAG,GAAK,OAAO,MAAM,KAAK,SAE/C,KAAK,YAAY,KAAK,uBAAuB,MAChD,GAAK,OAAO,MAAM,KAAK,KAAK,YAC5B,KAAK,aAAa,IAEf,KAAK,YAAY,KAAK,wBAAwB,MACjD,GAAK,OAAO,MAAM,KAAK,KAAK,aAC5B,KAAK,cAAc,IAGnB,KAAK,aAAa,KAAK,wBAAwB,MAC/C,KAAK,eAAe;AAFrB,mBAIC,EAAK,OAAO,QAAQ,KAAK,aAExB,KAAK,aAAa,KAAK,wBAAwB,MAC/C,KAAK,eAAe;AAEpB,qBAAK;cAGR,GAAO,GAAG,YAAY,WAAA;AAEK,YAAzB,EAAK,OAAO,MAAM,OAAO,UACzB,KAAK,YAAY,EAAK,OAAO,MAAM,OAEnC,MAAK,aAAa,EAAK,OAAO,MAAM,KAEX,AAAzB,EAAK,OAAO,MAAM,OAAO,UACzB,KAAK,YAAY,EAAK,OAAO,MAAM,OAEnC,MAAK,cAAc,EAAK,OAAO,MAAM,KACZ,AAAtB,EAAK,OAAO,UAAU,UAAU,KAAK,aAAa,EAAK,OAAO,UACjE,MAAK,cAAc,EAAK,OAAO;cAGjC,GAAO,GAAG,SAAS,WAAA;AAClB,cAAK,OAAO,QAAQ,CAAC,QAAQ,SAC7B,EAAK,OAAO,QAAQ;cAGrB,GAAO,GAAG,cAAc,SAAA,IAAA;AAAA,gBAAA,IACjB,IAAQ,KAAK,aAAa,KAAK;AAIrC,mBAHgB,AAAZ,GAAI,QAAQ,YAAY,aAAiB,MAC5C,IAAI,MAAJ,AAAA,MAAU,EAAM,aAAhB,QAAgB,AAAA,OAAA,SAAA,KAAW,GAAI,MAEzB;;;AAER,YCjFG,GAAA,IAAA,SAAA,IAAA,IAAA;AAAA,iBAAA,IAAA,OAAA,kBAAA,EAAA,WAAA,gBAAA,SAAA,SAAA,IAAA,IAAA;AAAA,eAAA,YAAA;eAAA,SAAA,IAAA,IAAA;AAAA,qBAAA,KAAA;AAAA,iBAAA,eAAA,MAAA,IAAA,KAAA,GAAA;aAAA,EAAA,IAAA;WAAA,IAAA,WAAA;ACIJ,wBAAA;AAGC,iBAAA,UAAU;;AA2DX,iBApDC,GAAA,UAAA,KAAA,SAAsB,IAAS,IAA/B;AACM,iBAAK,QAAQ,MAEX,KAAK,QAAQ,IAAM,KAAK,MAD9B,KAAK,QAAQ,MAAQ,CAAC;aAQxB,GAAA,UAAA,OAAA,SAAwB,IAAS,IAAjC;AAAA,gBAAA,IAAA;AACC,iBAAK,GAAG,IAAM,SAAA,IAAA;AAEb,qBADA,EAAK,IAAI,IAAM,KACR,GAAK;;aAQd,GAAA,UAAA,MAAA,SAAuB,IAAS,IAAhC;AACC,iBAAK,QAAQ,IAAM,OAAO,KAAK,QAAQ,IAAM,QAAQ,KAAO;aAS7D,GAAA,UAAA,OAAA,SACC,IADD;AAAA,qBAAA,KAAA,IAAA,IAAA,GAEC,IAAA,UAAA,QAAA;AAAA,iBAAA,IAAA,KAAA,UAAA;AAEA,gBAAI,KAA4B,GAAc;AACzC,iBAAK,QAAQ,OAAO,MAAK,QAAQ,MAAQ;AAC9C,qBAAW,IAAQ,KAAA,GAAA,KAAA,KAAK,QAAQ,KAAb,KAAA,GAAA,QAAA;AAAR,mBAAX,GAAA,KAAuC,KAAS,GAAK;AACrD,mBAAO;aAOR,GAAA,UAAA,YAAA,SACC,IADD;AAAA,qBAAA,KAAA,IAAA,IAAA,GAEC,IAAA,UAAA,QAAA;AAAA,iBAAA,IAAA,KAAA,UAAA;AAEK,iBAAK,QAAQ,OAAO,MAAK,QAAQ,MAAQ;AAC9C,qBAAW,IAAQ,KAAA,GAAA,KAAA,KAAK,QAAQ,KAAb,KAAA,GAAA,QAAA;AAAR,mBAAX,GAAA,KAAuC,GAAK,GAAc;aAE5D;aAAC,IAAA,WAAA;ACzED,iBADC,SAAmB,IAAsB,IAAzC;AAAmB,iBAAA,QAAA,IAAsB,KAAA,OAAA;;aLK7B,IAA8B,KAAK,aAAa,SAAS,GA+G3D,IAAiB,KFhHf,IAAkC,IAC3C,IAA2B,IA8HzB,IAA6C,IAKtC,KAAkD,EAC9D,MAAM,CAAC,GAAG,KACV,YAAY,CAAC,GAAG,KAChB,YAAY,CAAC,GAAG,KAChB,YAAY,CAAC,GAAG,KAChB,UAAU,CAAC,GAAG,KACd,QAAQ,CAAC,GAAG,KACZ,QAAQ,CAAC,GAAG,OAsEP,KAA0C,IAKnC,KAA+C,EAC3D,UAAU,CAAC,GAAG,IACd,QAAQ,CAAC,IAAI,IACb,OAAO,CAAC,IAAI,IACZ,aAAa,CAAC,IAAI,IAClB,QAAQ,CAAC,IAAI,MGzND,KAA+C,IAC/C,KAA8B,IAAA,KAAA,SAAA,IAAA;AAuF1C,qBACC,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IAVD;AAAA,gBAAA,IAAA,IAAA,KAAA;AAYC,gBAAI,KAAK,QAAQ;AAChB,oBAAM,IAAI,MACT,6BAA2B,KAA3B;AAGc,YAAZ,GAAK,OAAO,KACf,QAAQ,KACP,iHAGiB,AAAf,GAAQ,OAAO,KAClB,QAAQ,KACP,iHAGF,KAAA,GAAA,KAAA,MACC,IACA,IACA,IACA,GAAQ,IACR,GAAK,IACL,IACA,GACA,IACA,OATD,MAWA,GAAgB,KAAK,KAEhB,GAAc,OAAO,EAAY;AAAD,gBAAA,KAAA,SAE1B,IAAA;AACV,kBAAmB,KAAf,SAAS;AAAb,uBAAA;AACA,kBAAM,KAAK,KAAK,YAAY;AAE5B,kBADA,GAAG,SAAS,EAAE,cAAY,KACtB,CAAC,GAAG;AAAR,uBAAA;AAgBA,kBAdA,GAAG,MAAM,GAAG,OAAO,WAAW,OAE9B,GAAG,OAAO,iBAAiB,aAAa,WAAA;AACvC,mBAAG,UAAH;kBAED,GAAG,OAAO,iBAAiB,YAAY,WAAA;AACtC,mBAAG,UAAH;kBAED,GAAG,OAAO,iBAAiB,aAAa,SAAA,IAAA;AACvC,oBAAM,KAAM,GAAG,OAAO;AACtB,mBAAG,SAAS,KAAK,GAAE,QAAQ,GAAI,MAC/B,GAAG,SAAS,KAAK,GAAE,QAAQ,GAAI;kBAG5B,GAAG,YAAY,GAAG,gBAAgB;AACrC,oBAAM,KAAO,GAAG,SAAS;AACzB,mBAAG,SAAS,UACZ,GAAG,SAAS,KAAK;;;AAvBnB,qBAAW,MAAK,KAAK;AAArB,iBAAW;AA0BX,eAAK,eAAL,AAAA,MAAoB,GAAQ,QAA5B,QAA2B,AAAA,OAAA,SAAA,KAAO,GAAO,cACzC,GAAK,WAAW,EAAY,AAAA,MAAC,GAAK,QAAN,QAAK,AAAA,OAAA,SAAA,KAAO,GAAO,WAE3C,MAAY,MAAK,YAAY,MAAQ,KAErC,MAAiB,MAAK,0BAA0B,MAAQ,KAExD,GAAK,YACR,GAAc,GAAK,MAAM,GAAG,WAAW,SAAA,IAAA;AACtC,qBAAA,GAAK,SACF,KACA,GAAI,QACJ,uBACA,0BAAwB,GAAK,WAA7B;gBAKL,KAAK,cACD,GAAK,gBACR,GAAO,MAAM,GAAG,cAAc,WAAA;AAC7B,gBACC,gBAAc,GAAK,IAClB,MAAM,kBAAkB,SAAO,GAAK,eAAZ,KAC1B,EACC,mBAAiB,GAAK,IACrB,MAAM,kBAAkB,SAAO,GAAK,eAAZ;gBAG5B,KAAK,cACL,GAAK,SAAS,EAAE,cAAY,GAAK,KAEjC,GAAK,MAAM,GAAK,OAAO,WAAW,OAElC,GAAK,OAAO;AACZ,gBAAM,KAAU,SAAS,cAAc;AACvC,eAAQ,YAAY,mBACpB,GAAQ,KAAK,iBAAe,GAAK,IACjC,GAAQ,MAAM,UAAU,QACpB,GAAK,gBACR,IAAQ,MAAM,kBAAkB,SAAO,GAAK,eAAZ,MACjC,GAAQ,MAAM,sBAAsB,MAAI,GAAK,KAAT,MACpC,GAAQ,MAAM,sBAAsB,MAAI,GAAK,KAAT,MACpC,GAAQ,iBAAiB,SAAS,WAAA;AACjC,iBAAK,KAAK,IACV,OAAO,UAAU,GAAK,QAAQ,qBAAqB;gBAGpD,OAAO,SAAS,GAAK,QAAQ,aAAa,WAAA;AACzC,iBAAK,UAAL;gBAED,OAAO,SAAS,GAAK,QAAQ,YAAY,WAAA;AACxC,iBAAK,UAAL;gBAED,GAAK,OAAO,iBAAiB,aAAa,SAAA,IAAA;AACzC,kBAAM,KAAM,GAAK,OAAO;AACxB,iBAAK,SAAS,KAAK,GAAE,QAAQ,GAAI,MACjC,GAAK,SAAS,KAAK,GAAE,QAAQ,GAAI;gBAElC,EAAE,iBAAiB,YAAY;AAE/B,gBAAM,KAAY,EAAa;AAC/B,qBAAW,MAAK;AAAW,iBAAK,MAAK,GAAU;AAApB,mBAC3B,KAAK,mBAAmB,GAAA;;AAE1B,iBArJ8B,EAAA,GAAA,KAqJ9B;UArJ8B,KAAK,SJ1EtB,KAA4B,IAAA,KAAA,SAAA,IAAA;AAcxC,qBACC,IACA,IACA,IACA,IAEA,IAND;AAAA,YAAA,OAAA,UAMC,MAAA,WAAA;;AAND,gBAAA,KAQC,GAAA,KAAA,MACC,IACgB,AAAhB,OAAO,MAAS,aAAa,KAAK,IACjB,AAAjB,OAAO,MAAU,aAAa,IAAI,IAClB,AAAhB,OAAO,MAAS,aAAa,CAAC,GAAG,KAAK,EAAY,KAClD,OALD;AAQoB,YAAhB,OAAO,MAAS,cAAY,IAAK,WAAW,KAC3B,AAAjB,OAAO,MAAU,cAAY,IAAK,YAAY,KAC9B,AAAhB,OAAO,MAAS,cACnB,IAAK,eAAe,WAAA;AAAM,qBAAA,EAAY;gBACvC,GAAe,KAAK;AACpB,gBAAM,KAAY,EAAY;AAC9B,qBAAW,MAAK;AAAW,iBAAK,MAAK,GAAU;AAApB,mBAC3B,KAAK,oBAAoB,GACrB,GAAK,UAAU,KAAK,qBAAqB,GAAK,SACjD,KAAK,iBAAL;;AAEH,iBApC6B,EAAA,GAAA,KAoC7B;UApC6B,KAAK,UAAA,KAAA,SAAA,IAAA;AAwDjC,qBACC,IACA,IACA,IACA,IACA,IACA,IAEA,IARD;AAAA,YAAA,OAAA,UAMC,MAAA,CAAgC,YAAA,AAAA,OAAA,UAEhC,MAAA,WAAA;;AARD,gBAAA,KAUC,GAAA,KAAA,MAAM,IAAM,IAAM,IAAO,IAAM,OAA/B;AAVD,mBAXA,GAAA,OAAO,YAuBN,GAAK,OAAO,GAAS,IACrB,GAAK,OAAO,GAAS,IAErB,GAAK,UAAU,GAAQ,IAAI,SAAA,IAAA;AAAM,qBAAA,KAAK,SAAS,OAAO,KAAK,aAAa;gBAExE,KAAK,iBAAiB,KAAK,KAC3B,KAAK,iBAAiB,GAAK,MAAM,IAAA;;AAEnC,iBAnCqC,EAAA,GAAA,KAmCrC;UAnCqC,KAAA,KAAA,SAAA,IAAA;AA0DpC,qBACC,IACA,IACA,IACA,IAJD;AAAA,gBAAA,KAAA;AAAA,mBAMyB,AAApB,OAAO,MAAa,YAAU,MAAW,KAAK,QAAQ,MAC1D,KAAA,GAAA,KAAA,MACC,IACG,EACF,GAAS,UADP,uCAEmC,KAFnC,QAGH,GAAS,YAAY,KAAK,MAAM,IAAM,OACtC,KAAK,QAAQ,GAAS,MAAM,QAN7B,MASA,KAAK,QAAQ,GAAS,MAAM,KAE5B,GAAK,eAAe,IAChB,EAAU,OACb,IAAK,QAAQ,MACb,GAAS,UAAU,KAEf,MAAM,SAAS,GAAK,gBACxB,MAAO,SAAS,GAAK,cAEF,AAAhB,OAAO,MAAS,YACnB,IAAK,QAA4B,MAAnB,IAAS,KAAK,KAAW,GAAK,KAAK,KAEjD,GAAK,SAAqD,KAA5C,EAAS,GAAG,EAAS,GAAS,KAAK,GAAG,KACjC,KAAf,GAAS,MAAS,IAAK,SAAS,MAExB,AAAT,OAAS,aAAW,KAAK,MAAM,IAAM,SAAS,KAAK,KACvD,GAAS,YAAY,MAAM,KAA3B;;AAEF,iBAjDS,EAAA,GAAA,KAiDT;UAjDS,KAAA,KAAA,SAAA,IAAA;AA8DR,qBACC,IACA,IACA,IACA,IAJD;AAAA,gBAAA,KAAA;AAMC,gBAAI,IAAgB;AACnB,kBAAI,CAAC,GAAe,SAAS;AAC5B,sBAAM,IAAI,MACT,wCAAsC,KAAtC;AAEF,mBAAiB,GAAe,UAAU,GAAG,GAAe,SAAS;;AAE9C,YAApB,OAAO,MAAa,YAAU,MAAW,KAAK,QAAQ;AAC1D,gBAAI,KAAiC,GAAS,KAAK;AAAnD,mBACsB,AAAlB,OAAkB,IAAG,KAAgB,YACpC,MAAA,aACL,KAAA,GAAA,KAAA,MACC,IACA,6CAA2C,EAC1C,GAAS,UADV,8BAE6B,KAF7B,SAEiD,KAFjD,QAGA,GAAS,YAAY,KAAK,MAAM,GAAG,OACnC,CAAC,IAAI,GAAG,KACR,KAAK,QAAQ,QAAQ,WAPtB,MASA,GAAS,UAAU,IACnB,GAAK,cAAc,IACnB,GAAK,QAAQ,MAAM,GAAK,KAAK,KACV,MAAf,GAAS,MAAU,IAAK,SAAS,IACrC,KAAK,iBAAiB,KAAK,GAAK,OAC5B,MACH,GAAO,MAAM,GAAG,cAAc,SAAA,IAAA;AAAA,qBACzB,GAAK,SAAe,EAAI,IAAA,CAAK,OACrB;gBAGd,KAAK,QAAQ,QAAQ,UACrB,GAAS,YAAY,MAAM,KAA3B;;AAEF,iBAnDoC,EAAA,GAAA,KAmDpC;UAnDoC,KAAA,KAAA,SAAA,IAAA;AAmEnC,qBACC,IACA,IACA,IACA,IACA,IALD;AAAA,gBAAA,KAAA;AAO0B,YAArB,OAAO,MAAc,YAAU,MAAY,KAAK,QAAQ,MACnC,AAArB,OAAO,MAAc,YAAU,MAAY,KAAK,QAAQ;AAC5D,gBAAM,KAAO,KAAK,QAAQ,GAAU,MAAM;AAE1C,gBAAI,GAAU,YAAY,GAAU,WAAW;AAC9C,kBAAM,KAAO;AACb,mBAAY,IACZ,KAAY;;AACZ,mBACD,KAAA,GAAA,KAAA,MACC,IACG,EACF,GAAU,UADR,8BAE0B,GAAU,KAAK,gBAFzC,UAE8D,EAChE,GAAU,UAHR,qCAKD,GAAU,KAAK,gBALd,SAKkC,KALlC,QAMoB,MAAtB,GAAU,YAAuC,IAAtB,GAAU,aACrC,KAAK,MAAM,IAAM,OAClB,OAVD,MAYA,GAAK,OAAO,IACZ,GAAK,eAAe,IACpB,GAAK,eAAe,IACpB,GAAK,QAAQ,MAAO,GAAK,KAAK,KAC9B,GAAU,UAAU,KAAK,KACzB,GAAU,UAAU,KAAK,KAEzB,KAAK,MAAM,IAAM,SAAS,KAAK,KAC/B,KAAK,mBACL,GAAU,YAAY,MAAM,KAA5B;;AAEF,iBArDyD,EAAA,GAAA,KAqDzD;UArDyD,KA0DnD,KAAkB,CAAC,GAAG,GAAG,GAAG,GAAG,KAAb,KAAA,SAAA,IAAA;AAavB,qBAAY,IAAc,IAAe,IAAY,IAArD;AAAA,YAAA,OAAA,UAAqD,MAAA;AAAA,gBAAA,KAAA,MAC9C,KAAW,KAAK,QAAQ,QACxB,KAAU,SAAS,GAAK;AAAN,mBACxB,KAAA,GAAA,KAAA,MACC,IACA,qDAAmD,KAAnD,aAAmE,KAAnE,QACA,KAAK,MAAM,IAAM,WAAW,MAAM,MAC/B,GAAS,YAAY,KAAK,MAAM,IAAM,QAEtC,EAAA,IAEC,GAEA,EAAS,KAAU,GAAG,GAAgB,SAAS,MAGpB,IAA3B,EAAS,KAAU,GAAG,KAC1B,KAAK,QAAQ,GAAS,MAAM,QAd7B,MAgBA,GAAK,OAAO,IACZ,GAAK,OAAO,IACZ,GAAK,QAAQ,MAAM,GAAK,KAAK,KAC7B,GAAO,GAAG,oBAAoB,SAAA,IAAA;AAAQ,qBAAC,GAAK,SAAS,KAAO,KAAQ;gBAC/D,KAAK,MAAM,IAAM,WAAY,MAAM,OACvC,GAAO,cAAc,OAAO,GAAG,OAAO,WAAA;AACjC,iBAAS,UAAuB,CAAZ,OAAY,IAAI,KAAqB,KAAf,MAAU,OACvD,KAAK,OAAO,GAAK;gBAEP,AAAT,OAAS,aAAW,KAAK,MAAM,IAAM,SAAS,KAAK,KACvD,KAAK,QAAQ,OAAO,YAAY,MAAM,KAAK,QAAQ,SAAnD;;AAEF,iBA1CiE,EAAA,GAAA,KA0CjE;UA1CiE,KA+CpD,KAAmB,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,SAAS,KAiBvD,KAAqB,CAC1B,KACA,OACA,MACA,OACA,KACA,KACA,KACA,KACA,KACA,OACA,MACA,OACA,QAb0B,KAAA,SAAA,IAAA;AA6B1B,qBACC,IACA,IACO,IACP,IAKA,IACA,IAVD;AAAA,YAAA,OAAA,UAIC,MAAQ,KAAK,MAAM,IAAM,WAAW,MAAM,SAAS,GAAK,eACrD,OACA,GACC,UAAS,GAAK,cAAc,KAAM,IAAmB,SAAS,MAD7C,AAAA,OAAA,UAIrB,MAAmB,KAAK,MAAM,IAAM,WACpC,MAAM,SAAS,GAAK,eACjB,OACS,AAAT,OAAS,IACT,MAEC,KAAkB;AAhBvB,gBAAA,KAkBC,GAAA,KAAA,MACC,IACA,wDAAsD,KAAtD,QACA,KAAK,MAAM,IAAM,WAAW,MAAM,SAAS,GAAK,eAAhD,AACG,OADH,QACO,AAAJ,OAAI,SAAJ,KAAQ,IACR,EAAkB,KACrB,KAAK,QAAQ,UAAU,QANxB;AAlBD,mBAGQ,GAAA,OAAA,IAdR,GAAA,SAAA,MACA,GAAA,OAAO,IAoCQ,AAAV,OAAU,QACb,QAAQ,KACP,wEAGA,MAAK,MAAM,IAAM,WAAW,MAAM,SAAS,GAAK,iBACjD,AAAA,OAAA,UAEA,QAAQ,KACP,uEAEuB,AAArB,OAAqB,QACxB,GAAO,GAAG,SAAS,WAAA;AACd,mBAAK,gBAAgB,MAAkB,KAAK,OAAO,GAAK;gBAE9D,GAAK,QAAQ,MAAQ,GAAK,KAAK,KACjB,AAAV,OAAU,QACb,GAAO,GAAG,cAAc,SAAA,IAAA;AACvB,kBAAM,KAAU,GAAK,SAClB,IAAI,KAAK,eAAe,KAAQ,GAAO,iBACvC;AAGH,qBAFA,KAAK,kBAAL,WAAqC,IAE9B,KAAO;gBAEhB,KAAK,eAAL,OAA8B,KAAK,KACtB,AAAT,OAAS,aAAW,KAAK,MAAM,IAAM,SAAS,KAAK,KAA/B;;AAE1B,iBAnEiE,EAAA,GAAA,KAmEjE;UAnEiE,KAAA,KAAA,SAAA,IAAA;AA+EhE,qBAAY,IAAc,IAAsB,IAAY,IAA5D;AAAA,YAAA,OAAA,UAA4D,MAAA;AAA5D,gBAAA,KACC,GAAA,KAAA,MACC,IACA,wBAAsB,KAAtB,0BAAmD,KAAnD,QACA,EAAA,IAAO,IAAgC,IAA5B,SAAS,GAAK,cACzB,KAAK,QAAQ,SAAS,QAJvB;AAD+C,eAAA,OAAA,IARhD,GAAA,OAAO;AAeN,gBAAM,KAAU,SAAS,GAAK;AAA9B,mBACA,GAAK,QAAQ,MAAM,GAAK,KAAK,KAC7B,GAAO,GAAG,UAAU,SAAA,IAAA;AACnB,qBAAA,GAAK,SAAS,KAAO,KAAK,YAAY,KAAS,MAAM;gBAEjD,KAAK,MAAM,IAAM,WAAY,MAAM,OACvC,GAAO,GAAG,SAAS,WAAA;AACd,mBAAK,mBAAmB,EAAA,IAAO,IAAc,IAAV,OACtC,KAAK,OAAO,GAAK;gBAEP,AAAT,OAAS,aAAW,KAAK,MAAM,IAAM,SAAS,KAAK,KAA/B;;AAE1B,iBA7BgE,EAAA,GAAA,KA6BhE;UA7BgE,KAAA,KAAA,SAAA,IAAA;AA4C/D,qBACC,IACA,IACA,IACA,IACO,IACP,IACA,IAPD;AAAA,gBAAA,IAAA,KASC,GAAA,KAAA,MACC,IACA,sCAAoC,SAClB,AAAjB,OAAO,MAAU,aAAa,OAAU,IACxC,KAFD,cAGa,KAHb,QAIA,IACA,OAPD;AAAA,mBAJO,GAAA,QAAA,IAjBR,GAAA,OAAO,UA8BN,GAAK,QAAQ,CAAA,MAAA,AAAC,OAAD,QAAM,AAAL,OAAK,SAAL,KAAS,GAAO,iBAAjB,QAAiB,AAAA,OAAA,SAAA,KAAe,SAAS,GAAK,KAAK,KAChE,GAAK,WAAW,EACf,MAAI,IACJ,SAA2B,CAAjB,OAAO,MAAU,aAAa,OAAU,MAAS,IAC3D,SAAO,AAAE,OAAF,QAAK,AAAH,OAAG,SAAH,SAAA,GAAK,SACd,QAAM,AAAE,OAAF,QAAK,AAAH,OAAG,SAAH,SAAA,GAAK,UAEd,KAAK,SAAS,KAAK,GAAK,WACxB,KAAK,eAAe,OAAO,KAAK,KAChC,KAAK,eAAe,KAAK,KAAzB;;AAEF,iBA1CmC,EAAA,GAAA,KA0CnC;UA1CmC,KSpbtB,KAAsB,IAAA,KAAA,WAAA;AA8EnC,iBAhDC,SACQ,IACP,IACO,GACP,IACA,IACA,IACA,IACA,IACA,IATD;AAAA,YAAA,OAAA,UAIC,MAAA,QAAA,AAAA,OAAA,UACA,MAAA,SAAA,AAAA,OAAA,UACA,MAAA,OAAA,AAAA,OAAA,UACA,MAAA,OAAA,AAAA,OAAA,UACA,MAAA,OAAA,AAAA,OAAA,UACA,MAAA;AAAA,gBAAA;AARO,iBAAA,OAAA,IAEA,KAAA,QAAA,GAQP,KAAK,UAAU,IAQT,KAAK,UANK,AAAZ,OAAY,SACV,KAKe,KAHlB,QAAO,KAAK,KAAK,OAAO,OAAO,SAAA,IAAA;AAAO,qBAAA,CAAC,MAAM,SAAS;eAAO,SAC7D,GACC,aAEgB,IAEL,AAAX,OAAW,QAAM,MAAK,SAAS,KACb,AAAlB,OAAO,MAAW,YAAU,MAAK,SAAS,KACzC,CAAA,OAAA,SAAgC,AAAX,OAAW,QAAoB,AAAX,OAAW,WACxD,MAAK,SAAS,KAAK,MAAM,SAAS,KAAK,WAAW,GAAG,SAAS,KAEnC,AAAxB,OAAO,MAAiB,YAAU,MAAK,eAAe,KACrD,CAAA,OAAA,SAAsC,AAAjB,OAAiB,QAA0B,AAAjB,OAAiB,WACpE,MAAK,eACJ,KAAK,MAAM,SAAS,KAAK,WAAW,GAAG,eAAe,KACpD,MAAK,MAAK,MAAM,KAEnB,KAAK,QADQ,AAAV,OAAU,SAMF,MAJV,KAAK,MACJ,OAAO,KAAK,KAAK,OACf,OAAO,SAAA,IAAA;AAAO,qBAAA,CAAC,MAAM,SAAS;eAC9B,OAAO,YACR,QACc,IAIlB,KAAK,UAAU,GAAW,IAC1B,KAAK,WAAW,EAAY,AAAA,MAAC,GAAW,QAAZ,QAAW,AAAA,OAAA,SAAA,KAAO,GAAO,WACrD,KAAK,MAAM,KAAK,WAAW,MAC3B,GAAY,KAAK;;aVzEN,KAAoC,IAAA,KAAA,SAAA,IAAA;AAShD,qBAAY,IAAc,IAAc,IAAxC;AAAA,gBAAA,KACC,GAAA,KAAA,MAAM,IAAM,IAAM,EAAY,QAA9B;AADD,mBAEC,EAAc,IAAM,EAAgB,MACpC,GAAmB,KAAK,KACpB,GAAK,OAAO,KAAK,yBAAyB,GAAK,SAClD,KAAK,qBAAL;;AAEH,iBAdiC,EAAA,GAAA,KAcjC;UAdiC,KAAK,cAAA,KAAA,SAAA,IAAA;AA0BrC,qBACC,IACA,IACA,IACA,IAJD;AAAA,YAAA,OAAA,UAIC,MAAA,EAAW,IAAM,EAA0C,MAA/B,KAAK,iBAAiB,SAAe;AAJlE,gBAAA,KAMC,GAAA,KAAA,MACC,IACA,aAAW,QAAQ,MAAnB,gBACwB,CAAvB,EAAS,QAAc,IAAI,KAAK,OADjC,uBAEqB,MAAI,QAAM,KAAN,SAAgB,KACzC,OALD;AAND,mBAaC,GAAK,WAAW,IAChB,GAAK,QAAQ,MAAqC,OAA/B,KAAK,iBAAiB,QACzC,KAAK,iBAAiB,KAAK,KAA3B;;AAEF,iBA3BqC,EAAA,GAAA,KA2BrC;UA3BqC,KAAA,KAAA,SAAA,IAAA;AAuCpC,qBACC,IACA,IACA,IACA,IAJD;AAAA,YAAA,OAAA,UAIC,MAAA,EAAW,IAAM,EAA0C,MAA/B,KAAK,iBAAiB;AAJnD,gBAAA,KAMC,GAAA,KAAA,MACC,IACA,aAAW,QAAQ,MAAnB,gBACwB,CAAvB,EAAS,QAAc,IAAI,KAAK,OADjC,iBAEe,MAAI,QAAM,KAAN,SAAgB,KACnC,OALD;AAND,mBAaC,GAAK,WAAW,IAChB,GAAK,QAAQ,MAAoC,OAA9B,KAAK,gBAAgB,QACxC,KAAK,gBAAgB,KAAK,KAA1B;;AAEF,iBA3BoC,EAAA,GAAA,KA2BpC;UA3BoC,KAAA,KAAA,SAAA,IAAA;AAyCnC,qBACC,IACA,IACA,IACA,IAJD;AAAA,gBAAA,KAAA,MAMO,KACe,AAApB,OAAO,MAAa,WAAW,KAAW,KAAK,QAAQ,KACpD,KAAyB,MACzB,KAAM;AACV,gBAA0B,AAAtB,GAAe,OAAO,GAAG;AAC5B,sBAAQ;qBACF;AACJ,uBAAO,CAAC,GAAG,IACX,KAAM;AACN;qBACI;AACJ,uBAAO,CAAC,GAAG,IACX,KAAM;AACN;;AAEA,sBAAqC,KAAjC,KAAK,MAAM,IAAM,cAAmB;AACvC,4BAAQ,KAAK;AACb;;AAED,uBAAe,AAAT,OAAS,IAAI,IAAoC,IAAhC,KAAK,MAAM,IAAM;;AAG1C,iBAAO,cAAc,OAAO,GAAG,OAAO,WAAA;AACjC,qBAAK,QAAQ,OAAO,UAAU,MAAK,KAAK,IAAI,GAAK;;;AAEhD,mBAAM,KAAK,MAAM,IAAM;AAAvB,mBACP,KAAA,GAAA,KAAA,MACC,IACA,aAAW,KAAX,UACmB,CAAlB,EAAS,QAAS,IAAI,GAAe,SAAS,GAAe,UAD9D,MAEI,MAAQ,QAAM,KAAN,SAAoB,KAJjC,AAKC,OALD,QAKK,AAAJ,OAAI,SAAJ,KAAQ,KAAK,QAAQ,GAAe,MAAM,QAL3C,MAOA,KAAK,QACJ,GAAe,MACN,AAAT,OAAS,aAAsB,AAAT,OAAS,aAAa,IAAI,KAGjD,GAAe,cAAc,MAAQ,IACrC,GAAK,cAAc,IAEnB,GAAK,QAAQ,MAA2B,MAApB,GAAe,KAAW,GAAK,KAAK,KAExD,GAAK,SAA2D,KAAlD,EAAS,GAAG,EAAS,GAAe,KAAK,GAAG,KACjC,KAArB,GAAe,MAAS,IAAK,SAAS,KAChB,AAAtB,GAAe,OAAO,KAAG,IAAK,SAAS,KAAA;;AAE7C,iBAjEqE,EAAA,GAAA,KAiErE;UAjEqE,KAAA,KAAA,SAAA,IAAA;AA4EpE,qBACC,IACA,IACA,IACA,IACA,IALD;AAAA,gBAAA,KAAA;AAOyB,YAApB,OAAO,MAAa,YAAU,MAAW,KAAK,QAAQ;AAAb,gBACvC,KAAkB,CACvB,GAAS,YACT,KAAK,IACL,cAAoB,KAAW,GAAS,WAAxC,SAEK,KAAM,EAAA,IAAO,KAAK,GAAS,KAAd,CAAoB,OAApB,QAAwB,AAAJ,OAAI,SAAJ,KAAQ,KAAkB,IAAZ,MAAO;AAAhD,mBACZ,KAAA,GAAA,KAAA,MACC,IACA,aAAW,QAAQ,MAAnB,4BAAiD,GAAS,SAA1D,MACC,MAAQ,QAAM,KAAN,SAAoB,KAE7B,OALD,MAOA,GAAK,QAAQ,OAAqB,MAAd,GAAS,KAAW,GAAK,KAAK,KAElD,GAAK,SAAqD,KAA5C,EAAS,GAAG,EAAS,GAAS,KAAK,GAAG,KACjC,KAAf,GAAS,MAAS,IAAK,SAAS,KAChB,AAAhB,GAAS,OAAO,KAAG,IAAK,SAAS,KACrC,GAAS,kBAAkB,KAAK,EAAE,KAAG,IAAE,QAAQ,OAA/C;;AAEF,iBArC2C,EAAA,GAAA,KAqC3C;UArC2C,KAAA,KAAA,SAAA,IAAA;AA8C1C,qBACC,IACA,IACA,IAHD;AAAA,gBAAA,KAAA;AAKyB,YAApB,OAAO,MAAa,YAAU,MAAW,KAAK,QAAQ;AAC1D,gBAAM,KAAkB,CACvB,GAAS,YACT,IACA,cAAoB,KAAW,GAAS,WAAxC;AAHD,mBAKA,KAAA,GAAA,KAAA,MACC,IACA,2BAAyB,GAAS,SAAlC,MACC,MAAQ,QAAM,KAAN,SAAoB,KAE7B,OALD,MAOA,GAAK,QAAQ,OAAqB,MAAd,GAAS,KAAW,GAAK,KAAK,KAElD,GAAK,SAAqD,KAA5C,EAAS,GAAG,EAAS,GAAS,KAAK,GAAG,KACjC,KAAf,GAAS,MAAS,IAAK,SAAS,KAChB,AAAhB,GAAS,OAAO,KAAG,IAAK,SAAS,KACrC,GAAS,gBAAgB,IAAA;;AAE3B,iBAhCwC,EAAA,GAAA,KAgCxC;UAhCwC,KAAA,KAAA,SAAA,IAAA;AA6CvC,qBAAY,IAAc,IAAY,IAAtC;AAAA,gBAAA,KAAA,MACO,KAAU,SAAS,GAAK;AAAN,mBACxB,KAAA,GAAA,KAAA,MACC,IACA,aAAW,QAAQ,EAAA,IAAO,IAAc,IAAV,OAA9B,gCACC,MAAQ,QAAM,KAAN,SAAoB,KAE7B,KAAK,QAAQ,SAAS,QALvB,MAOA,GAAK,OAAO,UACZ,GAAK,OAAO,IACZ,GAAK,QAAQ,MAAO,GAAK,KAAK,KACzB,KAAK,MAAM,IAAM,WAAY,MAAM,OACvC,GAAO,GAAG,SAAS,WAAA;AACd,mBAAK,mBAAmB,EAAA,IAAO,IAAc,IAAV,OAAc,KAAK,IAAI,GAAK;gBADpE;;AAIH,iBA1BU,EAAA,GAAA,KA0BV;UA1BU,KAAA,KAAA,WAAA;AW5MT,sBACQ,IACA,IACP,GAHD;AACQ,iBAAA,OAAA,IACA,KAAA,OAAA,IAGuB,AAA1B,OAAO,KAAmB,YAC7B,KAAiB,KAAK,QAAQ,KAE9B,KAAK,MADF,aAA0B,KAAK,SACvB,EAAY,CACtB,EAAe,YACf,IACA,aAA0B,KACvB,EAAe,WADlB,WAIc,GAChB,KAAK,YAAY,OAAO,KAAK,KAAK,aAAa,UAAU,MAE/B,AAAzB,EAAK,OAAO,MAAM,OAAO,UACzB,OAAO,KAAK,KAAK,aAAa,UAAU,EAAK,OAAO,MAAM,MAE1D,MAAK,aAAa,EAAK,OAAO,MAAM,KAEX,AAAzB,EAAK,OAAO,MAAM,OAAO,UACzB,OAAO,KAAK,KAAK,aAAa,UAAU,EAAK,OAAO,MAAM,MAE1D,MAAK,cAAc,EAAK,OAAO,MAAM;;AAExC,iBAAA;aAAC,KAAA,WAAA;AAiCA,sBACC,IACA,GACA,IACA,IACO,IACP,IACA,IAPD;AAAA,YAAA,OAAA,UAOC,MAAgB,KAAK,aAAa,SAAS,IAFpC,KAAA,MAAA,IA5BR,KAAA,OAAO;AAgCN,gBAAM,KAAY,KAAK,aAAa,KAAQ;AAC5C,iBAAK,OAAL,AAAY,OAAZ,QAAgB,AAAJ,OAAI,SAAJ,KAAQ,GAAU,MAC9B,KAAK,SAAS,GACd,KAAK,UACuB,AAA3B,OAAO,MAAoB,WACxB,WAAA;AAAM,qBAAA;gBACN,IACJ,KAAK,OAAO,IACR,KACH,MAAK,MAAM,GAAK,IAChB,KAAK,OAAO,GAAK,IAEC,AAAd,KAAK,SAAS,KACjB,QAAQ,KAAK,0DACd,KAAK,UAAU,GAAK,MAEpB,MAAK,MAAM,GAAU,KACjB,cAAqB,MACxB,MAAK,OAAO,GAAU,MACtB,KAAK,UAAU,GAAU,WAG3B,KAAK,aAAa,OAAO,IAAO,GAAG,OAEZ,AAAtB,EAAK,OAAO,UAAU,UACtB,KAAK,aAAa,UAAU,EAAK,OAAO,SAExC,MAAK,cAAc,EAAK,OAAO;;AAElC,iBAAA;aAAC,KAAA,SAAA,IAAA;AASA,qBACC,IACA,IACA,IAHD;AAAA,gBAAA,KAAA;AAAA,mBAKyB,AAApB,OAAO,MAAa,YAAU,MAAW,KAAK,QAAQ,MAE1D,KAAA,GAAA,KAAA,MACC,MACA,WAAS,KAAT,wBAAuC,KAAvC,YACA,SAAO,GAAS,QAEhB,WAAA;AAAM,qBAAoC,OAAnC,GAAyB;eAChC,WAAA;AACC,qBAAC,GAEE,UAAU;kBATf,MAAA;;AAYF,iBA1BqC,EAAA,GAAA,KA0BrC;UA1BqC,KAAA,KAAA,WAAA;ACrFrC,iBArBC,SACQ,IACP,IACO,GACA,IAJR;AAMC,gBAAA,AAAA,OAAA,UAFO,MAAA,QAHA,KAAA,OAAA,IAEA,KAAA,MAAA,GACA,KAAA,UAAA,IAEH,CAAC,EAAI,SAAS;AACjB,oBAAM,IAAI,MACT,0CAAwC,IAAxC;AAEG,kBACJ,MAAK,OAAO,UAAQ,EAAe,KAAK,MAAM,SAAS,KAA3C,QAAmD,KAChE,KAAK,MAAM,EAAI,OAAO,GAAG,EAAI,SAAS,IACtC,EAAY,KACZ,KAAK,OAAO,CAAC,GAAK,IAAI,GAAK,KAC3B,KAAK,WAAW,GAAK,IAEjB,KACH,KAAK,cAAc,OAAO,KAAK,KAAK,eAAe,UAAU,OACzD,KAAK,MAAM,KAAK;;aCgBjB,KAAS,EACd,OAAQ,MACR,IAAK,MAIL,gBAAgB,GAChB,UAAU,IACV,cAAc,IACd,aAAa,OACb,eAAa,IACb,mBAAmB,IACnB,kBAAgB,GAChB,iBAAe,IACf,gBAAc,IACd,aAAW,IACX,MAAI,GACJ,QAAQ,IACR,UAAQ,IACR,SAAO,IACP,eAAa,IACb,MAAI,IACJ,iBAAe,IACf,gBAAc,IACd,gBAAc,IACd,eAAa,IACb,eAAa,IACb,cAAY,IACZ,eAAa,IACb,aAAW,IACX,gBAAc,IACd,iBAAe,IACf,mBAAiB,IACjB,uBAAqB,IACrB,oBAAkB,IAClB,kBAAgB,IAChB,oBAAkB,IAClB,YAAU,IACV,aAAW,IACX,iBAAe,IACf,MAAI,IACJ,YAAU,GACV,aAAW,GACX,eRiJ2B,WAAA;AAC3B,eAAK,aAAa,OAEjB,KAAK,UAAU,KAAK,wBACa,IAAjC,KAAK,QAAL,QAAwB,UACxB,KAAK,WAEL,KAAK,OAAO,KAAK,QAAQ;WQvJ1B,aR2IyB,SAAC,IAAD;AACzB,iBAAA,KAAK,iBAAiB,MAAM,KAAK,SAAS,GAAG,QAAQ,GAAG;WQ3IxD,OAAO,EACN,cAAY,SX8Db,IACA,IACA,IACA,IAAA;AAAA,iBAAA,AAAA,OAAA,UAAA,MAAA,QAAA,EAAA,MAAA,QAAA,QAAA,WAAA;AAAA,gBAAA,IAAA,IAAA,IAAA,IAAA;AAAA,mBAAA,EAAA,MAAA,SAAA,GAAA;AAAA,sBAAA,EAAA;qBAAA;AAQA,uBAAW,MALP,AAAA,OAAA,UACC,EAAC,EAAmB,OAAO,GAAmB,MAAQ,IAC1D,KAAS,EAAmB,QAEvB,KAA6C,IACnC;AACf,uBAAY,MAAK,CAAC,IAAQ,GAAiB,IAAG;AAG/C,uBAAW,MAAK,KAAK;AACpB,uBAAY,KAAK,MAAM,IAAG,KAAK,iBAAiB,GAC/C,GAAE,cACC,CAAC,IAAQ,KAAK,MAAM,IAAG;AAG3B,yBAFD,KAAA,GAEC,KAAA,CADA,KACA,CAAA,GAAM,EACL,KAAc,EAAa,MAAQ,IACnC,IACA,IACA,CAAC,IAAI,KACL,CACgB,KAAd,MAAS,IAMT,KALA,QAAO,OAAO,IAAa,OAC3B,SAAC,IAAK,IAAN;AAAgB,2BAAA,EAAS,IAAK,GAAM;qBACpC,aAEA,KAGF,SAAA,IAAA;AACC,2BAAO,IAAI,QAAQ,SAAA,IAAA;AAElB,0BAAI,EAAa,QAAU,IAAM;AAChC,4BAAM,KAAM,IAAI;AAChB,2BAAI,iBAAiB,QAAQ,WAAA;AAC5B,6BAAI,UAAU,IAAK,GAAG,IACtB;4BAED,GAAI,MAAM,EAAa,KACvB,GAAI,cAAc;;AACZ;;;qBAzBV;AAAA,yBAFD,GAAA,MAAA,QAAA,GAAA,OAAA,CAEC,EAAA,WAFD,CAAA;;;;WWhFC,WAAS,SX6IV,IACA,IACA,IACA,IAAA;AAAA,iBAAA,AAAA,OAAA,UAAA,MAAA,QAAA,EAAA,MAAA,QAAA,QAAA,WAAA;AAAA,gBAAA,IAAA,IAAA,IAAA,IAAA;AAAA,mBAAA,EAAA,MAAA,SAAA,GAAA;AAAA,sBAAA,EAAA;qBAAA;AAOA,uBAAW,MALP,AAAA,OAAA,UACC,EAAC,GAAgB,OAAO,IAAgB,MAAQ,IACpD,KAAS,GAAgB,QAEpB,KAA0C,IAChC;AACf,uBAAS,MAAK,CAAC,GAAc,IAAG,IAAI;AAGrC,uBAAW,MAAK,KAAK;AACpB,uBAAS,KAAK,YAAY,IAAG,OAAO,iBAAiB,GAAS,MAAK,CAClE,KAAK,YAAY,IAAG,YACpB;AAID,yBAFD,KAAA,GAEC,KAAA,CADA,KACA,CAAA,GAAM,EACL,KAAc,EAAa,MAAQ,IACnC,IACA,IACA,CAAC,IAAI,KACL,CAME,KALA,QAAO,OAAO,IAAU,OACxB,SAAC,IAAK,IAAN;AAAgB,2BAAA,EAAS,IAAK,GAAM;qBACpC,aAEA,IAEc,KAAd,MAAS,KAEX,SAAA,IAAA;AACC,2BAAO,IAAI,QAAQ,SAAA,IAAA;AAElB,0BAAI,EAAa,QAAU,IAAM;AAChC,4BAAM,KAAM,IAAI;AAChB,2BAAI,iBAAiB,QAAQ,WAAA;AAC5B,6BAAI,UAAU,IAAK,GAAG,IACtB;4BAED,GAAI,MAAM,EAAa,KACvB,GAAI,cAAc;;AACZ;;;qBAzBV;AAAA,yBAFD,GAAA,MAAA,QAAA,GAAA,OAAA,CAEC,EAAA,WAFD,CAAA;;;;WW/JC,gBAAc,SXyMf,IACA,GACA,IAAA;AAAA,cAAA;AAAA,iBAAA,AAAA,OAAA,UAAA,MAAA,OAAA,EAAA,MAAA,QAAA,QAAA,WAAA;AAAA,gBAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA;AAAA,mBAAA,EAAA,MAAA,SAAA,IAAA;AAAA,sBAAA,GAAA;qBAAA;AAMc,yBAHR,KAAS,SACb,cAAc,UACd,WAAW,OACC,CAAA,GAAM,EACnB,KAAc,EAAa,MAAQ;qBADtB;AAKd,uBALM,KAAQ,GAAA,QAGR,KAAU,CAAC,GAAM,OAAO,GAAM,SAEpC,KAAA,GAAoB,KAAA,GAAA,KAAA,GAAA,QAAA;AAAT,yBAAK,GAAA,KACG,KAAd,GAAM,GAAG,KAAU,GAAQ,MAAI,IAAQ,KAAmB,KAAd,GAAM,GAAG,KACvC,KAAd,GAAM,GAAG,KAAU,GAAQ,MAAI,IAAQ,KAAmB,KAAd,GAAM,GAAG;AAE1D,qBAAO,OAAO,QAAQ,GAAQ,IAC9B,GAAO,OAAO,SAAS,GAAQ,IAC/B,GAAO,UAAU,IAAO,GAAG,IAErB,KAAqD,IAAA,KAAA,GACjC,KAAA,GAAA,GAAA,QAAA;qBAAA;AAAA,yBAAA,KAAA,GAAA,SAAf,MAAW,GAAA,KAEf,KAAW,EAChB,CAAA,MAAC,GAAY,GAAG,QAAhB,QAAC,AAAA,OAAA,SAAA,KAAqB,GAAO,aAAa,kBADd,CAGzB,CAAC,GAAiB,OAAD,CAAA,GAAA,KACpB,MAAA,IAAiB,KAAA,IAAA,CAAA,GAAkB,EAAsB,QAAD,CAAA,GAAA;qBAAA;AAAxD,qBAAA,MAA6B,GAAA,QAAA,GAAA,QAAA;qBAAA;AAE9B,qBAAO,UAA8B,KAApB,GAAY,GAAG,IAA6B,KAApB,GAAY,GAAG,IAAS,IAAI,KAErE,GAAO,UACN,GAAiB,KACG,KAApB,GAAY,GAAG,IACK,KAApB,GAAY,GAAG,IACf,IACA,IACoB,KAApB,GAAY,GAAG,IACK,KAApB,GAAY,GAAG,IACf,IACA,KATD,GAAA,QAAA;qBAAA;AAAA,yBAVyB,MAAA,CAAA,GAAA;qBAAA;AAsBd,yBAAZ,KAAA,GAAY,KAAA,CAAN,KAAM,CAAA,GAAM,EAAU;qBAAhB;AAAA,yBAAZ,GAAA,MAAA,QAAA,GAAA,OAAA,CAAY,GAAA,WAAZ,CAAA;;;;WWpPC,kBAAgB,IAChB,eAAa,IACb,OAAK,GACL,SAAO;ANnFL,eAAO,UAEV,IAAgB,OAAO,UAEvB,KAAgB,IAEhB,OAAO,UAAU,GAAA,WAAA;AOwEjB,iBAAO,IAAI,QAAQ,SAAA,IAAA;AAAA,gBACZ,KAAiB,IAAI,KACrB,IAA+B,CAiBpC,IAAI,EAAU,cAAc,WAAA;AAC3B,mBAAK,aAAa,EACjB,KAAK,YACL,MACA,2UAeA;gBAKF,IAAI,EAAU,WAAW,WAAA;AACxB,mBAAK,YAAY,EAChB,KAAK,WACL,MACA,0EAIA;gBAGF,IAAI,EAAU,YAAY,WAAA;AACzB,mBAAK,YAAY,EAChB,KAAK,WACL,2BACA,2EAIA;gBAGF,IAAI,EAAU,SAAS,WAAA;AAEtB,mBAAK,QAAQ,EACZ,KAAK,OACL,MACA,mFAIA;gBAGF,IAAI,EAAU,eAAe,WAAA;AAC5B,mBAAK,aAAa,eAAe,WAAA;AAAM,uBAAA,GAAQ,KAAK;;gBAUrD,IAAI,EAAU,WAAW,WAAA;AACxB,mBAAK,UAAU,EAAY,KAAK,SAAS,CACxC,CACC,0CACA,2IAEA,YAED,CAAC,WAAW,wCAAwC;gBActD,IAAI,EAAU,cAAc,WAAA;AAC3B,mBAAK,aAAa,EACjB,KAAK,YACL,MACA,uCACA;gBAGF,IAAI,EAAU,cAAc,WAAA;AAC3B,mBAAK,QAAQ,QAAQ,IAAI,MAAM,EAC9B,KAAK,QAAQ,QAAQ,IAAI,KAIzB,8BACA,mFAGA;gBAIF,IAAI,EAAU,OAAO,WAAA;AACpB,mBAAK,iBAAiB,EAAY,KAAK,gBAAgB,CACtD,CACC,yCACA,oJAGA,WAED,CACC,gEACA,6EAEA,aAGF,KAAK,aAAa,OAAO,SAAA,IAAA;AAAO,uBAAA,GAAQ,KAAK,OAAO;;gBAErD,IAAI,EAAU,oBAAoB,WAAA;AACjC,mBAAK,QAAQ,OAAO,MAAM,EACzB,KAAK,QAAQ,OAAO,KACpB,eACA,8EAEA;gBAGF,IAAI,EAAU,OAAO,WAAA;AACpB,mBAAK,WAAW,EAAY,KAAK,UAAU,CAC1C,CACC,cACA,oFAEA,WAED,CACC,WACA,0EAEA,aAIF,KAAK,aAAa,mBAAmB,SAAA,IAAA;AAAO,uBAAA,GAAQ,KAAK,OAAO;;gBAGjE,IAAI,EAAU,eAAe,WAAA;AAC5B,mBAAK,iBAAiB,EACrB,KAAK,gBACL,6CACA,4IAEA;gBAIF,IAAI,EAAU,SAAS,WAAA;AACtB,mBAAK,aAAa,SAAS,WAAA;AAAM,uBAAA,GAAQ,KAAK;;gBAE/C,IAAI,EAAU,QAAQ,WAAA;AACrB,mBAAK,aAAa,QAAQ,WAAA;AAAM,uBAAA,GAAQ,KAAK;;gBAE9C,IAAI,EAAU,SAAS,WAAA;AACtB,mBAAK,aAAa,SAAS,WAAA;AAAM,uBAAA,GAAQ,KAAK;;gBAE/C,IAAI,EAAU,UAAU,WAAA;AACvB,mBAAK,eAAe,EACnB,KAAK,cACL,+BACA,sEAEA;gBAIF,IAAI,EAAU,cAAc,WAAA;AAC3B,mBAAK,cAAc,EAClB,KAAK,aACL,4BACA,8KAIA,WAED,KAAK,oBAAoB,EACxB,KAAK,mBACL,oDACA,0KAIA;;AAIH,cAAW,QAAQ,SAAA,IAAA;AAAA,kBAAA;AAAA,cAClB,MAAA,GAAO,UADW,QAClB,AAAA,OAAA,SAAA,SAAA,GAAA,KAAA;gBAGD,KAAK,OAAO,OAAO,EAClB,KAAK,OAAO,MACZ,uBACA;;;GAIA,YAED,KAAK,aAAa,EAAY,KAAK,YAAY,CAC9C,CACC,6BACA,iFACA,YAED,CACC,oCACA,+FACA,cAIF,KAAK,oBAAoB,EAAY,KAAK,mBAAmB,CAC5D,CACC,OACA,mFACA,YAED,CACC,QACA,kJACA,cAGF,KAAK,QAAQ,OAAO,cAAc,EACjC,KAAK,QAAQ,OAAO,aACpB,qCACA,mOAOA,UAED,KAAK,SAAS,EACb,KAAK,QACL,mBACA,yDAGA,UAED,KAAK,iBAAiB,EACrB,KAAK,gBACL,kBACA,iEAEA,WAED,GAAQ;;YP3WF,KAAK,SAAA,IAAA;AACX,YAAc,QAAQ,IACtB,EAAc,KAAK,GAAO,GAAG,KAAK,KAClC,KAAK,OAAO,mBAAmB,IAAI,CAAC,IAAW,KAAU;AAEzD,cAAM,KAAc,SAAS,cAAc;AAC3C,aAAY,cAAc,YACxB,SAAS,cAAc,WAA2B,aACnD,IACC,SAAS,cAAc,WAA2B,SAAS,KAGxD,KAAK,YAAL,WAA6B,MAAK,YAAL,UAA8B,OAChE,KAAK,YAAY,WAAW,EAC3B,MAAM,GACN,MAAM,MAEP,KAAK,IAAI,gBACT,KAEA,GAAO,OAAO,QAAQ,SAAA,IAAA;AAAO,mBAAA;cAE7B,GAAO,SAAS,IAAI,MAAM,GAAO,QAAQ,EACxC,KAAK,SAAC,IAAS,IAAK,GAAf;AAEJ,mBADY,AAAR,OAAQ,YAAU,KACtB;gBAIG,OAAO,kBAAgB,QAAO,iBAAiB,KAEpD,OAAO,eAAe,QAAQ,SAAA,IAAA;AAAO,mBAAA;cAErC,OAAO,iBAAiB,IAAI,MAAM,GAAO,QAAQ,EAChD,KAAK,SAAC,IAAS,IAAK,GAAf;AAEJ,mBADY,AAAR,OAAQ,YAAU,KACtB;gBAGF;;AAvCD,YAAA,KA0Cc;AAAA,eAAA;;;;;;AQrEf,wBAAoB;;;ACMb,4BAAmB;AAAA,IASzB,YAIQ,MAKA,OAQA,aACN;AAdM;AAKA;AAQA;AAEP,oBAAa,WAAW,KAAK;AAAA;AAAA;AA5BxB;AACQ,EADR,aACQ,aAA6B;;;ACL5C,uBAAoB;AAMZ,8CAAsC,uBAAQ,gBAAgB;AAAA,IA+BrE,YACC,MACA,MACA,OACA,MACA,UACA,SACA,SACC;AACD,YAAM,MAAM,MAAM,OAAO,MAAM,CAAC,SAAS,IAAI,SAAS,KAAK,SAAS;AAAA;AAAA;;;AChDtE,wBAAoB;AAQZ,sCAA8B,wBAAQ,QAAQ;AAAA,IA6BrD,YACC,MACA,MACA,OACA,MACA,SACC;AACD,YAAM,MAAM,MAAM,OAAO,MAAM;AAAA;AAAA;;;ACpC1B,2CAAmC,wBAAwB;AAAA,IAYjE,YACC,MACA,MACA,OACA,UACA,MACA,MACA,SACA,SACC;AACD,YAAM,MAAM,MAAM,OAAO,MAAM,UAAU,SAAS;AAClD,UAAI,OAAO,OAAO,WAAW,MAAM,UAAU;AAAa,eAAO,WAAW,MAAM,QAAQ;AAC1F,aAAO,WAAW,MAAM,MAAM,KAAK;AACnC,UAAI,SAAS;AAAW,aAAK,iBAAiB;AAAA;AAAA;AAQzC,kCAA0B,qBAAqB;AAAA,IA2BrD,YACC,MACA,MACA,UACA,MACA,MACA,OAA+B;AAAA,MAC9B;AAAA,MACA;AAAA,MACA;AAAA,OAED,SACA,SACC;AACD,YAAM,MAAM,MAAM,GAAG,UAAU,MAAM,MAAM,SAAS;AA3B9C,oBAAS;AAuCT,8BAAmB,MAAY;AACrC,eAAO,WAAW,cAAc,KAAK;AACrC,aAAK;AAAA;AAbL,WAAK,UAAU;AAAA,QACd,KAAK;AAAA;AAEN,WAAK,OAAO;AACZ,WAAK,SAAS;AACd,WAAK,WAAW;AAChB,WAAK,SAAS;AACd,WAAK,eAAe;AACpB,WAAK,OAAO;AAAA;AAAA;AAWd,MAAI,aAAa,QAAQ,WAAW,CAAC,OAAO,OAAO,GAAG,WAAW;AAM1D,2BAAmB;AAAA,IA6BzB,YAAY,MAAc,IAAY,SAA8B,UAAsB,UAAsB;AAC/G,WAAK,OAAO;AACZ,WAAK,KAAK;AACV,WAAK,OAAO,IAAI,YACf,OAAO,KAAK,WACZ,wEACA,CAAC,KAAK,OACN,KAAK,IACL,WACA,UACA;AAED,WAAK,cAAc,IAAI,YACtB,mBACA,gDACA,CAAC,KAAK,MACN,WACA,KAAK,IACL;AAAA;AAAA;;;AC3JI,yBAAiB;AAAA,IAAjB,cAAP;AAmCS,qBAAmB;AAAA;AAAA,QAEvB,OAAO,OAAgB;AAC1B,WAAK,UAAU;AACf,UAAI,OAAO,KAAK,QAAQ,aAAa;AACpC,aAAK,IAAI,MAAM,UAAU,QAAQ,SAAS;AAAA;AAAA;AAAA,QAIxC,SAAS;AACZ,aAAO,KAAK;AAAA;AAAA;;;ACzCN,mCAAiC,YAA+B;AACvE,UAAM,MAAM,SAAS,cAAc;AACnC,QAAI,YAAY,WAAW;AAC3B,WAAO,IAAI;AAAA;AAsBL,mBAAiB,MAAmC,IAAyB;AA7BpF;AA8BC,QAAI,OAAO,0BAAI,aAAY,aAAa;AACvC,UAAI,OAAO,gCAAI,YAAJ,mBAAa,SAAQ,eAAe,CAAC,GAAG,QAAQ;AAAK,eAAO;AACvE,UAAI,OAAO,gCAAI,YAAJ,mBAAc,WAAU,eAAe,CAAC,GAAG,QAAQ;AAAO,eAAO;AAAA;AAE7E,WAAO;AAAA;AAOD,uBAAqB,MAAyB;AACpD,WAAO,GACN,CAAE,QAAO,KAAK,OAAO,eAAe,KAAK,OAAO,MAAM,yBAAyB,KAAK,SAAS,yBACvE,CAAC,KAAK,KAAK,QAAQ,CAAC,KAAK,KAAK;AAAA;;;AC5C/C,yBAAuB,KAAkB,SAAuB;AACtE,QAAI,iBAAiB,YAAY,MAAM;AACtC,WAAK,QAAQ,aAAa;AAAA;AAE3B,QAAI,iBAAiB,aAAa,iBAAiB;AAClD,WAAK,QAAQ,UAAU;AACvB,WAAK,QAAQ,KACZ,MACA,SACA;AAED,WAAK,QAAQ;AAAA;AAAA;;;ACNR,6CAAoC,WAAW;AAAA,IAQrD,YAAY,IAAY,MAAiB,UAAkB,SAAwB;AAClF;AAdF;AAeE,WAAK,KAAK;AACV,WAAK,OAAO;AACZ,WAAK,WAAW;AAChB,WAAK,UAAU;AACf,YAAM,OAAM,uBAAsB;AAClC,sBAAK,KAAK,cAAV,uBAAwB;AACxB,WAAK,QAAQ,KAAK,KAAK,UAAU,KAAK,QAAQ;AAAA;AAAA,IAGxC,SAAsB;AAC5B,UAAI,MAAM,wBAAiC;AAAA;AAAA;AAAA,UAGnC,KAAK;AAAA;AAAA;AAAA,WAGJ,KAAK;AAAA,uBACO,CAAC,KAAK,KAAK,KAAK,aAAa;AAAA,cACtC,YAAY,KAAK;AAAA;AAAA;AAAA;AAI7B,UAAI,OAAO,KAAK,YAAY,aAAa;AACxC,YAAI,iBAAiB,SAAS,KAAK,QAAQ,KAAK;AAAA;AAEjD,UAAI,OAAO,KAAK,YAAY,aAAa;AACxC,sBAAc,KAAK,KAAK;AAAA;AAEzB,UAAI,OAAO,KAAK,cAAc,aAAa;AAC1C,cAAM,KAAK,UAAU;AAAA;AAEtB,UAAI,KAAK,QAAQ;AAChB,YAAI,MAAM,UAAU;AAAA;AAErB,aAAO;AAAA;AAAA;AA5CF;AACC,EADD,sBACC,OAAgD;;;ACDjD,wCAA+B,WAAW;AAAA,IAGhD,YAAY,IAAY,MAAiB,SAAwB;AAChE;AACA,WAAK,KAAK;AACV,WAAK,OAAO;AACZ,WAAK,UAAU;AACf,WAAK,QAAQ,kBAAiB,KAAK,KAAK,QAAQ;AAAA;AAAA,IAG1C,SAAsB;AAC5B,UAAI,MAAM,wBAAiC;AAAA;AAAA;AAAA,SAGpC,KAAK;AAAA;AAAA;AAAA,UAGJ,KAAK;AAAA,sBACO,CAAC,KAAK,KAAK,KAAK,aAAa;AAAA,aACtC,YAAY,KAAK;AAAA;AAAA;AAG5B,UAAI,OAAO,KAAK,YAAY,aAAa;AACxC,YAAI,iBAAiB,SAAS,KAAK,QAAQ,KAAK;AAAA;AAEjD,UAAI,OAAO,KAAK,YAAY,aAAa;AACxC,sBAAc,KAAK,KAAK;AAAA;AAEzB,UAAI,OAAO,KAAK,cAAc,aAAa;AAC1C,cAAM,KAAK,UAAU;AAAA;AAEtB,UAAI,KAAK,QAAQ;AAChB,YAAI,MAAM,UAAU;AAAA;AAErB,aAAO;AAAA;AAAA;AAnCF;AACC,EADD,iBACC,OAA2B;;;ACD5B,mCAA2B,KAAK,SAAS;AAAA,IAK/C,YACC,MACA,MACC;AACD,YAAM,MAAM;AAAA;AAAA;;;ACZP,2BAAmB,aAAa;AAAA,IAQtC,YACC,MACA,MACA,OACA,QACC;AACD,YAAM,MAAM;AAAA;AAAA;;;ACfd,wBAAoB;AAMZ,0CAAkC,wBAAQ,YAAY;AAAA,IAqC7D,YAAY,MAAc,MAAc,MAAiB;AACxD,YAAM,MAAM,MAAM;AAAA;AAAA;;;ACvCZ,wCAAgC,oBAAoB;AAAA,IAO3D,YAAY,MAAc,MAAc,MAAiB;AACxD,YAAM,MAAM,MAAM;AAClB,WAAK,OAAO;AACZ,WAAK,UAAU,EAAE,QAAQ;AACzB,WAAK,MAAM;AACX,WAAK,SAAS;AACd,WAAK,eAAe;AAAA;AAAA;;;AbLtB,MAAM,aAAa;AAAA,IAElB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IAGA;AAAA,IACA;AAAA,IACA;AAAA,IAEA,aAAa;AAAA,IACb,OAAO,EAAE,SAAS,KAAK;AAAA,IAGvB;AAAA,IACA;AAAA,IAGA;AAAA,IAGA,QAAQ;AAAA,IAGR;AAAA,IACA;AAAA,IACA;AAAA;AASD,MAAI;AACJ,MAAI,OAAO,OAAO,eAAe;AAAa,uBAAmB,OAAO;AAAA,OACnE;AACJ,WAAO,aAAa;AACpB,uBAAmB;AAEnB,4BAAQ,OAAO,KAAK,MAAM;AACzB,UAAW;AAAX,gBAAW,aAAX;AACC,+BAAQ;AACR,iCAAU;AACV,gCAAS;AAAA,SAHC;AAOX,WAAK,aAAa,wBAAQ,YAAY,KAAK,YAAY;AAAA,QACtD;AAAA,UACC;AAAA,UACA;AAAA,UACA,WAAW;AAAA;AAAA;AAIb,WAAK,QAAQ,wBAAQ,YAAY,KAAK,OAAO;AAAA,QAC5C;AAAA,UACC;AAAA,UACA;AAAA,UACA,WAAW;AAAA;AAAA;AAIb,WAAK,eAAe,wBAAQ,YAAY,KAAK,cAAc;AAAA,QAE1D;AAAA,UACC;AAAA,UACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAehB,WAAW;AAAA;AAAA;AAsBb,WAAK,aAAa,wBAAQ,YAAY,KAAK,YAAY;AAAA,QAEtD;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA,UAIA,WAAW;AAAA;AAAA,QAIZ;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA,UAIA,WAAW;AAAA;AAAA,QAIZ;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOA,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA,UAIA,WAAW;AAAA;AAAA,QAIZ;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA,UAIA,WAAW;AAAA;AAAA,QAIZ;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAMA,WAAW;AAAA;AAAA,QAIZ;AAAA,UACC;AAAA,UACA;AAAA;AAAA;AAAA;AAAA,UAIA,WAAW;AAAA;AAAA;AAIb,WAAK,kBAAkB,wBAAQ,YAAY,KAAK,iBAAiB;AAAA,QAChE;AAAA,UACC;AAAA,UACA;AAAA,UACA,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC;AAAA,UACA;AAAA,UACA,WAAW;AAAA;AAAA,QAEZ,CAAC,yBAAyB,2BAA2B,WAAW;AAAA;AAkBjE,eAAS,qBAAqB,QAAQ,GAAG,YACxC,wBAAkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgDnC,iBAAW,OAAO,QAAQ,CAAC,SAAS;AAGpC,YAAM,SAAS,EAAE,YAAY,YAC5B,wBAAiC;AAAA;AAAA;AAKlC,uBAAiB,KAAK,QAAQ,CAAC,QAAQ;AACtC,YAAI,MAAM,OAAO,YAAY,IAAI;AAAA;AAGlC,WAAK,YAAY,QAAQ,CAAC,WAAW;AAjSvC;AAkSG,cAAM,KAAK,EAAE,MAAM,OAAO;AAC1B,YAAI,OAAO,MAAM;AAChB,gBAAM,WAAW,GAAG,YACnB,wBAAiC;AAAA,oBAClB,OAAO;AAAA;AAIvB,gBAAM,OAAO,sBAAsB;AACnC,0BAAK,OAAO,UAAZ,uBAAsB;AAEtB,eAAK,OAAO,MAAM,QAAQ,CAAC,QAAQ;AAClC,gBAAI,MAAM,SAAS,YAAY,IAAI;AAAA;AAAA;AAAA;AAAA;AAoBvC,eAAW,OAAO,KAAK,MAAM;AAC5B,UAAI,aAAa,UAAU,WAAW,CAAC,OAAwB,GAAG,SAAS;AAE3E,YAAM,WACL;AAED,UAAI,kBAAkB,iBAAiB,0CAA0C,CAAC,IAAI,GAAG;AACzF,UAAI,kBAAkB,cAAc,mDAAmD,CAAC,GAAG,GAAG;AAC9F,UAAI,kBAAkB,eAAe,iEAAiE;AAAA,QACrG;AAAA,QACA;AAAA,QACA;AAAA;AAED,YAAM,YAAY,IAAI,kBACrB,OACA,uFACA,CAAC,GAAG,GAAG;AAKF,UAAI,YAAY;AAOhB,UAAI,WAAsB;AAAA,QACtB,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM,mEAAmE,MAAM,MAAM;AAClF,cAAI,KAAK,QAAQ,UAAU,QAAM;AAAA;AAAA,QAErC,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM,yDAAyD,MAAM,MAAM;AACxE,eAAK,aAAa;AAClB,qBAAW,MAAM;AACb,iBAAK,aAAa,OAAO,MAAI;AAC7B;AAAA,aACD;AAAA;AAAA,QAEP,EAAC,MAAM;AAAA,QACP,EAAC,MAAM;AAAA;AAEX,gBAAU,gBAAgB,MAAM;AACrC,YAAI,cAAc,SAAS;AAAQ;AAAA;AAE9B,gBAAU,WAAW,MAAM;AACvB,YAAI,OAAO,SAAS,WAAW,SAAS,aAAa;AACjD,mBAAS,WAAW;AAAA;AAExB,eAAO,SAAS,WAAW;AAAA;AAG/B,gBAAU,eAAe,MAAM;AA5YvC;AA6YY,eAAO,qBAAS,eAAT,mBAAqB,SAArB,YAA6B,CAAC,GAAG;AAAA;AAIlD,cAAQ,IAAI;AAAA;AAAA;AA+Bd,MAAO,cAAQ;",
  "names": []
}
